window.onload=function(){var t=document.querySelector(".body"),n=document.querySelector(".burger"),o=document.querySelectorAll(".burger__bars"),r=document.querySelector(".nav"),c=document.querySelector(".nav-desktop"),e=document.querySelectorAll(".nav-mobile__link"),s=document.querySelector(".arrowup"),i=document.querySelector(".footer__bottom--date"),l=document.querySelectorAll(".section"),a=document.querySelector(".error-msg"),u=document.querySelector(".error-msg-tel"),d=document.querySelector(".email"),m=document.querySelector(".telNum"),f=document.querySelector(".submit"),v=document.querySelector(".msg-status");"?mail_status=sent"===document.location.search&&(v.classList.add("succes"),v.textContent="Wiadomość wysłana!"),setTimeout(function(){v.classList.remove("succes")},3e3),"?mail_status=error"===document.location.search&&(v.classList.add("error"),v.textContent="błąd, spróbuj ponownie"),setTimeout(function(){v.classList.remove("error")},3e3);function h(e){e.classList.remove("error-display"),e.textContent=""}function L(e,t){e.classList.add("error-display"),e.textContent=t}var y=(new Date).getFullYear(),b=(i.textContent=y.toString(),window.addEventListener("scroll",function(){var t=window.scrollY;l.forEach(function(e){!e.classList.contains("white-section")&&e.offsetTop<=t+30?o.forEach(function(e){return e.classList.add("white-burger")}):e.classList.contains("white-section")&&e.offsetTop<=t+100&&o.forEach(function(e){return e.classList.remove("white-burger")})}),480<window.scrollY?s.classList.add("active"):s.classList.remove("active")}),n.addEventListener("click",function(){r.classList.toggle("active"),n.classList.toggle("active"),t.classList.toggle("disable-scroll"),e.forEach(function(e){e.addEventListener("click",function(){r.classList.remove("active"),n.classList.remove("active"),t.classList.remove("disable-scroll")})})}),f.addEventListener("click",function(e){e.preventDefault(),/^[\w-\.]+@([\w-]+\.)+[\w-]{2,4}$/.test(d.value)?h(a):L(a,"wpisz poprawny adres email."),/^[0-9\+]{8,13}$/.test(m.value)?h(u):L(u,"wpisz poprawny nr tel.")}),document.querySelectorAll(".carousel")),g=document.querySelectorAll(".carousel-thumbnails"),i=document.querySelectorAll(".work-btn"),w=document.querySelectorAll(".arrow"),E=document.querySelectorAll(".gallery"),S=document.getElementById("haircut"),q=document.getElementById("color"),p=document.getElementById("barber"),A=document.getElementById("style"),k=document.querySelectorAll(".img"),C=document.querySelectorAll(".thumbnail-img");function _(t,n){var o=t;w.forEach(function(e){return e.addEventListener("click",function(){"left"===e.id&&o===t?(o=n+1,o--):"left"===e.id&&t<o?o--:"right"===e.id&&o<n?o++:o=t,I(o),B(o)})})}function x(e){b.forEach(function(e){return e.firstElementChild.classList.add("show-image")}),g.forEach(function(e){return e.firstElementChild.classList.remove("thumbnail-disabled")}),t.classList.add("disable-scroll"),e.classList.add("display-gallery"),c.classList.add("nav-transition")}function I(n){k.forEach(function(e,t){n===t?(e.classList.add("show-image"),B(t)):e.classList.remove("show-image")})}function B(n){C.forEach(function(e,t){return n===t?e.classList.remove("thumbnail-disabled"):e.classList.add("thumbnail-disabled")})}i.forEach(function(t){return t.addEventListener("click",function(){var e;"btn-one"===(e=t).id?(x(S),_(0,3)):"btn-two"===e.id?(x(q),_(4,7)):"btn-three"===e.id?(x(p),_(8,11)):"btn-four"===e.id&&(x(A),_(12,15))})}),C.forEach(function(e,t){return e.addEventListener("click",function(){I(index=t)})}),document.addEventListener("click",function(e){(e.target.classList.contains("gallery")&&t.classList.contains("disable-scroll")||t.classList.contains("carousel"))&&(E.forEach(function(e){return e.classList.remove("display-gallery")}),t.classList.remove("disable-scroll"),c.classList.remove("nav-transition"),index=0,b.forEach(function(e){return e.firstElementChild.classList.add("show-image")}))});var T=new IntersectionObserver(function(e){e.forEach(function(e){e.isIntersecting&&e.target.classList.add("show")})}),y=document.querySelectorAll(".hidden"),f=document.querySelectorAll(".hidden-right"),i=document.querySelectorAll(".hidden-vanished");y.forEach(function(e){return T.observe(e)}),f.forEach(function(e){return T.observe(e)}),i.forEach(function(e){return T.observe(e)})};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsid2luZG93Iiwib25sb2FkIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiYnVyZ2VyIiwiYm9keSIsImFsbEJ1cmdlckJhcnMiLCJxdWVyeVNlbGVjdG9yQWxsIiwibmF2TW9iaWxlIiwibmF2RGVza3RvcCIsImFycm93VXAiLCJmb290ZXJEYXRlIiwiYWxsU2VjdGlvbnMiLCJlcnJvck1zZyIsImVycm9yTXNnVGVsIiwiZW1haWwiLCJ0ZWxOdW0iLCJtc2dTdGF0dXMiLCJsb2NhdGlvbiIsInNlYXJjaCIsInNldFRpbWVvdXQiLCJjbGFzc0xpc3QiLCJhZGQiLCJyZW1vdmUiLCJ0ZXh0Q29udGVudCIsImN1cnJlbnREYXRlIiwiRGF0ZSIsImN1cnJlbnRZZWFyIiwiY2hlY2tUZWxOdW0iLCJlbCIsImZvcm1Cb3giLCJ0aHVtYm5haWxzQ2Fyb3VzZWxzIiwiYXJyb3dJY29ucyIsImdhbGxlcmllcyIsIm1zZyIsImhhbmRsZUZvb3RlclllYXIiLCJnZXRGdWxsWWVhciIsImNhcm91c2VscyIsImhhbmRsZU5hdiIsInRvU3RyaW5nIiwiYWRkRXZlbnRMaXN0ZW5lciIsImZvckVhY2giLCJjdXJyZW50U2VjdGlvbiIsInNlY3Rpb24iLCJoYW5kbGVBcnJvd1VwIiwiY29udGFpbnMiLCJvZmZzZXRUb3AiLCJiYXIiLCJ2YWxpZE51bSIsImhhbmRsZU9ic2VydmVyIiwiY2hlY2tNYWlsIiwidG9nZ2xlIiwiYWxsTmF2TGlua3MiLCJsaW5rIiwic2Nyb2xsWSIsInN1Ym1pdEJ0biIsInN0eWxlR2FsbGVyeSIsImdldEVsZW1lbnRCeUlkIiwiZSIsImltYWdlcyIsInRlc3QiLCJ0aHVtYm5haWxJbWFnZXMiLCJ2YWx1ZSIsImNsZWFyRXJyb3IiLCJoYW5kbGVXb3JrQnRuIiwiaWQiLCJ3b3JrQnRucyIsImhhbmRsZUFycm93QWN0aW9uIiwic3RhcnRJbmRleCIsImhhaXJjdXRHYWxsZXJ5IiwiY29sb3JHYWxsZXJ5IiwiaGFuZGxlRGlzcGxheUdhbGxlcnkiLCJiYXJiZXJHYWxsZXJ5IiwiZW5kSW5kZXgiLCJjYXJvdXNlbCIsImZpcnN0RWxlbWVudENoaWxkIiwiaWNvbiIsImluZGV4IiwiZ2FsbGVyeVR5cGUiLCJoYW5kbGVEaXNwbGF5SW1hZ2UiLCJpbWFnZSIsImN1cnJlbnRJbmRleCIsImhhbmRsZUFjdGl2YXRlVGh1bWJuYWlsIiwidGh1bWJuYWlsIiwidGh1bWJuYWlsSW5kZXgiLCJ0YXJnZXQiLCJidG4iLCJlbnRyeSIsImhpZGRlbkVsZW1lbnRzTGVmdCIsImhpZGRlblZhbmlzaGVkRWxlbWVudHMiLCJnYWxsZXJ5IiwiaGlkZGVuRWxlbWVudHNSaWdodCIsIm9ic2VydmVyIiwib2JzZXJ2ZSIsIkludGVyc2VjdGlvbk9ic2VydmVyIiwiZW50cmllcyIsImlzSW50ZXJzZWN0aW5nIl0sIm1hcHBpbmdzIjoiQUFBQUEsT0FBT0MsT0FBUyxXQUFoQkQsSUFBT0MsRUFBTUMsU0FBR0MsY0FBWSxPQUFBLEVBQzFCQyxFQUFBRixTQUFBQyxjQUFBLFNBQUEsRUFDTUUsRUFBZ0JGLFNBQUFBLGlCQUFzQixlQUFBLEVBQ3RDQyxFQUFTRixTQUFTQyxjQUFjLE1BQVUsRUFDMUNHLEVBQWFKLFNBQVdDLGNBQUNJLGNBQWlCLEVBQzFDQyxFQUFZTixTQUFTQyxpQkFBcUIsbUJBQUEsRUFDMUNNLEVBQVVQLFNBQVdDLGNBQWMsVUFBQyxFQUVwQ08sRUFBVVIsU0FBU0MsY0FBYyx1QkFBVyxFQUU1Q1EsRUFBYVQsU0FBU0MsaUJBQWMsVUFBQSxFQUNwQ1MsRUFBV1YsU0FBV0MsY0FBQ0ksWUFBaUIsRUFDeENNLEVBQVdYLFNBQVNDLGNBQWMsZ0JBQWEsRUFDL0NXLEVBQUFBLFNBQWNaLGNBQVNDLFFBQWMsRUFDckNZLEVBQVFiLFNBQVNDLGNBQWMsU0FBUyxFQUN4Q2EsRUFBU2QsU0FBU0MsY0FBYyxTQUFVLEVBSTFDYyxFQUFZZixTQUFTQyxjQUFjLGFBQWEsRUFTdEQsc0JBQUFELFNBQUFnQixTQUFBQyxTQUNBQyxFQUFXQyxV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LEVBQUF0RCxRQUFBLFNBQUE4QyxHQUNBQSxFQUFBUyxnQkFDQVQsRUFBQUYsT0FBQWhFLFVBQUFDLElBQUEsTUFBQSxDQUVBLENBQUEsQ0FDQSxDQUFBLEVBRUFrRSxFQUFBdEYsU0FBQUssaUJBQUEsU0FBQSxFQUNBb0YsRUFBQXpGLFNBQUFLLGlCQUFBLGVBQUEsRUFDQWtGLEVBQUF2RixTQUFBSyxpQkFBQSxrQkFBQSxFQUNBaUYsRUFBQS9DLFFBQUEsU0FBQVosR0FBQSxPQUFBK0QsRUFBQUMsUUFBQWhFLENBQUEsQ0FBQSxDQUFBLEVBQ0E4RCxFQUFBbEQsUUFBQSxTQUFBWixHQUFBLE9BQUErRCxFQUFBQyxRQUFBaEUsQ0FBQSxDQUFBLENBQUEsRUFDQTRELEVBQUFoRCxRQUFBLFNBQUFaLEdBQUEsT0FBQStELEVBQUFDLFFBQUFoRSxDQUFBLENBQUEsQ0FBQSxDQUNBIiwiZmlsZSI6Im1haW4ubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsid2luZG93Lm9ubG9hZCA9IGZ1bmN0aW9uICgpIHtcclxuICAvL3NlbGVjdG9yc1xyXG4gIGNvbnN0IGJvZHkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmJvZHlcIik7XHJcbiAgY29uc3QgYnVyZ2VyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5idXJnZXJcIik7XHJcbiAgY29uc3QgYWxsQnVyZ2VyQmFycyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuYnVyZ2VyX19iYXJzXCIpO1xyXG4gIGNvbnN0IG5hdk1vYmlsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubmF2XCIpO1xyXG4gIGNvbnN0IG5hdkRlc2t0b3AgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm5hdi1kZXNrdG9wXCIpO1xyXG4gIGNvbnN0IGFsbE5hdkxpbmtzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5uYXYtbW9iaWxlX19saW5rXCIpO1xyXG4gIGNvbnN0IGFycm93VXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmFycm93dXBcIik7XHJcblxyXG4gIGNvbnN0IGZvb3RlckRhdGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmZvb3Rlcl9fYm90dG9tLS1kYXRlXCIpO1xyXG4gIGNvbnN0IGFsbFNlY3Rpb25zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5zZWN0aW9uXCIpO1xyXG4gIGNvbnN0IGVycm9yTXNnID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5lcnJvci1tc2dcIik7XHJcbiAgY29uc3QgZXJyb3JNc2dUZWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmVycm9yLW1zZy10ZWxcIik7XHJcbiAgY29uc3QgZW1haWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmVtYWlsXCIpO1xyXG4gIGNvbnN0IHRlbE51bSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudGVsTnVtXCIpO1xyXG4gIGNvbnN0IHN1Ym1pdEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuc3VibWl0XCIpO1xyXG5cclxuXHJcbiAgY29uc3QgbXNnU3RhdHVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tc2ctc3RhdHVzXCIpO1xyXG5cclxuICBcclxuICBcclxuICAvL3NlbmQgbWFpbFxyXG5cclxuICBpZiAoZG9jdW1lbnQubG9jYXRpb24uc2VhcmNoID09PSBcIj9tYWlsX3N0YXR1cz1zZW50XCIpIHtcclxuICAgIG1zZ1N0YXR1cy5jbGFzc0xpc3QuYWRkKFwic3VjY2VzXCIpO1xyXG4gICAgbXNnU3RhdHVzLnRleHRDb250ZW50ID0gXCJXaWFkb21vxZvEhyB3eXPFgmFuYSFcIjtcclxuICB9XHJcbiAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICBtc2dTdGF0dXMuY2xhc3NMaXN0LnJlbW92ZShcInN1Y2Nlc1wiKTtcclxuICB9LCAzMDAwKTtcclxuXHJcbiAgaWYgKGRvY3VtZW50LmxvY2F0aW9uLnNlYXJjaCA9PT0gXCI/bWFpbF9zdGF0dXM9ZXJyb3JcIikge1xyXG4gICAgbXNnU3RhdHVzLmNsYXNzTGlzdC5hZGQoXCJlcnJvclwiKTtcclxuICAgIG1zZ1N0YXR1cy50ZXh0Q29udGVudCA9IFwiYsWCxIVkLCBzcHLDs2J1aiBwb25vd25pZVwiO1xyXG4gIH1cclxuICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgIG1zZ1N0YXR1cy5jbGFzc0xpc3QucmVtb3ZlKFwiZXJyb3JcIik7XHJcbiAgfSwgMzAwMCk7XHJcblxyXG4gIC8vIGZvb3RlclxyXG4gIGNvbnN0IGN1cnJlbnREYXRlID0gbmV3IERhdGUoKTtcclxuICBjb25zdCBjdXJyZW50WWVhciA9IGN1cnJlbnREYXRlLmdldEZ1bGxZZWFyKCk7XHJcblxyXG4gIGNvbnN0IGhhbmRsZUZvb3RlclllYXIgPSAoKSA9PiB7XHJcbiAgICBmb290ZXJEYXRlLnRleHRDb250ZW50ID0gY3VycmVudFllYXIudG9TdHJpbmcoKTtcclxuICB9O1xyXG5cclxuICBoYW5kbGVGb290ZXJZZWFyKCk7XHJcbiAgLy8gTkFWXHJcblxyXG4gIGNvbnN0IGhhbmRsZU5hdiA9ICgpID0+IHtcclxuICAgIG5hdk1vYmlsZS5jbGFzc0xpc3QudG9nZ2xlKFwiYWN0aXZlXCIpO1xyXG4gICAgYnVyZ2VyLmNsYXNzTGlzdC50b2dnbGUoXCJhY3RpdmVcIik7XHJcbiAgICBib2R5LmNsYXNzTGlzdC50b2dnbGUoXCJkaXNhYmxlLXNjcm9sbFwiKTtcclxuXHJcbiAgICBhbGxOYXZMaW5rcy5mb3JFYWNoKChsaW5rKSA9PiB7XHJcbiAgICAgIGxpbmsuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgICBuYXZNb2JpbGUuY2xhc3NMaXN0LnJlbW92ZShcImFjdGl2ZVwiKTtcclxuICAgICAgICBidXJnZXIuY2xhc3NMaXN0LnJlbW92ZShcImFjdGl2ZVwiKTtcclxuICAgICAgICBib2R5LmNsYXNzTGlzdC5yZW1vdmUoXCJkaXNhYmxlLXNjcm9sbFwiKTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICB9O1xyXG4gIGNvbnN0IGhhbmRsZUFycm93VXAgPSAoKSA9PiB7XHJcbiAgICBjb25zdCBjdXJyZW50U2VjdGlvbiA9IHdpbmRvdy5zY3JvbGxZO1xyXG4gICAgaWYgKGN1cnJlbnRTZWN0aW9uID4gNDgwKSB7XHJcbiAgICAgIGFycm93VXAuY2xhc3NMaXN0LmFkZChcImFjdGl2ZVwiKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGFycm93VXAuY2xhc3NMaXN0LnJlbW92ZShcImFjdGl2ZVwiKTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICBjb25zdCBoYW5kbGVPYnNlcnZlciA9ICgpID0+IHtcclxuICAgIGNvbnN0IGN1cnJlbnRTZWN0aW9uID0gd2luZG93LnNjcm9sbFk7XHJcblxyXG4gICAgYWxsU2VjdGlvbnMuZm9yRWFjaCgoc2VjdGlvbikgPT4ge1xyXG4gICAgICBpZiAoXHJcbiAgICAgICAgIXNlY3Rpb24uY2xhc3NMaXN0LmNvbnRhaW5zKFwid2hpdGUtc2VjdGlvblwiKSAmJlxyXG4gICAgICAgIHNlY3Rpb24ub2Zmc2V0VG9wIDw9IGN1cnJlbnRTZWN0aW9uICsgMzBcclxuICAgICAgKSB7XHJcbiAgICAgICAgYWxsQnVyZ2VyQmFycy5mb3JFYWNoKChiYXIpID0+IGJhci5jbGFzc0xpc3QuYWRkKFwid2hpdGUtYnVyZ2VyXCIpKTtcclxuICAgICAgfSBlbHNlIGlmIChcclxuICAgICAgICBzZWN0aW9uLmNsYXNzTGlzdC5jb250YWlucyhcIndoaXRlLXNlY3Rpb25cIikgJiZcclxuICAgICAgICBzZWN0aW9uLm9mZnNldFRvcCA8PSBjdXJyZW50U2VjdGlvbiArIDEwMFxyXG4gICAgICApIHtcclxuICAgICAgICBhbGxCdXJnZXJCYXJzLmZvckVhY2goKGJhcikgPT4gYmFyLmNsYXNzTGlzdC5yZW1vdmUoXCJ3aGl0ZS1idXJnZXJcIikpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICAgIGhhbmRsZUFycm93VXAoKTtcclxuICB9O1xyXG5cclxuICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInNjcm9sbFwiLCBoYW5kbGVPYnNlcnZlcik7XHJcbiAgYnVyZ2VyLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBoYW5kbGVOYXYpO1xyXG5cclxuICAvLyBmb3JtIHZhbGlkYXRvclxyXG5cclxuICBjb25zdCBjaGVja1RlbE51bSA9ICh0ZWxOdW0pID0+IHtcclxuICAgIGNvbnN0IHZhbGlkTnVtID0gL15bMC05XFwrXXs4LDEzfSQvO1xyXG5cclxuICAgIGlmICh2YWxpZE51bS50ZXN0KHRlbE51bS52YWx1ZSkpIHtcclxuICAgICAgY2xlYXJFcnJvcihlcnJvck1zZ1RlbCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBzaG93RXJyb3IoZXJyb3JNc2dUZWwsIFwid3Bpc3ogcG9wcmF3bnkgbnIgdGVsLlwiKTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICBjb25zdCBjaGVja01haWwgPSAoZW1haWwpID0+IHtcclxuICAgIGNvbnN0IHZhbGlkTWFpbCA9IC9eW1xcdy1cXC5dK0AoW1xcdy1dK1xcLikrW1xcdy1dezIsNH0kLztcclxuXHJcbiAgICBpZiAodmFsaWRNYWlsLnRlc3QoZW1haWwudmFsdWUpKSB7XHJcbiAgICAgIGNsZWFyRXJyb3IoZXJyb3JNc2cpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgc2hvd0Vycm9yKGVycm9yTXNnLCBcIndwaXN6IHBvcHJhd255IGFkcmVzIGVtYWlsLlwiKTtcclxuICAgIH1cclxuICB9O1xyXG4gIGNvbnN0IGNsZWFyRXJyb3IgPSAoZWwpID0+IHtcclxuICAgIGNvbnN0IGZvcm1Cb3ggPSBlbDtcclxuICAgIGZvcm1Cb3guY2xhc3NMaXN0LnJlbW92ZShcImVycm9yLWRpc3BsYXlcIik7XHJcbiAgICBmb3JtQm94LnRleHRDb250ZW50ID0gXCJcIjtcclxuICB9O1xyXG5cclxuICBjb25zdCBzaG93RXJyb3IgPSAoaW5wdXQsIG1zZykgPT4ge1xyXG4gICAgY29uc3QgZm9ybUJveCA9IGlucHV0O1xyXG4gICAgZm9ybUJveC5jbGFzc0xpc3QuYWRkKFwiZXJyb3ItZGlzcGxheVwiKTtcclxuICAgIGZvcm1Cb3gudGV4dENvbnRlbnQgPSBtc2c7XHJcbiAgfTtcclxuXHJcbiAgLy8gZXZlbnQgbGlzdGVuZXJzXHJcbiAgc3VibWl0QnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZSkgPT4ge1xyXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgY2hlY2tNYWlsKGVtYWlsKTtcclxuICAgIGNoZWNrVGVsTnVtKHRlbE51bSk7XHJcbiAgfSk7XHJcblxyXG4gIC8vIC0tLS0tLS0tLS0tLS0gR0FMTEVSWSAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuICBjb25zdCBjYXJvdXNlbHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmNhcm91c2VsXCIpO1xyXG4gIGNvbnN0IHRodW1ibmFpbHNDYXJvdXNlbHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmNhcm91c2VsLXRodW1ibmFpbHNcIik7XHJcbiAgY29uc3Qgd29ya0J0bnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLndvcmstYnRuXCIpO1xyXG5cclxuICBjb25zdCBhcnJvd0ljb25zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5hcnJvd1wiKTtcclxuICBjb25zdCBnYWxsZXJpZXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmdhbGxlcnlcIik7XHJcbiAgY29uc3QgaGFpcmN1dEdhbGxlcnkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImhhaXJjdXRcIik7XHJcbiAgY29uc3QgY29sb3JHYWxsZXJ5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjb2xvclwiKTtcclxuICBjb25zdCBiYXJiZXJHYWxsZXJ5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJiYXJiZXJcIik7XHJcbiAgY29uc3Qgc3R5bGVHYWxsZXJ5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzdHlsZVwiKTtcclxuXHJcbiAgY29uc3QgaW1hZ2VzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5pbWdcIik7XHJcbiAgY29uc3QgdGh1bWJuYWlsSW1hZ2VzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi50aHVtYm5haWwtaW1nXCIpO1xyXG5cclxuICBcclxuICBmdW5jdGlvbiBoYW5kbGVXb3JrQnRuKGJ0bikge1xyXG4gICAgaWYgKGJ0bi5pZCA9PT0gXCJidG4tb25lXCIpIHtcclxuICAgICAgbGV0IHN0YXJ0SW5kZXggPSAwO1xyXG4gICAgICBsZXQgZW5kSW5kZXggPSAzO1xyXG5cclxuICAgICAgaGFuZGxlRGlzcGxheUdhbGxlcnkoaGFpcmN1dEdhbGxlcnkpLCBoYW5kbGVBcnJvd0FjdGlvbihzdGFydEluZGV4LCBlbmRJbmRleCk7XHJcbiAgICB9IGVsc2UgaWYgKGJ0bi5pZCA9PT0gXCJidG4tdHdvXCIpIHtcclxuICAgICAgbGV0IHN0YXJ0SW5kZXggPSA0O1xyXG4gICAgICBsZXQgZW5kSW5kZXggPSA3O1xyXG4gICAgICBoYW5kbGVEaXNwbGF5R2FsbGVyeShjb2xvckdhbGxlcnkpO1xyXG4gICAgICBoYW5kbGVBcnJvd0FjdGlvbihzdGFydEluZGV4LCBlbmRJbmRleCk7XHJcbiAgICB9IGVsc2UgaWYgKGJ0bi5pZCA9PT0gXCJidG4tdGhyZWVcIikge1xyXG4gICAgICBsZXQgc3RhcnRJbmRleCA9IDg7XHJcbiAgICAgIGxldCBlbmRJbmRleCA9IDExO1xyXG4gICAgICBoYW5kbGVEaXNwbGF5R2FsbGVyeShiYXJiZXJHYWxsZXJ5KTtcclxuICAgICAgaGFuZGxlQXJyb3dBY3Rpb24oc3RhcnRJbmRleCwgZW5kSW5kZXgpO1xyXG4gICAgfSBlbHNlIGlmIChidG4uaWQgPT09IFwiYnRuLWZvdXJcIikge1xyXG4gICAgICBsZXQgc3RhcnRJbmRleCA9IDEyO1xyXG4gICAgICBsZXQgZW5kSW5kZXggPSAxNTtcclxuICAgICAgaGFuZGxlRGlzcGxheUdhbGxlcnkoc3R5bGVHYWxsZXJ5KTtcclxuICAgICAgaGFuZGxlQXJyb3dBY3Rpb24oc3RhcnRJbmRleCwgZW5kSW5kZXgpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gaGFuZGxlQXJyb3dBY3Rpb24oc3RhcnRJbmRleCwgZW5kSW5kZXgpIHtcclxuICAgIGxldCBpbmRleCA9IHN0YXJ0SW5kZXg7XHJcbiAgICBhcnJvd0ljb25zLmZvckVhY2goKGljb24pID0+XHJcbiAgICAgIGljb24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgICBpZiAoaWNvbi5pZCA9PT0gXCJsZWZ0XCIgJiYgaW5kZXggPT09IHN0YXJ0SW5kZXgpIHtcclxuICAgICAgICAgIGluZGV4ID0gZW5kSW5kZXggKyAxO1xyXG4gICAgICAgICAgaW5kZXgtLTtcclxuICAgICAgICB9IGVsc2UgaWYgKGljb24uaWQgPT09IFwibGVmdFwiICYmIGluZGV4ID4gc3RhcnRJbmRleCkge1xyXG4gICAgICAgICAgaW5kZXgtLTtcclxuICAgICAgICB9IGVsc2UgaWYgKGljb24uaWQgPT09IFwicmlnaHRcIiAmJiBpbmRleCA8IGVuZEluZGV4KSB7XHJcbiAgICAgICAgICBpbmRleCsrO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBpbmRleCA9IHN0YXJ0SW5kZXg7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGhhbmRsZURpc3BsYXlJbWFnZShpbmRleCk7XHJcbiAgICAgICAgaGFuZGxlQWN0aXZhdGVUaHVtYm5haWwoaW5kZXgpO1xyXG4gICAgICB9KVxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGhhbmRsZURpc3BsYXlHYWxsZXJ5KGdhbGxlcnlUeXBlKSB7XHJcbiAgICBjYXJvdXNlbHMuZm9yRWFjaCgoY2Fyb3VzZWwpID0+IGNhcm91c2VsLmZpcnN0RWxlbWVudENoaWxkLmNsYXNzTGlzdC5hZGQoXCJzaG93LWltYWdlXCIpKTtcclxuICAgIHRodW1ibmFpbHNDYXJvdXNlbHMuZm9yRWFjaCgoY2Fyb3VzZWwpID0+XHJcbiAgICAgIGNhcm91c2VsLmZpcnN0RWxlbWVudENoaWxkLmNsYXNzTGlzdC5yZW1vdmUoXCJ0aHVtYm5haWwtZGlzYWJsZWRcIilcclxuICAgICk7XHJcbiAgICBib2R5LmNsYXNzTGlzdC5hZGQoXCJkaXNhYmxlLXNjcm9sbFwiKTtcclxuICAgIGdhbGxlcnlUeXBlLmNsYXNzTGlzdC5hZGQoXCJkaXNwbGF5LWdhbGxlcnlcIik7XHJcbiAgICBuYXZEZXNrdG9wLmNsYXNzTGlzdC5hZGQoXCJuYXYtdHJhbnNpdGlvblwiKTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGhhbmRsZURpc3BsYXlJbWFnZShjdXJyZW50SW5kZXgpIHtcclxuICAgIGltYWdlcy5mb3JFYWNoKChpbWFnZSwgaW5kZXgpID0+IHtcclxuICAgICAgaWYgKGN1cnJlbnRJbmRleCA9PT0gaW5kZXgpIHtcclxuICAgICAgICBpbWFnZS5jbGFzc0xpc3QuYWRkKFwic2hvdy1pbWFnZVwiKSwgaGFuZGxlQWN0aXZhdGVUaHVtYm5haWwoaW5kZXgpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGltYWdlLmNsYXNzTGlzdC5yZW1vdmUoXCJzaG93LWltYWdlXCIpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGhhbmRsZUFjdGl2YXRlVGh1bWJuYWlsKGN1cnJlbnRJbmRleCkge1xyXG4gICAgdGh1bWJuYWlsSW1hZ2VzLmZvckVhY2goKHRodW1ibmFpbCwgaW5kZXgpID0+XHJcbiAgICAgIGN1cnJlbnRJbmRleCA9PT0gaW5kZXhcclxuICAgICAgICA/IHRodW1ibmFpbC5jbGFzc0xpc3QucmVtb3ZlKFwidGh1bWJuYWlsLWRpc2FibGVkXCIpXHJcbiAgICAgICAgOiB0aHVtYm5haWwuY2xhc3NMaXN0LmFkZChcInRodW1ibmFpbC1kaXNhYmxlZFwiKVxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIC8vIGV2ZW50IGxpc3RlbmVycyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgd29ya0J0bnMuZm9yRWFjaCgoYnRuKSA9PiBidG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IGhhbmRsZVdvcmtCdG4oYnRuKSkpO1xyXG5cclxuICB0aHVtYm5haWxJbWFnZXMuZm9yRWFjaCgodGh1bWJuYWlsLCB0aHVtYm5haWxJbmRleCkgPT5cclxuICAgIHRodW1ibmFpbC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICAoaW5kZXggPSB0aHVtYm5haWxJbmRleCksIGhhbmRsZURpc3BsYXlJbWFnZShpbmRleCk7XHJcbiAgICB9KVxyXG4gICk7XHJcblxyXG4gIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZSkgPT4ge1xyXG4gICAgaWYgKFxyXG4gICAgICAoZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwiZ2FsbGVyeVwiKSAmJiBib2R5LmNsYXNzTGlzdC5jb250YWlucyhcImRpc2FibGUtc2Nyb2xsXCIpKSB8fFxyXG4gICAgICBib2R5LmNsYXNzTGlzdC5jb250YWlucyhcImNhcm91c2VsXCIpXHJcbiAgICApIHtcclxuICAgICAgZ2FsbGVyaWVzLmZvckVhY2goKGdhbGxlcnkpID0+IGdhbGxlcnkuY2xhc3NMaXN0LnJlbW92ZShcImRpc3BsYXktZ2FsbGVyeVwiKSk7XHJcbiAgICAgIGJvZHkuY2xhc3NMaXN0LnJlbW92ZShcImRpc2FibGUtc2Nyb2xsXCIpO1xyXG4gICAgICBuYXZEZXNrdG9wLmNsYXNzTGlzdC5yZW1vdmUoXCJuYXYtdHJhbnNpdGlvblwiKTtcclxuICAgICAgaW5kZXggPSAwO1xyXG5cclxuICAgICAgY2Fyb3VzZWxzLmZvckVhY2goKGNhcm91c2VsKSA9PiBjYXJvdXNlbC5maXJzdEVsZW1lbnRDaGlsZC5jbGFzc0xpc3QuYWRkKFwic2hvdy1pbWFnZVwiKSk7XHJcbiAgICB9XHJcbiAgfSk7XHJcblxyXG4gIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tZmFkZUlOIGFuaW0gLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4gIGNvbnN0IG9ic2VydmVyID0gbmV3IEludGVyc2VjdGlvbk9ic2VydmVyKChlbnRyaWVzKSA9PiB7XHJcbiAgICBlbnRyaWVzLmZvckVhY2goKGVudHJ5KSA9PiB7XHJcbiAgICAgIGlmIChlbnRyeS5pc0ludGVyc2VjdGluZykge1xyXG4gICAgICAgIGVudHJ5LnRhcmdldC5jbGFzc0xpc3QuYWRkKFwic2hvd1wiKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gIGNvbnN0IGhpZGRlbkVsZW1lbnRzTGVmdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuaGlkZGVuXCIpO1xyXG4gIGNvbnN0IGhpZGRlbkVsZW1lbnRzUmlnaHQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmhpZGRlbi1yaWdodFwiKTtcclxuICBjb25zdCBoaWRkZW5WYW5pc2hlZEVsZW1lbnRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5oaWRkZW4tdmFuaXNoZWRcIik7XHJcbiAgaGlkZGVuRWxlbWVudHNMZWZ0LmZvckVhY2goKGVsKSA9PiBvYnNlcnZlci5vYnNlcnZlKGVsKSk7XHJcbiAgaGlkZGVuRWxlbWVudHNSaWdodC5mb3JFYWNoKChlbCkgPT4gb2JzZXJ2ZXIub2JzZXJ2ZShlbCkpO1xyXG4gIGhpZGRlblZhbmlzaGVkRWxlbWVudHMuZm9yRWFjaCgoZWwpID0+IG9ic2VydmVyLm9ic2VydmUoZWwpKTtcclxufTtcclxuXHJcbi8vIGZ1bmN0aW9uIGhhbmRsZVN3aXBlVGh1bWJuYWlscyhpY29uLCBpbmRleCkge1xyXG4vLyAgIGwgPSAyO1xyXG5cclxuLy8gICBpZiAoKGljb24uaWQgPT09IFwibGVmdFwiKSA9PT0gbCkge1xyXG4vLyAgICAgdGh1bWJuYWlsc0Nhcm91c2VsLnNjcm9sbCh7XHJcbi8vICAgICAgIHRvcDogMCxcclxuLy8gICAgICAgbGVmdDogLTc4Ljc1LFxyXG4vLyAgICAgICBiZWhhdmlvcjogXCJzbW9vdGhcIixcclxuLy8gICAgIH0pO1xyXG4vLyAgIH0gZWxzZSBpZiAoKGljb24uaWQgPT09IFwicmlnaHRcIiwgaW5kZXggPT09IGwpKSB7XHJcbi8vICAgICB0aHVtYm5haWxzQ2Fyb3VzZWwuc2Nyb2xsKHtcclxuLy8gICAgICAgdG9wOiAwLFxyXG4vLyAgICAgICBsZWZ0OiA3OC43NSxcclxuLy8gICAgICAgYmVoYXZpb3I6IFwic21vb3RoXCIsXHJcbi8vICAgICB9KTtcclxuLy8gICB9XHJcbi8vIH1cclxuIl19
