window.onload=function(){var t=document.querySelector(".body"),o=document.querySelector(".burger"),n=document.querySelectorAll(".burger__bars"),c=document.querySelector(".nav"),r=document.querySelector(".nav-desktop"),e=document.querySelectorAll(".nav-mobile__link"),s=document.querySelector(".arrowup"),i=document.querySelector(".footer__bottom--date"),l=document.querySelectorAll(".section"),a=document.querySelector(".error-msg"),u=document.querySelector(".error-msg-tel"),d=document.querySelector(".email"),m=document.querySelector(".telNum"),f=document.querySelector(".submit"),h=document.querySelector(".msg-status"),y=document.getElementById("cookie-box"),v=document.querySelector(".cookie-box__buttons--accept"),L=document.querySelector(".cookie-box__buttons--reject");v.onclick=function(){document.cookie="CookieBy=salonbeata.eu; max-age=86400",document.cookie?y.classList.add("hide"):alert("Cookie can't be set! Please unblock this site from the cookie setting of your browser.")},L.onclick=function(){alert("Cookies rejected. Some functionality may be limited."),y.classList.add("hide")},-1!==document.cookie.indexOf("CookieBy=GeeksForGeeks")?y.classList.add("hide"):y.classList.remove("hide"),"?mail_status=sent"===document.location.search&&(h.classList.add("succes"),h.textContent="Wiadomość wysłana!"),setTimeout(function(){h.classList.remove("succes")},3e3),"?mail_status=error"===document.location.search&&(h.classList.add("error"),h.textContent="błąd, spróbuj ponownie"),setTimeout(function(){h.classList.remove("error")},3e3);function b(e){e.classList.remove("error-display"),e.textContent=""}function g(e,t){e.classList.add("error-display"),e.textContent=t}var v=(new Date).getFullYear(),w=(i.textContent=v.toString(),window.addEventListener("scroll",function(){var t=window.scrollY;l.forEach(function(e){!e.classList.contains("white-section")&&e.offsetTop<=t+30?n.forEach(function(e){return e.classList.add("white-burger")}):e.classList.contains("white-section")&&e.offsetTop<=t+100&&n.forEach(function(e){return e.classList.remove("white-burger")})}),480<window.scrollY?s.classList.add("active"):s.classList.remove("active")}),o.addEventListener("click",function(){c.classList.toggle("active"),o.classList.toggle("active"),t.classList.toggle("disable-scroll"),e.forEach(function(e){e.addEventListener("click",function(){c.classList.remove("active"),o.classList.remove("active"),t.classList.remove("disable-scroll")})})}),f.addEventListener("click",function(e){e.preventDefault(),/^[\w-\.]+@([\w-]+\.)+[\w-]{2,4}$/.test(d.value)?b(a):g(a,"wpisz poprawny adres email."),/^[0-9\+]{8,13}$/.test(m.value)?b(u):g(u,"wpisz poprawny nr tel.")}),document.querySelectorAll(".carousel")),E=document.querySelectorAll(".carousel-thumbnails"),L=document.querySelectorAll(".work-btn"),S=document.querySelectorAll(".arrow"),q=document.querySelectorAll(".gallery"),k=document.getElementById("haircut"),p=document.getElementById("color"),A=document.getElementById("barber"),x=document.getElementById("style"),C=document.querySelectorAll(".img"),_=document.querySelectorAll(".thumbnail-img");function B(t,o){var n=t;S.forEach(function(e){return e.addEventListener("click",function(){"left"===e.id&&n===t?(n=o+1,n--):"left"===e.id&&t<n?n--:"right"===e.id&&n<o?n++:n=t,T(n),j(n)})})}function I(e){w.forEach(function(e){return e.firstElementChild.classList.add("show-image")}),E.forEach(function(e){return e.firstElementChild.classList.remove("thumbnail-disabled")}),t.classList.add("disable-scroll"),e.classList.add("display-gallery"),r.classList.add("nav-transition")}function T(o){C.forEach(function(e,t){o===t?(e.classList.add("show-image"),j(t)):e.classList.remove("show-image")})}function j(o){_.forEach(function(e,t){return o===t?e.classList.remove("thumbnail-disabled"):e.classList.add("thumbnail-disabled")})}L.forEach(function(t){return t.addEventListener("click",function(){var e;"btn-one"===(e=t).id?(I(k),B(0,3)):"btn-two"===e.id?(I(p),B(4,7)):"btn-three"===e.id?(I(A),B(8,11)):"btn-four"===e.id&&(I(x),B(12,15))})}),_.forEach(function(e,t){return e.addEventListener("click",function(){T(index=t)})}),document.addEventListener("click",function(e){(e.target.classList.contains("gallery")&&t.classList.contains("disable-scroll")||t.classList.contains("carousel"))&&(q.forEach(function(e){return e.classList.remove("display-gallery")}),t.classList.remove("disable-scroll"),r.classList.remove("nav-transition"),index=0,w.forEach(function(e){return e.firstElementChild.classList.add("show-image")}))});var Y=new IntersectionObserver(function(e){e.forEach(function(e){e.isIntersecting&&e.target.classList.add("show")})}),i=document.querySelectorAll(".hidden"),v=document.querySelectorAll(".hidden-right"),f=document.querySelectorAll(".hidden-vanished");i.forEach(function(e){return Y.observe(e)}),v.forEach(function(e){return Y.observe(e)}),f.forEach(function(e){return Y.observe(e)})};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsid2luZG93Iiwib25sb2FkIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiYnVyZ2VyIiwiYm9keSIsImFsbEJ1cmdlckJhcnMiLCJxdWVyeVNlbGVjdG9yQWxsIiwibmF2TW9iaWxlIiwibmF2RGVza3RvcCIsImFycm93VXAiLCJmb290ZXJEYXRlIiwiYWxsU2VjdGlvbnMiLCJlcnJvck1zZyIsImVycm9yTXNnVGVsIiwiZW1haWwiLCJ0ZWxOdW0iLCJtc2dTdGF0dXMiLCJjb25zZW50Qm94IiwiZ2V0RWxlbWVudEJ5SWQiLCJhY2NlcHRCdG4iLCJyZWplY3RCdG4iLCJvbmNsaWNrIiwiY29va2llIiwiY2xhc3NMaXN0IiwiYWRkIiwiYWxlcnQiLCJ0ZXh0Q29udGVudCIsImluZGV4T2YiLCJyZW1vdmUiLCJsb2NhdGlvbiIsInNlYXJjaCIsInNldFRpbWVvdXQiLCJjdXJyZW50RGF0ZSIsIkRhdGUiLCJjdXJyZW50WWVhciIsImhhbmRsZUZvb3RlclllYXIiLCJjbGVhckVycm9yIiwiZWwiLCJmb3JtQm94IiwidGh1bWJuYWlsc0Nhcm91c2VscyIsIndvcmtCdG5zIiwiaGFpcmN1dEdhbGxlcnkiLCJpbnB1dCIsImJhcmJlckdhbGxlcnkiLCJzdHlsZUdhbGxlcnkiLCJnZXRGdWxsWWVhciIsImhhbmRsZUFycm93QWN0aW9uIiwiYWxsTmF2TGlua3MiLCJ0b1N0cmluZyIsImhhbmRsZUFycm93VXAiLCJzY3JvbGxZIiwiYWRkRXZlbnRMaXN0ZW5lciIsInNlY3Rpb24iLCJjb250YWlucyIsIm9mZnNldFRvcCIsImN1cnJlbnRTZWN0aW9uIiwiY2hlY2tUZWxOdW0iLCJmb3JFYWNoIiwidmFsaWROdW0iLCJzaG93RXJyb3IiLCJiYXIiLCJ0b2dnbGUiLCJsaW5rIiwiaGFuZGxlT2JzZXJ2ZXIiLCJzdWJtaXRCdG4iLCJpZCIsImUiLCJwcmV2ZW50RGVmYXVsdCIsImVuZEluZGV4IiwidmFsdWUiLCJjaGVja01haWwiLCJoYW5kbGVEaXNwbGF5R2FsbGVyeSIsInN0YXJ0SW5kZXgiLCJjb2xvckdhbGxlcnkiLCJpbWFnZXMiLCJ0aHVtYm5haWxJbWFnZXMiLCJpbmRleCIsImdhbGxlcnlUeXBlIiwiaWNvbiIsImhhbmRsZURpc3BsYXlJbWFnZSIsImN1cnJlbnRJbmRleCIsImltYWdlIiwiaGFuZGxlQWN0aXZhdGVUaHVtYm5haWwiLCJjYXJvdXNlbCIsImJ0biIsImZpcnN0RWxlbWVudENoaWxkIiwiaGFuZGxlV29ya0J0biIsInRodW1ibmFpbEluZGV4IiwidGh1bWJuYWlsIiwidGFyZ2V0IiwiZ2FsbGVyaWVzIiwiZ2FsbGVyeSIsImVudHJ5IiwiaXNJbnRlcnNlY3RpbmciLCJhcnJvd0ljb25zIiwiY2Fyb3VzZWxzIiwiaGlkZGVuRWxlbWVudHNMZWZ0IiwiaGlkZGVuRWxlbWVudHNSaWdodCIsImhpZGRlblZhbmlzaGVkRWxlbWVudHMiLCJvYnNlcnZlciIsIkludGVyc2VjdGlvbk9ic2VydmVyIiwiZW50cmllcyIsIm9ic2VydmUiXSwibWFwcGluZ3MiOiJBQUFBQSxPQUFPQyxPQUFTLFdBQWhCRCxJQUFPQyxFQUFNQyxTQUFHQyxjQUFZLE9BQUEsRUFDMUJDLEVBQUFGLFNBQUFDLGNBQUEsU0FBQSxFQUNNRSxFQUFnQkYsU0FBQUEsaUJBQXNCLGVBQUEsRUFDdENDLEVBQVNGLFNBQVNDLGNBQWMsTUFBVSxFQUMxQ0csRUFBYUosU0FBV0MsY0FBQ0ksY0FBaUIsRUFDMUNDLEVBQVlOLFNBQVNDLGlCQUFxQixtQkFBQSxFQUMxQ00sRUFBVVAsU0FBV0MsY0FBYyxVQUFDLEVBRXBDTyxFQUFVUixTQUFTQyxjQUFjLHVCQUFXLEVBRTVDUSxFQUFhVCxTQUFTQyxpQkFBYyxVQUFBLEVBQ3BDUyxFQUFXVixTQUFXQyxjQUFDSSxZQUFpQixFQUN4Q00sRUFBV1gsU0FBU0MsY0FBYyxnQkFBYSxFQUMvQ1csRUFBQUEsU0FBY1osY0FBU0MsUUFBYyxFQUNyQ1ksRUFBUWIsU0FBU0MsY0FBYyxTQUFTLEVBQ3hDYSxFQUFT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cmNlc0NvbnRlbnQiOlsid2luZG93Lm9ubG9hZCA9IGZ1bmN0aW9uICgpIHtcclxuICAvL3NlbGVjdG9yc1xyXG4gIGNvbnN0IGJvZHkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmJvZHlcIik7XHJcbiAgY29uc3QgYnVyZ2VyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5idXJnZXJcIik7XHJcbiAgY29uc3QgYWxsQnVyZ2VyQmFycyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuYnVyZ2VyX19iYXJzXCIpO1xyXG4gIGNvbnN0IG5hdk1vYmlsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubmF2XCIpO1xyXG4gIGNvbnN0IG5hdkRlc2t0b3AgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm5hdi1kZXNrdG9wXCIpO1xyXG4gIGNvbnN0IGFsbE5hdkxpbmtzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5uYXYtbW9iaWxlX19saW5rXCIpO1xyXG4gIGNvbnN0IGFycm93VXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmFycm93dXBcIik7XHJcblxyXG4gIGNvbnN0IGZvb3RlckRhdGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmZvb3Rlcl9fYm90dG9tLS1kYXRlXCIpO1xyXG4gIGNvbnN0IGFsbFNlY3Rpb25zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5zZWN0aW9uXCIpO1xyXG4gIGNvbnN0IGVycm9yTXNnID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5lcnJvci1tc2dcIik7XHJcbiAgY29uc3QgZXJyb3JNc2dUZWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmVycm9yLW1zZy10ZWxcIik7XHJcbiAgY29uc3QgZW1haWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmVtYWlsXCIpO1xyXG4gIGNvbnN0IHRlbE51bSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudGVsTnVtXCIpO1xyXG4gIGNvbnN0IHN1Ym1pdEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuc3VibWl0XCIpO1xyXG5cclxuICBjb25zdCBtc2dTdGF0dXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1zZy1zdGF0dXNcIik7XHJcblxyXG4gIC8vY29va2llQWxlcnRcclxuXHJcbiAgY29uc3QgY29uc2VudEJveCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY29va2llLWJveFwiKTtcclxuICBjb25zdCBhY2NlcHRCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNvb2tpZS1ib3hfX2J1dHRvbnMtLWFjY2VwdFwiKTtcclxuICBjb25zdCByZWplY3RCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNvb2tpZS1ib3hfX2J1dHRvbnMtLXJlamVjdFwiKTtcclxuXHJcbiAgYWNjZXB0QnRuLm9uY2xpY2sgPSAoKSA9PiB7XHJcbiAgICBkb2N1bWVudC5jb29raWUgPSBcIkNvb2tpZUJ5PXNhbG9uYmVhdGEuZXU7IG1heC1hZ2U9XCIgKyA2MCAqIDYwICogMjQ7XHJcbiAgICBpZiAoZG9jdW1lbnQuY29va2llKSB7XHJcbiAgICAgIGNvbnNlbnRCb3guY2xhc3NMaXN0LmFkZChcImhpZGVcIik7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBhbGVydChcclxuICAgICAgICBcIkNvb2tpZSBjYW4ndCBiZSBzZXQhIFBsZWFzZVwiICtcclxuICAgICAgICAgIFwiIHVuYmxvY2sgdGhpcyBzaXRlIGZyb20gdGhlIGNvb2tpZVwiICtcclxuICAgICAgICAgIFwiIHNldHRpbmcgb2YgeW91ciBicm93c2VyLlwiXHJcbiAgICAgICk7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgcmVqZWN0QnRuLm9uY2xpY2sgPSAoKSA9PiB7XHJcbiAgICBhbGVydChcIkNvb2tpZXMgcmVqZWN0ZWQuIFNvbWUgZnVuY3Rpb25hbGl0eSBtYXkgYmUgbGltaXRlZC5cIik7XHJcbiAgICBjb25zZW50Qm94LmNsYXNzTGlzdC5hZGQoXCJoaWRlXCIpO1xyXG4gIH07XHJcblxyXG4gIGxldCBjaGVja0Nvb2tpZSA9IGRvY3VtZW50LmNvb2tpZS5pbmRleE9mKFwiQ29va2llQnk9R2Vla3NGb3JHZWVrc1wiKTtcclxuICBjaGVja0Nvb2tpZSAhPT0gLTEgPyBjb25zZW50Qm94LmNsYXNzTGlzdC5hZGQoXCJoaWRlXCIpIDogY29uc2VudEJveC5jbGFzc0xpc3QucmVtb3ZlKFwiaGlkZVwiKTtcclxuXHJcbiAgLy9zZW5kIG1haWxcclxuXHJcbiAgaWYgKGRvY3VtZW50LmxvY2F0aW9uLnNlYXJjaCA9PT0gXCI/bWFpbF9zdGF0dXM9c2VudFwiKSB7XHJcbiAgICBtc2dTdGF0dXMuY2xhc3NMaXN0LmFkZChcInN1Y2Nlc1wiKTtcclxuICAgIG1zZ1N0YXR1cy50ZXh0Q29udGVudCA9IFwiV2lhZG9tb8WbxIcgd3lzxYJhbmEhXCI7XHJcbiAgfVxyXG4gIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgbXNnU3RhdHVzLmNsYXNzTGlzdC5yZW1vdmUoXCJzdWNjZXNcIik7XHJcbiAgfSwgMzAwMCk7XHJcblxyXG4gIGlmIChkb2N1bWVudC5sb2NhdGlvbi5zZWFyY2ggPT09IFwiP21haWxfc3RhdHVzPWVycm9yXCIpIHtcclxuICAgIG1zZ1N0YXR1cy5jbGFzc0xpc3QuYWRkKFwiZXJyb3JcIik7XHJcbiAgICBtc2dTdGF0dXMudGV4dENvbnRlbnQgPSBcImLFgsSFZCwgc3Byw7NidWogcG9ub3duaWVcIjtcclxuICB9XHJcbiAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICBtc2dTdGF0dXMuY2xhc3NMaXN0LnJlbW92ZShcImVycm9yXCIpO1xyXG4gIH0sIDMwMDApO1xyXG5cclxuICAvLyBmb290ZXJcclxuICBjb25zdCBjdXJyZW50RGF0ZSA9IG5ldyBEYXRlKCk7XHJcbiAgY29uc3QgY3VycmVudFllYXIgPSBjdXJyZW50RGF0ZS5nZXRGdWxsWWVhcigpO1xyXG5cclxuICBjb25zdCBoYW5kbGVGb290ZXJZZWFyID0gKCkgPT4ge1xyXG4gICAgZm9vdGVyRGF0ZS50ZXh0Q29udGVudCA9IGN1cnJlbnRZZWFyLnRvU3RyaW5nKCk7XHJcbiAgfTtcclxuXHJcbiAgaGFuZGxlRm9vdGVyWWVhcigpO1xyXG4gIC8vIE5BVlxyXG5cclxuICBjb25zdCBoYW5kbGVOYXYgPSAoKSA9PiB7XHJcbiAgICBuYXZNb2JpbGUuY2xhc3NMaXN0LnRvZ2dsZShcImFjdGl2ZVwiKTtcclxuICAgIGJ1cmdlci5jbGFzc0xpc3QudG9nZ2xlKFwiYWN0aXZlXCIpO1xyXG4gICAgYm9keS5jbGFzc0xpc3QudG9nZ2xlKFwiZGlzYWJsZS1zY3JvbGxcIik7XHJcblxyXG4gICAgYWxsTmF2TGlua3MuZm9yRWFjaCgobGluaykgPT4ge1xyXG4gICAgICBsaW5rLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgICAgbmF2TW9iaWxlLmNsYXNzTGlzdC5yZW1vdmUoXCJhY3RpdmVcIik7XHJcbiAgICAgICAgYnVyZ2VyLmNsYXNzTGlzdC5yZW1vdmUoXCJhY3RpdmVcIik7XHJcbiAgICAgICAgYm9keS5jbGFzc0xpc3QucmVtb3ZlKFwiZGlzYWJsZS1zY3JvbGxcIik7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfTtcclxuICBjb25zdCBoYW5kbGVBcnJvd1VwID0gKCkgPT4ge1xyXG4gICAgY29uc3QgY3VycmVudFNlY3Rpb24gPSB3aW5kb3cuc2Nyb2xsWTtcclxuICAgIGlmIChjdXJyZW50U2VjdGlvbiA+IDQ4MCkge1xyXG4gICAgICBhcnJvd1VwLmNsYXNzTGlzdC5hZGQoXCJhY3RpdmVcIik7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBhcnJvd1VwLmNsYXNzTGlzdC5yZW1vdmUoXCJhY3RpdmVcIik7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgY29uc3QgaGFuZGxlT2JzZXJ2ZXIgPSAoKSA9PiB7XHJcbiAgICBjb25zdCBjdXJyZW50U2VjdGlvbiA9IHdpbmRvdy5zY3JvbGxZO1xyXG5cclxuICAgIGFsbFNlY3Rpb25zLmZvckVhY2goKHNlY3Rpb24pID0+IHtcclxuICAgICAgaWYgKFxyXG4gICAgICAgICFzZWN0aW9uLmNsYXNzTGlzdC5jb250YWlucyhcIndoaXRlLXNlY3Rpb25cIikgJiZcclxuICAgICAgICBzZWN0aW9uLm9mZnNldFRvcCA8PSBjdXJyZW50U2VjdGlvbiArIDMwXHJcbiAgICAgICkge1xyXG4gICAgICAgIGFsbEJ1cmdlckJhcnMuZm9yRWFjaCgoYmFyKSA9PiBiYXIuY2xhc3NMaXN0LmFkZChcIndoaXRlLWJ1cmdlclwiKSk7XHJcbiAgICAgIH0gZWxzZSBpZiAoXHJcbiAgICAgICAgc2VjdGlvbi5jbGFzc0xpc3QuY29udGFpbnMoXCJ3aGl0ZS1zZWN0aW9uXCIpICYmXHJcbiAgICAgICAgc2VjdGlvbi5vZmZzZXRUb3AgPD0gY3VycmVudFNlY3Rpb24gKyAxMDBcclxuICAgICAgKSB7XHJcbiAgICAgICAgYWxsQnVyZ2VyQmFycy5mb3JFYWNoKChiYXIpID0+IGJhci5jbGFzc0xpc3QucmVtb3ZlKFwid2hpdGUtYnVyZ2VyXCIpKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICBoYW5kbGVBcnJvd1VwKCk7XHJcbiAgfTtcclxuXHJcbiAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJzY3JvbGxcIiwgaGFuZGxlT2JzZXJ2ZXIpO1xyXG4gIGJ1cmdlci5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgaGFuZGxlTmF2KTtcclxuXHJcbiAgLy8gZm9ybSB2YWxpZGF0b3JcclxuXHJcbiAgY29uc3QgY2hlY2tUZWxOdW0gPSAodGVsTnVtKSA9PiB7XHJcbiAgICBjb25zdCB2YWxpZE51bSA9IC9eWzAtOVxcK117OCwxM30kLztcclxuXHJcbiAgICBpZiAodmFsaWROdW0udGVzdCh0ZWxOdW0udmFsdWUpKSB7XHJcbiAgICAgIGNsZWFyRXJyb3IoZXJyb3JNc2dUZWwpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgc2hvd0Vycm9yKGVycm9yTXNnVGVsLCBcIndwaXN6IHBvcHJhd255IG5yIHRlbC5cIik7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgY29uc3QgY2hlY2tNYWlsID0gKGVtYWlsKSA9PiB7XHJcbiAgICBjb25zdCB2YWxpZE1haWwgPSAvXltcXHctXFwuXStAKFtcXHctXStcXC4pK1tcXHctXXsyLDR9JC87XHJcblxyXG4gICAgaWYgKHZhbGlkTWFpbC50ZXN0KGVtYWlsLnZhbHVlKSkge1xyXG4gICAgICBjbGVhckVycm9yKGVycm9yTXNnKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHNob3dFcnJvcihlcnJvck1zZywgXCJ3cGlzeiBwb3ByYXdueSBhZHJlcyBlbWFpbC5cIik7XHJcbiAgICB9XHJcbiAgfTtcclxuICBjb25zdCBjbGVhckVycm9yID0gKGVsKSA9PiB7XHJcbiAgICBjb25zdCBmb3JtQm94ID0gZWw7XHJcbiAgICBmb3JtQm94LmNsYXNzTGlzdC5yZW1vdmUoXCJlcnJvci1kaXNwbGF5XCIpO1xyXG4gICAgZm9ybUJveC50ZXh0Q29udGVudCA9IFwiXCI7XHJcbiAgfTtcclxuXHJcbiAgY29uc3Qgc2hvd0Vycm9yID0gKGlucHV0LCBtc2cpID0+IHtcclxuICAgIGNvbnN0IGZvcm1Cb3ggPSBpbnB1dDtcclxuICAgIGZvcm1Cb3guY2xhc3NMaXN0LmFkZChcImVycm9yLWRpc3BsYXlcIik7XHJcbiAgICBmb3JtQm94LnRleHRDb250ZW50ID0gbXNnO1xyXG4gIH07XHJcblxyXG4gIC8vIGV2ZW50IGxpc3RlbmVyc1xyXG4gIHN1Ym1pdEJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpID0+IHtcclxuICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgIGNoZWNrTWFpbChlbWFpbCk7XHJcbiAgICBjaGVja1RlbE51bSh0ZWxOdW0pO1xyXG4gIH0pO1xyXG5cclxuICAvLyAtLS0tLS0tLS0tLS0tIEdBTExFUlkgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbiAgY29uc3QgY2Fyb3VzZWxzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5jYXJvdXNlbFwiKTtcclxuICBjb25zdCB0aHVtYm5haWxzQ2Fyb3VzZWxzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5jYXJvdXNlbC10aHVtYm5haWxzXCIpO1xyXG4gIGNvbnN0IHdvcmtCdG5zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi53b3JrLWJ0blwiKTtcclxuXHJcbiAgY29uc3QgYXJyb3dJY29ucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuYXJyb3dcIik7XHJcbiAgY29uc3QgZ2FsbGVyaWVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5nYWxsZXJ5XCIpO1xyXG4gIGNvbnN0IGhhaXJjdXRHYWxsZXJ5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJoYWlyY3V0XCIpO1xyXG4gIGNvbnN0IGNvbG9yR2FsbGVyeSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY29sb3JcIik7XHJcbiAgY29uc3QgYmFyYmVyR2FsbGVyeSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYmFyYmVyXCIpO1xyXG4gIGNvbnN0IHN0eWxlR2FsbGVyeSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic3R5bGVcIik7XHJcblxyXG4gIGNvbnN0IGltYWdlcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuaW1nXCIpO1xyXG4gIGNvbnN0IHRodW1ibmFpbEltYWdlcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIudGh1bWJuYWlsLWltZ1wiKTtcclxuXHJcbiAgZnVuY3Rpb24gaGFuZGxlV29ya0J0bihidG4pIHtcclxuICAgIGlmIChidG4uaWQgPT09IFwiYnRuLW9uZVwiKSB7XHJcbiAgICAgIGxldCBzdGFydEluZGV4ID0gMDtcclxuICAgICAgbGV0IGVuZEluZGV4ID0gMztcclxuXHJcbiAgICAgIGhhbmRsZURpc3BsYXlHYWxsZXJ5KGhhaXJjdXRHYWxsZXJ5KSwgaGFuZGxlQXJyb3dBY3Rpb24oc3RhcnRJbmRleCwgZW5kSW5kZXgpO1xyXG4gICAgfSBlbHNlIGlmIChidG4uaWQgPT09IFwiYnRuLXR3b1wiKSB7XHJcbiAgICAgIGxldCBzdGFydEluZGV4ID0gNDtcclxuICAgICAgbGV0IGVuZEluZGV4ID0gNztcclxuICAgICAgaGFuZGxlRGlzcGxheUdhbGxlcnkoY29sb3JHYWxsZXJ5KTtcclxuICAgICAgaGFuZGxlQXJyb3dBY3Rpb24oc3RhcnRJbmRleCwgZW5kSW5kZXgpO1xyXG4gICAgfSBlbHNlIGlmIChidG4uaWQgPT09IFwiYnRuLXRocmVlXCIpIHtcclxuICAgICAgbGV0IHN0YXJ0SW5kZXggPSA4O1xyXG4gICAgICBsZXQgZW5kSW5kZXggPSAxMTtcclxuICAgICAgaGFuZGxlRGlzcGxheUdhbGxlcnkoYmFyYmVyR2FsbGVyeSk7XHJcbiAgICAgIGhhbmRsZUFycm93QWN0aW9uKHN0YXJ0SW5kZXgsIGVuZEluZGV4KTtcclxuICAgIH0gZWxzZSBpZiAoYnRuLmlkID09PSBcImJ0bi1mb3VyXCIpIHtcclxuICAgICAgbGV0IHN0YXJ0SW5kZXggPSAxMjtcclxuICAgICAgbGV0IGVuZEluZGV4ID0gMTU7XHJcbiAgICAgIGhhbmRsZURpc3BsYXlHYWxsZXJ5KHN0eWxlR2FsbGVyeSk7XHJcbiAgICAgIGhhbmRsZUFycm93QWN0aW9uKHN0YXJ0SW5kZXgsIGVuZEluZGV4KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGhhbmRsZUFycm93QWN0aW9uKHN0YXJ0SW5kZXgsIGVuZEluZGV4KSB7XHJcbiAgICBsZXQgaW5kZXggPSBzdGFydEluZGV4O1xyXG4gICAgYXJyb3dJY29ucy5mb3JFYWNoKChpY29uKSA9PlxyXG4gICAgICBpY29uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgICAgaWYgKGljb24uaWQgPT09IFwibGVmdFwiICYmIGluZGV4ID09PSBzdGFydEluZGV4KSB7XHJcbiAgICAgICAgICBpbmRleCA9IGVuZEluZGV4ICsgMTtcclxuICAgICAgICAgIGluZGV4LS07XHJcbiAgICAgICAgfSBlbHNlIGlmIChpY29uLmlkID09PSBcImxlZnRcIiAmJiBpbmRleCA+IHN0YXJ0SW5kZXgpIHtcclxuICAgICAgICAgIGluZGV4LS07XHJcbiAgICAgICAgfSBlbHNlIGlmIChpY29uLmlkID09PSBcInJpZ2h0XCIgJiYgaW5kZXggPCBlbmRJbmRleCkge1xyXG4gICAgICAgICAgaW5kZXgrKztcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgaW5kZXggPSBzdGFydEluZGV4O1xyXG4gICAgICAgIH1cclxuICAgICAgICBoYW5kbGVEaXNwbGF5SW1hZ2UoaW5kZXgpO1xyXG4gICAgICAgIGhhbmRsZUFjdGl2YXRlVGh1bWJuYWlsKGluZGV4KTtcclxuICAgICAgfSlcclxuICAgICk7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBoYW5kbGVEaXNwbGF5R2FsbGVyeShnYWxsZXJ5VHlwZSkge1xyXG4gICAgY2Fyb3VzZWxzLmZvckVhY2goKGNhcm91c2VsKSA9PiBjYXJvdXNlbC5maXJzdEVsZW1lbnRDaGlsZC5jbGFzc0xpc3QuYWRkKFwic2hvdy1pbWFnZVwiKSk7XHJcbiAgICB0aHVtYm5haWxzQ2Fyb3VzZWxzLmZvckVhY2goKGNhcm91c2VsKSA9PlxyXG4gICAgICBjYXJvdXNlbC5maXJzdEVsZW1lbnRDaGlsZC5jbGFzc0xpc3QucmVtb3ZlKFwidGh1bWJuYWlsLWRpc2FibGVkXCIpXHJcbiAgICApO1xyXG4gICAgYm9keS5jbGFzc0xpc3QuYWRkKFwiZGlzYWJsZS1zY3JvbGxcIik7XHJcbiAgICBnYWxsZXJ5VHlwZS5jbGFzc0xpc3QuYWRkKFwiZGlzcGxheS1nYWxsZXJ5XCIpO1xyXG4gICAgbmF2RGVza3RvcC5jbGFzc0xpc3QuYWRkKFwibmF2LXRyYW5zaXRpb25cIik7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBoYW5kbGVEaXNwbGF5SW1hZ2UoY3VycmVudEluZGV4KSB7XHJcbiAgICBpbWFnZXMuZm9yRWFjaCgoaW1hZ2UsIGluZGV4KSA9PiB7XHJcbiAgICAgIGlmIChjdXJyZW50SW5kZXggPT09IGluZGV4KSB7XHJcbiAgICAgICAgaW1hZ2UuY2xhc3NMaXN0LmFkZChcInNob3ctaW1hZ2VcIiksIGhhbmRsZUFjdGl2YXRlVGh1bWJuYWlsKGluZGV4KTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBpbWFnZS5jbGFzc0xpc3QucmVtb3ZlKFwic2hvdy1pbWFnZVwiKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBoYW5kbGVBY3RpdmF0ZVRodW1ibmFpbChjdXJyZW50SW5kZXgpIHtcclxuICAgIHRodW1ibmFpbEltYWdlcy5mb3JFYWNoKCh0aHVtYm5haWwsIGluZGV4KSA9PlxyXG4gICAgICBjdXJyZW50SW5kZXggPT09IGluZGV4XHJcbiAgICAgICAgPyB0aHVtYm5haWwuY2xhc3NMaXN0LnJlbW92ZShcInRodW1ibmFpbC1kaXNhYmxlZFwiKVxyXG4gICAgICAgIDogdGh1bWJuYWlsLmNsYXNzTGlzdC5hZGQoXCJ0aHVtYm5haWwtZGlzYWJsZWRcIilcclxuICAgICk7XHJcbiAgfVxyXG5cclxuICAvLyBldmVudCBsaXN0ZW5lcnMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gIHdvcmtCdG5zLmZvckVhY2goKGJ0bikgPT4gYnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiBoYW5kbGVXb3JrQnRuKGJ0bikpKTtcclxuXHJcbiAgdGh1bWJuYWlsSW1hZ2VzLmZvckVhY2goKHRodW1ibmFpbCwgdGh1bWJuYWlsSW5kZXgpID0+XHJcbiAgICB0aHVtYm5haWwuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgKGluZGV4ID0gdGh1bWJuYWlsSW5kZXgpLCBoYW5kbGVEaXNwbGF5SW1hZ2UoaW5kZXgpO1xyXG4gICAgfSlcclxuICApO1xyXG5cclxuICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpID0+IHtcclxuICAgIGlmIChcclxuICAgICAgKGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcImdhbGxlcnlcIikgJiYgYm9keS5jbGFzc0xpc3QuY29udGFpbnMoXCJkaXNhYmxlLXNjcm9sbFwiKSkgfHxcclxuICAgICAgYm9keS5jbGFzc0xpc3QuY29udGFpbnMoXCJjYXJvdXNlbFwiKVxyXG4gICAgKSB7XHJcbiAgICAgIGdhbGxlcmllcy5mb3JFYWNoKChnYWxsZXJ5KSA9PiBnYWxsZXJ5LmNsYXNzTGlzdC5yZW1vdmUoXCJkaXNwbGF5LWdhbGxlcnlcIikpO1xyXG4gICAgICBib2R5LmNsYXNzTGlzdC5yZW1vdmUoXCJkaXNhYmxlLXNjcm9sbFwiKTtcclxuICAgICAgbmF2RGVza3RvcC5jbGFzc0xpc3QucmVtb3ZlKFwibmF2LXRyYW5zaXRpb25cIik7XHJcbiAgICAgIGluZGV4ID0gMDtcclxuXHJcbiAgICAgIGNhcm91c2Vscy5mb3JFYWNoKChjYXJvdXNlbCkgPT4gY2Fyb3VzZWwuZmlyc3RFbGVtZW50Q2hpbGQuY2xhc3NMaXN0LmFkZChcInNob3ctaW1hZ2VcIikpO1xyXG4gICAgfVxyXG4gIH0pO1xyXG5cclxuICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLWZhZGVJTiBhbmltIC0tLS0tLS0tLS0tLS0tLVxyXG5cclxuICBjb25zdCBvYnNlcnZlciA9IG5ldyBJbnRlcnNlY3Rpb25PYnNlcnZlcigoZW50cmllcykgPT4ge1xyXG4gICAgZW50cmllcy5mb3JFYWNoKChlbnRyeSkgPT4ge1xyXG4gICAgICBpZiAoZW50cnkuaXNJbnRlcnNlY3RpbmcpIHtcclxuICAgICAgICBlbnRyeS50YXJnZXQuY2xhc3NMaXN0LmFkZChcInNob3dcIik7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICBjb25zdCBoaWRkZW5FbGVtZW50c0xlZnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmhpZGRlblwiKTtcclxuICBjb25zdCBoaWRkZW5FbGVtZW50c1JpZ2h0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5oaWRkZW4tcmlnaHRcIik7XHJcbiAgY29uc3QgaGlkZGVuVmFuaXNoZWRFbGVtZW50cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuaGlkZGVuLXZhbmlzaGVkXCIpO1xyXG4gIGhpZGRlbkVsZW1lbnRzTGVmdC5mb3JFYWNoKChlbCkgPT4gb2JzZXJ2ZXIub2JzZXJ2ZShlbCkpO1xyXG4gIGhpZGRlbkVsZW1lbnRzUmlnaHQuZm9yRWFjaCgoZWwpID0+IG9ic2VydmVyLm9ic2VydmUoZWwpKTtcclxuICBoaWRkZW5WYW5pc2hlZEVsZW1lbnRzLmZvckVhY2goKGVsKSA9PiBvYnNlcnZlci5vYnNlcnZlKGVsKSk7XHJcbn07XHJcblxyXG4vLyBmdW5jdGlvbiBoYW5kbGVTd2lwZVRodW1ibmFpbHMoaWNvbiwgaW5kZXgpIHtcclxuLy8gICBsID0gMjtcclxuXHJcbi8vICAgaWYgKChpY29uLmlkID09PSBcImxlZnRcIikgPT09IGwpIHtcclxuLy8gICAgIHRodW1ibmFpbHNDYXJvdXNlbC5zY3JvbGwoe1xyXG4vLyAgICAgICB0b3A6IDAsXHJcbi8vICAgICAgIGxlZnQ6IC03OC43NSxcclxuLy8gICAgICAgYmVoYXZpb3I6IFwic21vb3RoXCIsXHJcbi8vICAgICB9KTtcclxuLy8gICB9IGVsc2UgaWYgKChpY29uLmlkID09PSBcInJpZ2h0XCIsIGluZGV4ID09PSBsKSkge1xyXG4vLyAgICAgdGh1bWJuYWlsc0Nhcm91c2VsLnNjcm9sbCh7XHJcbi8vICAgICAgIHRvcDogMCxcclxuLy8gICAgICAgbGVmdDogNzguNzUsXHJcbi8vICAgICAgIGJlaGF2aW9yOiBcInNtb290aFwiLFxyXG4vLyAgICAgfSk7XHJcbi8vICAgfVxyXG4vLyB9XHJcbiJdfQ==
