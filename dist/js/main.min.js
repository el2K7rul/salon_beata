window.onload=function(){var t=document.querySelector(".body"),o=document.querySelector(".burger"),n=document.querySelectorAll(".burger__bars"),c=document.querySelector(".nav"),r=document.querySelector(".nav-desktop"),e=document.querySelectorAll(".nav-mobile__link"),s=document.querySelector(".arrowup"),i=document.querySelector(".footer__bottom--date"),l=document.querySelectorAll(".section"),a=document.querySelector(".error-msg"),u=document.querySelector(".error-msg-tel"),d=document.querySelector(".email"),m=document.querySelector(".telNum"),f=document.querySelector(".submit"),h=document.querySelector(".msg-status"),y=document.querySelector(".cookie-box"),v=document.querySelector(".cookie-box__buttons--accept"),L=document.querySelector(".cookie-box__buttons--reject");v.onclick=function(){document.cookie="CookieBy=salonbeata.eu; max-age=86400",document.cookie?y.classList.add(".hide")&&alert("Nie można ustawić plików cookie! odblokuj ustawienia plików cookie w przeglądarce by strona działała poprawnie."):y.classList.remove("hide")},L.onclick=function(){alert("Pliki Cookies odrzucone. Funkcjonalność strony może zostać ograniczona."),y.classList.add("hide")};function b(e){e.classList.remove("error-display"),e.textContent=""}function w(e,t){e.classList.add("error-display"),e.textContent=t}-1!==document.cookie.indexOf("CookieBy=salonbeata.eu")?y.classList.add("hide"):y.classList.remove("hide"),"?mail_status=sent"===document.location.search&&(h.classList.add("succes"),h.textContent="Wiadomość wysłana!"),setTimeout(function(){h.classList.remove("succes")},3e3),"?mail_status=error"===document.location.search&&(h.classList.add("error"),h.textContent="błąd, spróbuj ponownie"),setTimeout(function(){h.classList.remove("error")},3e3);f.addEventListener("click",function(e){/^[\w-\.]+@([\w-]+\.)+[\w-]{2,4}$/.test(d.value)?b(a):w(a,"wpisz poprawny adres email."),/^[0-9\+]{8,13}$/.test(m.value)?b(u):w(u,"wpisz poprawny nr tel.")});var v=(new Date).getFullYear(),g=(i.textContent=v.toString(),window.addEventListener("scroll",function(){var t=window.scrollY;l.forEach(function(e){!e.classList.contains("white-section")&&e.offsetTop<=t+30?n.forEach(function(e){return e.classList.add("white-burger")}):e.classList.contains("white-section")&&e.offsetTop<=t+100&&n.forEach(function(e){return e.classList.remove("white-burger")})}),480<window.scrollY?s.classList.add("active"):s.classList.remove("active")}),o.addEventListener("click",function(){c.classList.toggle("active"),o.classList.toggle("active"),t.classList.toggle("disable-scroll"),e.forEach(function(e){e.addEventListener("click",function(){c.classList.remove("active"),o.classList.remove("active"),t.classList.remove("disable-scroll")})})}),document.querySelectorAll(".carousel")),E=document.querySelectorAll(".carousel-thumbnails"),L=document.querySelectorAll(".work-btn"),S=document.querySelectorAll(".arrow"),k=document.querySelectorAll(".gallery"),q=document.getElementById("haircut"),p=document.getElementById("color"),A=document.getElementById("barber"),x=document.getElementById("style"),_=document.querySelectorAll(".img"),C=document.querySelectorAll(".thumbnail-img");function z(t,o){var n=t;S.forEach(function(e){return e.addEventListener("click",function(){"left"===e.id&&n===t?(n=o+1,n--):"left"===e.id&&t<n?n--:"right"===e.id&&n<o?n++:n=t,I(n),j(n)})})}function B(e){g.forEach(function(e){return e.firstElementChild.classList.add("show-image")}),E.forEach(function(e){return e.firstElementChild.classList.remove("thumbnail-disabled")}),t.classList.add("disable-scroll"),e.classList.add("display-gallery"),r.classList.add("nav-transition")}function I(o){_.forEach(function(e,t){o===t?(e.classList.add("show-image"),j(t)):e.classList.remove("show-image")})}function j(o){C.forEach(function(e,t){return o===t?e.classList.remove("thumbnail-disabled"):e.classList.add("thumbnail-disabled")})}L.forEach(function(t){return t.addEventListener("click",function(){var e;"btn-one"===(e=t).id?(B(q),z(0,3)):"btn-two"===e.id?(B(p),z(4,7)):"btn-three"===e.id?(B(A),z(8,11)):"btn-four"===e.id&&(B(x),z(12,15))})}),C.forEach(function(e,t){return e.addEventListener("click",function(){I(index=t)})}),document.addEventListener("click",function(e){(e.target.classList.contains("gallery")&&t.classList.contains("disable-scroll")||t.classList.contains("carousel"))&&(k.forEach(function(e){return e.classList.remove("display-gallery")}),t.classList.remove("disable-scroll"),r.classList.remove("nav-transition"),index=0,g.forEach(function(e){return e.firstElementChild.classList.add("show-image")}))});var T=new IntersectionObserver(function(e){e.forEach(function(e){e.isIntersecting&&e.target.classList.add("show")})}),f=document.querySelectorAll(".hidden"),i=document.querySelectorAll(".hidden-right"),v=document.querySelectorAll(".hidden-vanished");f.forEach(function(e){return T.observe(e)}),i.forEach(function(e){return T.observe(e)}),v.forEach(function(e){return T.observe(e)})};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsid2luZG93Iiwib25sb2FkIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiYnVyZ2VyIiwiYm9keSIsImFsbEJ1cmdlckJhcnMiLCJxdWVyeVNlbGVjdG9yQWxsIiwibmF2TW9iaWxlIiwibmF2RGVza3RvcCIsImFycm93VXAiLCJmb290ZXJEYXRlIiwiYWxsU2VjdGlvbnMiLCJlcnJvck1zZyIsImVycm9yTXNnVGVsIiwiZW1haWwiLCJwaG9uZSIsIm1zZ1N0YXR1cyIsImNvbnNlbnRCb3giLCJhY2NlcHRCdG4iLCJyZWplY3RCdG4iLCJvbmNsaWNrIiwiY29va2llIiwiY2xhc3NMaXN0IiwiYWRkIiwiYWxlcnQiLCJyZW1vdmUiLCJjaGVja0Nvb2tpZSIsImxvY2F0aW9uIiwic2VhcmNoIiwiYWRkRXZlbnRMaXN0ZW5lciIsInN1Ym1pdEJ0biIsImNoZWNrUGhvbmUiLCJmb3JtQm94IiwidGV4dENvbnRlbnQiLCJjdXJyZW50RGF0ZSIsImlucHV0IiwibXNnIiwiaGFuZGxlRm9vdGVyWWVhciIsImluZGV4T2YiLCJzZXRUaW1lb3V0IiwidmFsaWROdW0iLCJjbGVhckVycm9yIiwic2hvd0Vycm9yIiwiZSIsImhhbmRsZU5hdiIsInZhbHVlIiwidGVzdCIsImdldEZ1bGxZZWFyIiwiY2Fyb3VzZWxzIiwiY3VycmVudFllYXIiLCJ0b1N0cmluZyIsImN1cnJlbnRTZWN0aW9uIiwic2Nyb2xsWSIsImZvckVhY2giLCJ3b3JrQnRucyIsImFycm93SWNvbnMiLCJvZmZzZXRUb3AiLCJoYWlyY3V0R2FsbGVyeSIsImJhciIsImdldEVsZW1lbnRCeUlkIiwiYmFyYmVyR2FsbGVyeSIsInN0eWxlR2FsbGVyeSIsInRodW1ibmFpbEltYWdlcyIsImhhbmRsZUFycm93VXAiLCJ0b2dnbGUiLCJhbGxOYXZMaW5rcyIsImhhbmRsZU9ic2VydmVyIiwibGluayIsInNlY3Rpb24iLCJjb250YWlucyIsImlkIiwidGh1bWJuYWlsc0Nhcm91c2VscyIsImVuZEluZGV4IiwiaGFuZGxlQXJyb3dBY3Rpb24iLCJzdGFydEluZGV4IiwiZ2FsbGVyaWVzIiwiY29sb3JHYWxsZXJ5IiwiaGFuZGxlRGlzcGxheUdhbGxlcnkiLCJpbWFnZXMiLCJnYWxsZXJ5VHlwZSIsImljb24iLCJoYW5kbGVEaXNwbGF5SW1hZ2UiLCJjdXJyZW50SW5kZXgiLCJpbmRleCIsImltYWdlIiwiaGFuZGxlQWN0aXZhdGVUaHVtYm5haWwiLCJjYXJvdXNlbCIsImZpcnN0RWxlbWVudENoaWxkIiwiaGFuZGxlV29ya0J0biIsInRodW1ibmFpbCIsInRodW1ibmFpbEluZGV4IiwidGFyZ2V0IiwiZW50cnkiLCJidG4iLCJoaWRkZW5FbGVtZW50c0xlZnQiLCJoaWRkZW5FbGVtZW50c1JpZ2h0Iiwib2JzZXJ2ZXIiLCJlbCIsIm9ic2VydmUiLCJoaWRkZW5WYW5pc2hlZEVsZW1lbnRzIiwiZ2FsbGVyeSIsIkludGVyc2VjdGlvbk9ic2VydmVyIiwiZW50cmllcyIsImlzSW50ZXJzZWN0aW5nIl0sIm1hcHBpbmdzIjoiQUFBQUEsT0FBT0MsT0FBUyxXQUFoQkQsSUFBT0MsRUFBTUMsU0FBR0MsY0FBWSxPQUFBLEVBQzFCQyxFQUFBRixTQUFBQyxjQUFBLFNBQUEsRUFDTUUsRUFBZ0JGLFNBQUFBLGlCQUFzQixlQUFBLEVBQ3RDQyxFQUFTRixTQUFTQyxjQUFjLE1BQVUsRUFDMUNHLEVBQWFKLFNBQVdDLGNBQUNJLGNBQWlCLEVBQzFDQyxFQUFZTixTQUFTQyxpQkFBcUIsbUJBQUEsRUFDMUNNLEVBQVVQLFNBQVdDLGNBQWMsVUFBQyxFQUVwQ08sRUFBVVIsU0FBU0MsY0FBYyx1QkFBVyxFQUU1Q1EsRUFBYVQsU0FBU0MsaUJBQWMsVUFBQSxFQUNwQ1MsRUFBV1YsU0FBV0MsY0FBQ0ksWUFBaUIsRUFDeENNLEVBQVdYLFNBQVNDLGNBQWMsZ0JBQWEsRUFDL0NXLEVBQUFBLFNBQWNaLGNBQVNDLFFBQWMsRUFDckNZLEVBQVFiLFNBQVNDLGNBQWMsU0FBUyxFQUN4Q2EsRUFB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IiwiZmlsZSI6Im1haW4ubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsid2luZG93Lm9ubG9hZCA9IGZ1bmN0aW9uICgpIHtcclxuICAvL3NlbGVjdG9yc1xyXG4gIGNvbnN0IGJvZHkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmJvZHlcIik7XHJcbiAgY29uc3QgYnVyZ2VyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5idXJnZXJcIik7XHJcbiAgY29uc3QgYWxsQnVyZ2VyQmFycyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuYnVyZ2VyX19iYXJzXCIpO1xyXG4gIGNvbnN0IG5hdk1vYmlsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubmF2XCIpO1xyXG4gIGNvbnN0IG5hdkRlc2t0b3AgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm5hdi1kZXNrdG9wXCIpO1xyXG4gIGNvbnN0IGFsbE5hdkxpbmtzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5uYXYtbW9iaWxlX19saW5rXCIpO1xyXG4gIGNvbnN0IGFycm93VXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmFycm93dXBcIik7XHJcblxyXG4gIGNvbnN0IGZvb3RlckRhdGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmZvb3Rlcl9fYm90dG9tLS1kYXRlXCIpO1xyXG4gIGNvbnN0IGFsbFNlY3Rpb25zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5zZWN0aW9uXCIpO1xyXG4gIGNvbnN0IGVycm9yTXNnID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5lcnJvci1tc2dcIik7XHJcbiAgY29uc3QgZXJyb3JNc2dUZWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmVycm9yLW1zZy10ZWxcIik7XHJcbiAgY29uc3QgZW1haWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmVtYWlsXCIpO1xyXG4gIGNvbnN0IHBob25lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi50ZWxOdW1cIik7XHJcbiAgY29uc3Qgc3VibWl0QnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5zdWJtaXRcIik7XHJcblxyXG4gIGNvbnN0IG1zZ1N0YXR1cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubXNnLXN0YXR1c1wiKTtcclxuXHJcbiAgLy9jb29raWVBbGVydFxyXG5cclxuICBjb25zdCBjb25zZW50Qm94ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jb29raWUtYm94XCIpO1xyXG4gIGNvbnN0IGFjY2VwdEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY29va2llLWJveF9fYnV0dG9ucy0tYWNjZXB0XCIpO1xyXG4gIGNvbnN0IHJlamVjdEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY29va2llLWJveF9fYnV0dG9ucy0tcmVqZWN0XCIpO1xyXG5cclxuICBhY2NlcHRCdG4ub25jbGljayA9ICgpID0+IHtcclxuICAgIGRvY3VtZW50LmNvb2tpZSA9IFwiQ29va2llQnk9c2Fsb25iZWF0YS5ldTsgbWF4LWFnZT1cIiArIDYwICogNjAgKiAyNDtcclxuICAgIGlmICghZG9jdW1lbnQuY29va2llKSB7XHJcbiAgICAgIGNvbnNlbnRCb3guY2xhc3NMaXN0LnJlbW92ZShcImhpZGVcIilcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGNvbnNlbnRCb3guY2xhc3NMaXN0LmFkZChcIi5oaWRlXCIpICYmXHJcbiAgICAgIGFsZXJ0KFxyXG4gICAgICAgIFwiTmllIG1vxbxuYSB1c3Rhd2nEhyBwbGlrw7N3IGNvb2tpZSFcIiArXHJcbiAgICAgICAgICBcIiBvZGJsb2t1aiB1c3Rhd2llbmlhIHBsaWvDs3cgY29va2llIHcgcHJ6ZWdsxIVkYXJjZVwiICtcclxuICAgICAgICAgIFwiIGJ5IHN0cm9uYSBkemlhxYJhxYJhIHBvcHJhd25pZS5cIlxyXG4gICAgICApO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIHJlamVjdEJ0bi5vbmNsaWNrID0gKCkgPT4ge1xyXG4gICAgYWxlcnQoXCJQbGlraSBDb29raWVzIG9kcnp1Y29uZS4gRnVua2Nqb25hbG5vxZvEhyBzdHJvbnkgbW/FvGUgem9zdGHEhyBvZ3Jhbmljem9uYS5cIik7XHJcbiAgICBjb25zZW50Qm94LmNsYXNzTGlzdC5hZGQoXCJoaWRlXCIpO1xyXG4gIH07XHJcblxyXG4gIGxldCBjaGVja0Nvb2tpZSA9IGRvY3VtZW50LmNvb2tpZS5pbmRleE9mKFwiQ29va2llQnk9c2Fsb25iZWF0YS5ldVwiKTtcclxuICBjaGVja0Nvb2tpZSAhPT0gLTEgPyBjb25zZW50Qm94LmNsYXNzTGlzdC5hZGQoXCJoaWRlXCIpIDogY29uc2VudEJveC5jbGFzc0xpc3QucmVtb3ZlKFwiaGlkZVwiKTtcclxuXHJcbiAgLy9zZW5kIG1haWxcclxuXHJcbiAgaWYgKGRvY3VtZW50LmxvY2F0aW9uLnNlYXJjaCA9PT0gXCI/bWFpbF9zdGF0dXM9c2VudFwiKSB7XHJcbiAgICBtc2dTdGF0dXMuY2xhc3NMaXN0LmFkZChcInN1Y2Nlc1wiKTtcclxuICAgIG1zZ1N0YXR1cy50ZXh0Q29udGVudCA9IFwiV2lhZG9tb8WbxIcgd3lzxYJhbmEhXCI7XHJcbiAgfVxyXG4gIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgbXNnU3RhdHVzLmNsYXNzTGlzdC5yZW1vdmUoXCJzdWNjZXNcIik7XHJcbiAgfSwgMzAwMCk7XHJcblxyXG4gIGlmIChkb2N1bWVudC5sb2NhdGlvbi5zZWFyY2ggPT09IFwiP21haWxfc3RhdHVzPWVycm9yXCIpIHtcclxuICAgIG1zZ1N0YXR1cy5jbGFzc0xpc3QuYWRkKFwiZXJyb3JcIik7XHJcbiAgICBtc2dTdGF0dXMudGV4dENvbnRlbnQgPSBcImLFgsSFZCwgc3Byw7NidWogcG9ub3duaWVcIjtcclxuICB9XHJcbiAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICBtc2dTdGF0dXMuY2xhc3NMaXN0LnJlbW92ZShcImVycm9yXCIpO1xyXG4gIH0sIDMwMDApO1xyXG5cclxuICAvLyBmb3JtIHZhbGlkYXRvclxyXG5cclxuICBjb25zdCBjaGVja1Bob25lID0gKHBob25lKSA9PiB7XHJcbiAgICBjb25zdCB2YWxpZE51bSA9IC9eWzAtOVxcK117OCwxM30kLztcclxuXHJcbiAgICBpZiAodmFsaWROdW0udGVzdChwaG9uZS52YWx1ZSkpIHtcclxuICAgICAgY2xlYXJFcnJvcihlcnJvck1zZ1RlbCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBzaG93RXJyb3IoZXJyb3JNc2dUZWwsIFwid3Bpc3ogcG9wcmF3bnkgbnIgdGVsLlwiKTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICBjb25zdCBjaGVja01haWwgPSAoZW1haWwpID0+IHtcclxuICAgIGNvbnN0IHZhbGlkTWFpbCA9IC9eW1xcdy1cXC5dK0AoW1xcdy1dK1xcLikrW1xcdy1dezIsNH0kLztcclxuXHJcbiAgICBpZiAodmFsaWRNYWlsLnRlc3QoZW1haWwudmFsdWUpKSB7XHJcbiAgICAgIGNsZWFyRXJyb3IoZXJyb3JNc2cpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgc2hvd0Vycm9yKGVycm9yTXNnLCBcIndwaXN6IHBvcHJhd255IGFkcmVzIGVtYWlsLlwiKTtcclxuICAgIH1cclxuICB9O1xyXG4gIGNvbnN0IGNsZWFyRXJyb3IgPSAoZWwpID0+IHtcclxuICAgIGNvbnN0IGZvcm1Cb3ggPSBlbDtcclxuICAgIGZvcm1Cb3guY2xhc3NMaXN0LnJlbW92ZShcImVycm9yLWRpc3BsYXlcIik7XHJcbiAgICBmb3JtQm94LnRleHRDb250ZW50ID0gXCJcIjtcclxuICB9O1xyXG5cclxuICBjb25zdCBzaG93RXJyb3IgPSAoaW5wdXQsIG1zZykgPT4ge1xyXG4gICAgY29uc3QgZm9ybUJveCA9IGlucHV0O1xyXG4gICAgZm9ybUJveC5jbGFzc0xpc3QuYWRkKFwiZXJyb3ItZGlzcGxheVwiKTtcclxuICAgIGZvcm1Cb3gudGV4dENvbnRlbnQgPSBtc2c7XHJcbiAgfTtcclxuXHJcbiAgLy8gZXZlbnQgbGlzdGVuZXJzXHJcbiAgc3VibWl0QnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZSkgPT4ge1xyXG4gICAgY2hlY2tNYWlsKGVtYWlsKTtcclxuICAgIGNoZWNrUGhvbmUocGhvbmUpO1xyXG4gIH0pO1xyXG5cclxuICAvLyBmb290ZXJcclxuICBjb25zdCBjdXJyZW50RGF0ZSA9IG5ldyBEYXRlKCk7XHJcbiAgY29uc3QgY3VycmVudFllYXIgPSBjdXJyZW50RGF0ZS5nZXRGdWxsWWVhcigpO1xyXG5cclxuICBjb25zdCBoYW5kbGVGb290ZXJZZWFyID0gKCkgPT4ge1xyXG4gICAgZm9vdGVyRGF0ZS50ZXh0Q29udGVudCA9IGN1cnJlbnRZZWFyLnRvU3RyaW5nKCk7XHJcbiAgfTtcclxuXHJcbiAgaGFuZGxlRm9vdGVyWWVhcigpO1xyXG4gIC8vIE5BVlxyXG5cclxuICBjb25zdCBoYW5kbGVOYXYgPSAoKSA9PiB7XHJcbiAgICBuYXZNb2JpbGUuY2xhc3NMaXN0LnRvZ2dsZShcImFjdGl2ZVwiKTtcclxuICAgIGJ1cmdlci5jbGFzc0xpc3QudG9nZ2xlKFwiYWN0aXZlXCIpO1xyXG4gICAgYm9keS5jbGFzc0xpc3QudG9nZ2xlKFwiZGlzYWJsZS1zY3JvbGxcIik7XHJcblxyXG4gICAgYWxsTmF2TGlua3MuZm9yRWFjaCgobGluaykgPT4ge1xyXG4gICAgICBsaW5rLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgICAgbmF2TW9iaWxlLmNsYXNzTGlzdC5yZW1vdmUoXCJhY3RpdmVcIik7XHJcbiAgICAgICAgYnVyZ2VyLmNsYXNzTGlzdC5yZW1vdmUoXCJhY3RpdmVcIik7XHJcbiAgICAgICAgYm9keS5jbGFzc0xpc3QucmVtb3ZlKFwiZGlzYWJsZS1zY3JvbGxcIik7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfTtcclxuICBjb25zdCBoYW5kbGVBcnJvd1VwID0gKCkgPT4ge1xyXG4gICAgY29uc3QgY3VycmVudFNlY3Rpb24gPSB3aW5kb3cuc2Nyb2xsWTtcclxuICAgIGlmIChjdXJyZW50U2VjdGlvbiA+IDQ4MCkge1xyXG4gICAgICBhcnJvd1VwLmNsYXNzTGlzdC5hZGQoXCJhY3RpdmVcIik7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBhcnJvd1VwLmNsYXNzTGlzdC5yZW1vdmUoXCJhY3RpdmVcIik7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgY29uc3QgaGFuZGxlT2JzZXJ2ZXIgPSAoKSA9PiB7XHJcbiAgICBjb25zdCBjdXJyZW50U2VjdGlvbiA9IHdpbmRvdy5zY3JvbGxZO1xyXG5cclxuICAgIGFsbFNlY3Rpb25zLmZvckVhY2goKHNlY3Rpb24pID0+IHtcclxuICAgICAgaWYgKFxyXG4gICAgICAgICFzZWN0aW9uLmNsYXNzTGlzdC5jb250YWlucyhcIndoaXRlLXNlY3Rpb25cIikgJiZcclxuICAgICAgICBzZWN0aW9uLm9mZnNldFRvcCA8PSBjdXJyZW50U2VjdGlvbiArIDMwXHJcbiAgICAgICkge1xyXG4gICAgICAgIGFsbEJ1cmdlckJhcnMuZm9yRWFjaCgoYmFyKSA9PiBiYXIuY2xhc3NMaXN0LmFkZChcIndoaXRlLWJ1cmdlclwiKSk7XHJcbiAgICAgIH0gZWxzZSBpZiAoXHJcbiAgICAgICAgc2VjdGlvbi5jbGFzc0xpc3QuY29udGFpbnMoXCJ3aGl0ZS1zZWN0aW9uXCIpICYmXHJcbiAgICAgICAgc2VjdGlvbi5vZmZzZXRUb3AgPD0gY3VycmVudFNlY3Rpb24gKyAxMDBcclxuICAgICAgKSB7XHJcbiAgICAgICAgYWxsQnVyZ2VyQmFycy5mb3JFYWNoKChiYXIpID0+IGJhci5jbGFzc0xpc3QucmVtb3ZlKFwid2hpdGUtYnVyZ2VyXCIpKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICBoYW5kbGVBcnJvd1VwKCk7XHJcbiAgfTtcclxuXHJcbiAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJzY3JvbGxcIiwgaGFuZGxlT2JzZXJ2ZXIpO1xyXG4gIGJ1cmdlci5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgaGFuZGxlTmF2KTtcclxuXHJcbiAgLy8gLS0tLS0tLS0tLS0tLSBHQUxMRVJZIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4gIGNvbnN0IGNhcm91c2VscyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuY2Fyb3VzZWxcIik7XHJcbiAgY29uc3QgdGh1bWJuYWlsc0Nhcm91c2VscyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuY2Fyb3VzZWwtdGh1bWJuYWlsc1wiKTtcclxuICBjb25zdCB3b3JrQnRucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIud29yay1idG5cIik7XHJcblxyXG4gIGNvbnN0IGFycm93SWNvbnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmFycm93XCIpO1xyXG4gIGNvbnN0IGdhbGxlcmllcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuZ2FsbGVyeVwiKTtcclxuICBjb25zdCBoYWlyY3V0R2FsbGVyeSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiaGFpcmN1dFwiKTtcclxuICBjb25zdCBjb2xvckdhbGxlcnkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNvbG9yXCIpO1xyXG4gIGNvbnN0IGJhcmJlckdhbGxlcnkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImJhcmJlclwiKTtcclxuICBjb25zdCBzdHlsZUdhbGxlcnkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInN0eWxlXCIpO1xyXG5cclxuICBjb25zdCBpbWFnZXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmltZ1wiKTtcclxuICBjb25zdCB0aHVtYm5haWxJbWFnZXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnRodW1ibmFpbC1pbWdcIik7XHJcblxyXG4gIGZ1bmN0aW9uIGhhbmRsZVdvcmtCdG4oYnRuKSB7XHJcbiAgICBpZiAoYnRuLmlkID09PSBcImJ0bi1vbmVcIikge1xyXG4gICAgICBsZXQgc3RhcnRJbmRleCA9IDA7XHJcbiAgICAgIGxldCBlbmRJbmRleCA9IDM7XHJcblxyXG4gICAgICBoYW5kbGVEaXNwbGF5R2FsbGVyeShoYWlyY3V0R2FsbGVyeSksIGhhbmRsZUFycm93QWN0aW9uKHN0YXJ0SW5kZXgsIGVuZEluZGV4KTtcclxuICAgIH0gZWxzZSBpZiAoYnRuLmlkID09PSBcImJ0bi10d29cIikge1xyXG4gICAgICBsZXQgc3RhcnRJbmRleCA9IDQ7XHJcbiAgICAgIGxldCBlbmRJbmRleCA9IDc7XHJcbiAgICAgIGhhbmRsZURpc3BsYXlHYWxsZXJ5KGNvbG9yR2FsbGVyeSk7XHJcbiAgICAgIGhhbmRsZUFycm93QWN0aW9uKHN0YXJ0SW5kZXgsIGVuZEluZGV4KTtcclxuICAgIH0gZWxzZSBpZiAoYnRuLmlkID09PSBcImJ0bi10aHJlZVwiKSB7XHJcbiAgICAgIGxldCBzdGFydEluZGV4ID0gODtcclxuICAgICAgbGV0IGVuZEluZGV4ID0gMTE7XHJcbiAgICAgIGhhbmRsZURpc3BsYXlHYWxsZXJ5KGJhcmJlckdhbGxlcnkpO1xyXG4gICAgICBoYW5kbGVBcnJvd0FjdGlvbihzdGFydEluZGV4LCBlbmRJbmRleCk7XHJcbiAgICB9IGVsc2UgaWYgKGJ0bi5pZCA9PT0gXCJidG4tZm91clwiKSB7XHJcbiAgICAgIGxldCBzdGFydEluZGV4ID0gMTI7XHJcbiAgICAgIGxldCBlbmRJbmRleCA9IDE1O1xyXG4gICAgICBoYW5kbGVEaXNwbGF5R2FsbGVyeShzdHlsZUdhbGxlcnkpO1xyXG4gICAgICBoYW5kbGVBcnJvd0FjdGlvbihzdGFydEluZGV4LCBlbmRJbmRleCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBoYW5kbGVBcnJvd0FjdGlvbihzdGFydEluZGV4LCBlbmRJbmRleCkge1xyXG4gICAgbGV0IGluZGV4ID0gc3RhcnRJbmRleDtcclxuICAgIGFycm93SWNvbnMuZm9yRWFjaCgoaWNvbikgPT5cclxuICAgICAgaWNvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICAgIGlmIChpY29uLmlkID09PSBcImxlZnRcIiAmJiBpbmRleCA9PT0gc3RhcnRJbmRleCkge1xyXG4gICAgICAgICAgaW5kZXggPSBlbmRJbmRleCArIDE7XHJcbiAgICAgICAgICBpbmRleC0tO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoaWNvbi5pZCA9PT0gXCJsZWZ0XCIgJiYgaW5kZXggPiBzdGFydEluZGV4KSB7XHJcbiAgICAgICAgICBpbmRleC0tO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoaWNvbi5pZCA9PT0gXCJyaWdodFwiICYmIGluZGV4IDwgZW5kSW5kZXgpIHtcclxuICAgICAgICAgIGluZGV4Kys7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIGluZGV4ID0gc3RhcnRJbmRleDtcclxuICAgICAgICB9XHJcbiAgICAgICAgaGFuZGxlRGlzcGxheUltYWdlKGluZGV4KTtcclxuICAgICAgICBoYW5kbGVBY3RpdmF0ZVRodW1ibmFpbChpbmRleCk7XHJcbiAgICAgIH0pXHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gaGFuZGxlRGlzcGxheUdhbGxlcnkoZ2FsbGVyeVR5cGUpIHtcclxuICAgIGNhcm91c2Vscy5mb3JFYWNoKChjYXJvdXNlbCkgPT4gY2Fyb3VzZWwuZmlyc3RFbGVtZW50Q2hpbGQuY2xhc3NMaXN0LmFkZChcInNob3ctaW1hZ2VcIikpO1xyXG4gICAgdGh1bWJuYWlsc0Nhcm91c2Vscy5mb3JFYWNoKChjYXJvdXNlbCkgPT5cclxuICAgICAgY2Fyb3VzZWwuZmlyc3RFbGVtZW50Q2hpbGQuY2xhc3NMaXN0LnJlbW92ZShcInRodW1ibmFpbC1kaXNhYmxlZFwiKVxyXG4gICAgKTtcclxuICAgIGJvZHkuY2xhc3NMaXN0LmFkZChcImRpc2FibGUtc2Nyb2xsXCIpO1xyXG4gICAgZ2FsbGVyeVR5cGUuY2xhc3NMaXN0LmFkZChcImRpc3BsYXktZ2FsbGVyeVwiKTtcclxuICAgIG5hdkRlc2t0b3AuY2xhc3NMaXN0LmFkZChcIm5hdi10cmFuc2l0aW9uXCIpO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gaGFuZGxlRGlzcGxheUltYWdlKGN1cnJlbnRJbmRleCkge1xyXG4gICAgaW1hZ2VzLmZvckVhY2goKGltYWdlLCBpbmRleCkgPT4ge1xyXG4gICAgICBpZiAoY3VycmVudEluZGV4ID09PSBpbmRleCkge1xyXG4gICAgICAgIGltYWdlLmNsYXNzTGlzdC5hZGQoXCJzaG93LWltYWdlXCIpLCBoYW5kbGVBY3RpdmF0ZVRodW1ibmFpbChpbmRleCk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgaW1hZ2UuY2xhc3NMaXN0LnJlbW92ZShcInNob3ctaW1hZ2VcIik7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gaGFuZGxlQWN0aXZhdGVUaHVtYm5haWwoY3VycmVudEluZGV4KSB7XHJcbiAgICB0aHVtYm5haWxJbWFnZXMuZm9yRWFjaCgodGh1bWJuYWlsLCBpbmRleCkgPT5cclxuICAgICAgY3VycmVudEluZGV4ID09PSBpbmRleFxyXG4gICAgICAgID8gdGh1bWJuYWlsLmNsYXNzTGlzdC5yZW1vdmUoXCJ0aHVtYm5haWwtZGlzYWJsZWRcIilcclxuICAgICAgICA6IHRodW1ibmFpbC5jbGFzc0xpc3QuYWRkKFwidGh1bWJuYWlsLWRpc2FibGVkXCIpXHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgLy8gZXZlbnQgbGlzdGVuZXJzIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICB3b3JrQnRucy5mb3JFYWNoKChidG4pID0+IGJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4gaGFuZGxlV29ya0J0bihidG4pKSk7XHJcblxyXG4gIHRodW1ibmFpbEltYWdlcy5mb3JFYWNoKCh0aHVtYm5haWwsIHRodW1ibmFpbEluZGV4KSA9PlxyXG4gICAgdGh1bWJuYWlsLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgIChpbmRleCA9IHRodW1ibmFpbEluZGV4KSwgaGFuZGxlRGlzcGxheUltYWdlKGluZGV4KTtcclxuICAgIH0pXHJcbiAgKTtcclxuXHJcbiAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChlKSA9PiB7XHJcbiAgICBpZiAoXHJcbiAgICAgIChlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJnYWxsZXJ5XCIpICYmIGJvZHkuY2xhc3NMaXN0LmNvbnRhaW5zKFwiZGlzYWJsZS1zY3JvbGxcIikpIHx8XHJcbiAgICAgIGJvZHkuY2xhc3NMaXN0LmNvbnRhaW5zKFwiY2Fyb3VzZWxcIilcclxuICAgICkge1xyXG4gICAgICBnYWxsZXJpZXMuZm9yRWFjaCgoZ2FsbGVyeSkgPT4gZ2FsbGVyeS5jbGFzc0xpc3QucmVtb3ZlKFwiZGlzcGxheS1nYWxsZXJ5XCIpKTtcclxuICAgICAgYm9keS5jbGFzc0xpc3QucmVtb3ZlKFwiZGlzYWJsZS1zY3JvbGxcIik7XHJcbiAgICAgIG5hdkRlc2t0b3AuY2xhc3NMaXN0LnJlbW92ZShcIm5hdi10cmFuc2l0aW9uXCIpO1xyXG4gICAgICBpbmRleCA9IDA7XHJcblxyXG4gICAgICBjYXJvdXNlbHMuZm9yRWFjaCgoY2Fyb3VzZWwpID0+IGNhcm91c2VsLmZpcnN0RWxlbWVudENoaWxkLmNsYXNzTGlzdC5hZGQoXCJzaG93LWltYWdlXCIpKTtcclxuICAgIH1cclxuICB9KTtcclxuXHJcbiAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1mYWRlSU4gYW5pbSAtLS0tLS0tLS0tLS0tLS1cclxuXHJcbiAgY29uc3Qgb2JzZXJ2ZXIgPSBuZXcgSW50ZXJzZWN0aW9uT2JzZXJ2ZXIoKGVudHJpZXMpID0+IHtcclxuICAgIGVudHJpZXMuZm9yRWFjaCgoZW50cnkpID0+IHtcclxuICAgICAgaWYgKGVudHJ5LmlzSW50ZXJzZWN0aW5nKSB7XHJcbiAgICAgICAgZW50cnkudGFyZ2V0LmNsYXNzTGlzdC5hZGQoXCJzaG93XCIpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9KTtcclxuXHJcbiAgY29uc3QgaGlkZGVuRWxlbWVudHNMZWZ0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5oaWRkZW5cIik7XHJcbiAgY29uc3QgaGlkZGVuRWxlbWVudHNSaWdodCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuaGlkZGVuLXJpZ2h0XCIpO1xyXG4gIGNvbnN0IGhpZGRlblZhbmlzaGVkRWxlbWVudHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmhpZGRlbi12YW5pc2hlZFwiKTtcclxuICBoaWRkZW5FbGVtZW50c0xlZnQuZm9yRWFjaCgoZWwpID0+IG9ic2VydmVyLm9ic2VydmUoZWwpKTtcclxuICBoaWRkZW5FbGVtZW50c1JpZ2h0LmZvckVhY2goKGVsKSA9PiBvYnNlcnZlci5vYnNlcnZlKGVsKSk7XHJcbiAgaGlkZGVuVmFuaXNoZWRFbGVtZW50cy5mb3JFYWNoKChlbCkgPT4gb2JzZXJ2ZXIub2JzZXJ2ZShlbCkpO1xyXG59O1xyXG4iXX0=
