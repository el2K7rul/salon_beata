window.onload=function(){var t=document.querySelector(".body"),o=document.querySelector(".burger"),n=document.querySelectorAll(".burger__bars"),c=document.querySelector(".nav"),s=document.querySelector(".nav-desktop"),e=document.querySelectorAll(".nav-mobile__link"),r=document.querySelector(".arrowup"),i=document.querySelector(".footer__bottom--date"),l=document.querySelectorAll(".section"),a=document.querySelector(".error-msg"),u=document.querySelector(".error-msg-tel"),d=document.querySelector(".email"),m=(document.querySelector(".telNum"),document.querySelector(".submit")),f=document.querySelector(".msg-status"),h=document.getElementById("cookie-box"),y=document.querySelector(".cookie-box__buttons--accept"),v=document.querySelector(".cookie-box__buttons--reject");y.onclick=function(){document.cookie="CookieBy=salonbeata.eu; max-age=86400",document.cookie?h.classList.add("hide"):alert("Cookie can't be set! Please unblock this site from the cookie setting of your browser.")},v.onclick=function(){alert("Cookies rejected. Some functionality may be limited."),h.classList.add("hide")};function L(e){e.classList.remove("error-display"),e.textContent=""}function b(e,t){e.classList.add("error-display"),e.textContent=t}-1!==document.cookie.indexOf("CookieBy=GeeksForGeeks")?h.classList.add("hide"):h.classList.remove("hide"),"?mail_status=sent"===document.location.search&&(f.classList.add("succes"),f.textContent="Wiadomość wysłana!"),setTimeout(function(){f.classList.remove("succes")},3e3),"?mail_status=error"===document.location.search&&(f.classList.add("error"),f.textContent="błąd, spróbuj ponownie"),setTimeout(function(){f.classList.remove("error")},3e3);m.addEventListener("click",function(e){/^[\w-\.]+@([\w-]+\.)+[\w-]{2,4}$/.test(d.value)?L(a):b(a,"wpisz poprawny adres email."),/^[0-9\+]{8,13}$/.test(telNum.value)?L(u):b(u,"wpisz poprawny nr tel.")});var y=(new Date).getFullYear(),g=(i.textContent=y.toString(),window.addEventListener("scroll",function(){var t=window.scrollY;l.forEach(function(e){!e.classList.contains("white-section")&&e.offsetTop<=t+30?n.forEach(function(e){return e.classList.add("white-burger")}):e.classList.contains("white-section")&&e.offsetTop<=t+100&&n.forEach(function(e){return e.classList.remove("white-burger")})}),480<window.scrollY?r.classList.add("active"):r.classList.remove("active")}),o.addEventListener("click",function(){c.classList.toggle("active"),o.classList.toggle("active"),t.classList.toggle("disable-scroll"),e.forEach(function(e){e.addEventListener("click",function(){c.classList.remove("active"),o.classList.remove("active"),t.classList.remove("disable-scroll")})})}),document.querySelectorAll(".carousel")),w=document.querySelectorAll(".carousel-thumbnails"),v=document.querySelectorAll(".work-btn"),E=document.querySelectorAll(".arrow"),S=document.querySelectorAll(".gallery"),q=document.getElementById("haircut"),k=document.getElementById("color"),p=document.getElementById("barber"),A=document.getElementById("style"),x=document.querySelectorAll(".img"),C=document.querySelectorAll(".thumbnail-img");function _(t,o){var n=t;E.forEach(function(e){return e.addEventListener("click",function(){"left"===e.id&&n===t?(n=o+1,n--):"left"===e.id&&t<n?n--:"right"===e.id&&n<o?n++:n=t,I(n),T(n)})})}function B(e){g.forEach(function(e){return e.firstElementChild.classList.add("show-image")}),w.forEach(function(e){return e.firstElementChild.classList.remove("thumbnail-disabled")}),t.classList.add("disable-scroll"),e.classList.add("display-gallery"),s.classList.add("nav-transition")}function I(o){x.forEach(function(e,t){o===t?(e.classList.add("show-image"),T(t)):e.classList.remove("show-image")})}function T(o){C.forEach(function(e,t){return o===t?e.classList.remove("thumbnail-disabled"):e.classList.add("thumbnail-disabled")})}v.forEach(function(t){return t.addEventListener("click",function(){var e;"btn-one"===(e=t).id?(B(q),_(0,3)):"btn-two"===e.id?(B(k),_(4,7)):"btn-three"===e.id?(B(p),_(8,11)):"btn-four"===e.id&&(B(A),_(12,15))})}),C.forEach(function(e,t){return e.addEventListener("click",function(){I(index=t)})}),document.addEventListener("click",function(e){(e.target.classList.contains("gallery")&&t.classList.contains("disable-scroll")||t.classList.contains("carousel"))&&(S.forEach(function(e){return e.classList.remove("display-gallery")}),t.classList.remove("disable-scroll"),s.classList.remove("nav-transition"),index=0,g.forEach(function(e){return e.firstElementChild.classList.add("show-image")}))});var j=new IntersectionObserver(function(e){e.forEach(function(e){e.isIntersecting&&e.target.classList.add("show")})}),m=document.querySelectorAll(".hidden"),i=document.querySelectorAll(".hidden-right"),y=document.querySelectorAll(".hidden-vanished");m.forEach(function(e){return j.observe(e)}),i.forEach(function(e){return j.observe(e)}),y.forEach(function(e){return j.observe(e)})};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsid2luZG93Iiwib25sb2FkIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiYnVyZ2VyIiwiYm9keSIsImFsbEJ1cmdlckJhcnMiLCJxdWVyeVNlbGVjdG9yQWxsIiwibmF2TW9iaWxlIiwibmF2RGVza3RvcCIsImFycm93VXAiLCJmb290ZXJEYXRlIiwiYWxsU2VjdGlvbnMiLCJlcnJvck1zZyIsImVycm9yTXNnVGVsIiwicGhvbmUiLCJtc2dTdGF0dXMiLCJjb25zZW50Qm94IiwiZ2V0RWxlbWVudEJ5SWQiLCJhY2NlcHRCdG4iLCJyZWplY3RCdG4iLCJvbmNsaWNrIiwiY29va2llIiwiY2xhc3NMaXN0IiwiYWRkIiwiYWxlcnQiLCJjbGVhckVycm9yIiwiZWwiLCJjaGVja01haWwiLCJlbWFpbCIsInJlbW92ZSIsImNoZWNrUGhvbmUiLCJ0ZXh0Q29udGVudCIsInNob3dFcnJvciIsImlucHV0IiwibXNnIiwiY3VycmVudFllYXIiLCJjdXJyZW50RGF0ZSIsImhhbmRsZUZvb3RlclllYXIiLCJpbmRleE9mIiwibG9jYXRpb24iLCJzZWFyY2giLCJzZXRUaW1lb3V0IiwidmFsaWROdW0iLCJzdWJtaXRCdG4iLCJhZGRFdmVudExpc3RlbmVyIiwiZSIsInRlc3QiLCJmb3JtQm94IiwidmFsdWUiLCJnZXRGdWxsWWVhciIsImNhcm91c2VscyIsInRvU3RyaW5nIiwiY3VycmVudFNlY3Rpb24iLCJzY3JvbGxZIiwidGh1bWJuYWlsc0Nhcm91c2VscyIsInNlY3Rpb24iLCJhcnJvd0ljb25zIiwiY29udGFpbnMiLCJnYWxsZXJpZXMiLCJvZmZzZXRUb3AiLCJjb2xvckdhbGxlcnkiLCJzdHlsZUdhbGxlcnkiLCJpbWFnZXMiLCJoYW5kbGVXb3JrQnRuIiwiYmFyIiwidG9nZ2xlIiwiYWxsTmF2TGlua3MiLCJmb3JFYWNoIiwiaGFuZGxlRGlzcGxheUdhbGxlcnkiLCJiYXJiZXJHYWxsZXJ5IiwiaGFuZGxlQXJyb3dBY3Rpb24iLCJzdGFydEluZGV4IiwiZW5kSW5kZXgiLCJpbmRleCIsImljb24iLCJoYW5kbGVEaXNwbGF5SW1hZ2UiLCJjdXJyZW50SW5kZXgiLCJpbWFnZSIsImlkIiwidGh1bWJuYWlsSW1hZ2VzIiwiaGFuZGxlQWN0aXZhdGVUaHVtYm5haWwiLCJ3b3JrQnRucyIsImdhbGxlcnlUeXBlIiwiY2Fyb3VzZWwiLCJmaXJzdEVsZW1lbnRDaGlsZCIsInRodW1ibmFpbCIsInRodW1ibmFpbEluZGV4IiwiZ2FsbGVyeSIsIm9ic2VydmVyIiwiSW50ZXJzZWN0aW9uT2JzZXJ2ZXIiLCJlbnRyaWVzIiwiYnRuIiwiaGFpcmN1dEdhbGxlcnkiLCJoaWRkZW5FbGVtZW50c0xlZnQiLCJoaWRkZW5FbGVtZW50c1JpZ2h0IiwiaGlkZGVuVmFuaXNoZWRFbGVtZW50cyIsInRhcmdldCIsImVudHJ5IiwiaXNJbnRlcnNlY3RpbmciLCJvYnNlcnZlIl0sIm1hcHBpbmdzIjoiQUFBQUEsT0FBT0MsT0FBUyxXQUFoQkQsSUFBT0MsRUFBTUMsU0FBR0MsY0FBWSxPQUFBLEVBQzFCQyxFQUFBRixTQUFBQyxjQUFBLFNBQUEsRUFDTUUsRUFBZ0JGLFNBQUFBLGlCQUFzQixlQUFBLEVBQ3RDQyxFQUFTRixTQUFTQyxjQUFjLE1BQVUsRUFDMUNHLEVBQWFKLFNBQVdDLGNBQUNJLGNBQWlCLEVBQzFDQyxFQUFZTixTQUFTQyxpQkFBcUIsbUJBQUEsRUFDMUNNLEVBQVVQLFNBQVdDLGNBQWMsVUFBQyxFQUVwQ08sRUFBVVIsU0FBU0MsY0FBYyx1QkFBVyxFQUU1Q1EsRUFBYVQsU0FBU0MsaUJBQWMsVUFBQSxFQUNwQ1MsRUFBV1YsU0FBV0MsY0FBQ0ksWUFBaUIsRUFDeENNLEVBQVdYLFNBQVNDLGNBQWMsZ0JBQWEsRUFDL0NXLEVBQUFBLFNBQWNaLGNBQVNDLFFBQWMsRUFFckNZLEdBRFFiLFNBQVNDLGNBQWMsU0FBUyxFQUNoQ0QsU0FBU0MsY0FBYyxTQUFVLEdBR3pDYSxFQUFZZCxTQUFTQyxjQUFjLGFBQWMsRUFJakRjLEVBQWFmLFNBQVNnQixlQUFlLFlBQWEsRUFDbERDLEVBQVlqQixTQUFTQyxjQUFjLDhCQUErQixFQUNsRWlCLEVBQVlsQixTQUFTQyxjQUFjLDhCQUErQixFQUV4RWdCLEVBQ1VFLFFBQVUsV0FDbEJuQixTQUFJQSxPQUFTb0Isd0NBQ1hMLFNBQVdNLE9BQ1pOLEVBQU1NLFVBQUFDLElBQUEsTUFBQSxFQU1QQyxNQUNELHdGQUlDUixDQUdGLEVBTEFHLEVBQVVDLFFBQVUsV0FRcEJJLE1BQUEsc0RBQUEsRUFORVIsRUFBV00sVUFBVUMsSUFBSSxNQUFNLENBUWpDLEVBaURFLFNBQUFFLEVBQUFDLEdBR0VDLEVBQVVDLFVBQU1DLE9BQUEsZUFBQSxFQUNoQkMsRUFBVUMsWUFBTyxFQUNqQixDQUdKLFNBQUFDLEVBQUFDLEVBQUFDLEdBRU1DLEVBQUFBLFVBQWNDLElBQUFBLGVBQXVCLEVBRXJDQyxFQUFBQSxZQUFtQkgsQ0FDdkJ4QixDQTNERixDQUFBLElBRFlxQixTQUFjVixPQUFBaUIsUUFBQSx3QkFBb0IsRUFDOUN0QixFQUFBTSxVQUFBQyxJQUFBLE1BQUEsRUFBQVAsRUFBQU0sVUFBQU8sT0FBQSxNQUFBLEVBS2lDLHNCQUE3QjVCLFNBQVNzQyxTQUFTQyxTQUNwQnpCLEVBQVVPLFVBQVVDLElBQUksUUFBUSxFQUNoQ1IsRUFBVWdCLFlBQWMsc0JBRTFCVSxXQUFXLFdBQ1QxQixFQUFVTyxVQUFVTyxPQUFPLFFBQVEsQ0FDckMsRUFBRyxHQUFJLEVBRUwsdUJBQUE1QixTQUFBc0MsU0FBQUMsU0FQQXpCLEVBQVVPLFVBQVVDLElBQUksT0FBTyxFQVMvQlIsRUFBTWUsWUFBQUEsMEJBTlJXLFdBU1FDLFdBUk4zQixFQVNJVSxVQUFXWixPQUFZLE9BQUEsQ0FSN0IsRUFTSyxHQUFBLEVBMkNMOEIsRUFBQUMsaUJBQUEsUUFBQSxTQUFBQyxHQTFCdUIsbUNBR0hDLEtBeUJMbEIsRUF6QlBJLEtBQVNBLEVBQ1BlLEVBQVVkLENBQUssRUFFckJjLEVBQVFoQixFQUFjRyw2QkFBRyxFQWpCUCxrQkFHTHRCLEtBQUFBLE9BQVNvQyxLQUFBLEVBQ3JCdkIsRUFBTVosQ0FBQSxFQUVQbUIsRUFBQW5CLEVBQUEsd0JBQUEsQ0FtQ0ZWLENBQUFBLEVBdkhKSixJQTZIUUksR0FEVW1CLElBQUFBLE1BQ2MyQixZQUFTLEVBa0VuQ0MsR0EvREZ4QyxFQUFFcUIsWUFBQUksRUFBQWdCLFNBQUEsRUE4QkpwRCxPQTJCSTZDLGlCQUFrQixTQXZCdEIsV0F0QkUsSUFBTVEsRUFBaUJyRCxPQUFPc0QsUUF5QmhDMUMsRUFBTTJDLFFBQUFBLFNBQW1CQyxHQUduQkMsQ0FBQUEsRUFBVWxDLFVBQVdtQyxTQUFDbkQsZUFBaUIsR0FDdkNvRCxFQUFTQyxXQUFZckQsRUFBaUIsR0FFdENzRCxFQUFlM0QsUUFBU2dCLFNBQUFBLEdBQUFBLE9BQUFBLEVBQUFBLFVBQXVCTSxJQUFBLGNBQUEsQ0FBQSxDQUFBLEVBRS9Dc0MsRUFBQUEsVUFBZTVELFNBQVNnQixlQUFlLEdBRXZDNkMsRUFBUzdELFdBQVNLLEVBQWlCLEtBR3pDRCxFQUFTMEQsUUFBbUIsU0FBQUMsR0FBQSxPQUFBQSxFQUFBMUMsVUFBQU8sT0FBQSxjQUFBLENBQUEsQ0FBQSxDQXhCMUIsQ0FBQyxFQURDLElBRHNFOUIsT0FBQXNELFFBRXRFNUMsRUFBQWEsVUFBQUMsSUFBQSxRQUFBLEVBRUhkLEVBQUFhLFVBQUFPLE9BQUEsUUFBQSxDQUFELENBNkJzQixFQTFCdEIxQixFQTJCSXlDLGlCQUFnQixRQXBEWCxXQWhCUHJDLEVBaUJVZSxVQUFVTyxPQUFPLFFBQVEsRUFDbkMxQixFQUFBbUIsVUFBQTJDLE9BQUEsUUFBQSxFQUNEN0QsRUFBQWtCLFVBQUEyQyxPQUFBLGdCQUFBLEVBR0NDLEVBQU1kLFFBQWMsU0FBR3JELEdBRXZCWSxFQUFBQSxpQkFBb0IsUUFBQzRDLFdBQ25CaEQsRUFDVWUsVUFBVU8sT0FBQzRCLFFBQVMsRUFHNUJwRCxFQUFBQSxVQUFjOEQsT0FBUSxRQUFDSCxFQXJCdkI1RCxFQXFCMEJrQixVQUFTQSxPQUFTLGdCQUFLLENBcEJuRCxDQUFDLENBQ0gsQ0FBQyxDQUNILENBeURvQixFQUtKckIsU0FBS0ssaUJBQUEsV0FBQSxHQUNqQjhELEVBQXFCQyxTQUFBQSxpQkFBYyxzQkFBQSxFQUNuQ0MsRUFBQUEsU0FBa0JDLGlCQUFZQyxXQUFTLEVBRXZDaEIsRUFBSWUsU0FBZWpFLGlCQUFBLFFBQUEsRUFDbkJvRCxFQUFZekQsU0FBS0ssaUJBQUEsVUFBQSxFQUNqQjhELEVBQUFBLFNBQXFCUCxlQUFhLFNBQUEsRUFDbENTLEVBQWlCckUsU0FBQ3NFLGVBQVlDLE9BQVMsRUFDekNILEVBQUFwRSxTQUFBZ0IsZUFBQSxRQUFBLEVBQ0Y0QyxFQUFBNUQsU0FBQWdCLGVBQUEsT0FBQSxFQUdNd0QsRUFBUUYsU0FBVWpFLGlCQUFBLE1BQUEsRUFDdEJrRCxFQUFtQnZELFNBQUN5RSxpQkFBSSxnQkFBQSxFQUYxQixTQTJCRWxFLEVBQXlCK0QsRUFBQUMsR0FDM0IsSUFBQUMsRUFBQUYsRUFFQWYsRUFBU21CLFFBQUFBLFNBQUFBLEdBQUFBLE9BQ1BiLEVBQU9LLGlCQUFRLFFBQVFNLFdBQ0wsU0FBWkcsRUFBQUEsSUFBd0JILElBQUFGLEdBQzFCTSxFQUFNdkQsRUFBYyxFQUNyQm1ELENBQU0sSUFDa0IsU0FBakJuRCxFQUFVTyxJQUFvQjBDLEVBQWJFLEVBQ3pCQSxDQUFBLEdBQ0EsVUFBQUMsRUFBQUksSUFBQUwsRUFBQUQsRUFDSkMsQ0FBQSxHQUdFTSxFQUFBQSxFQUlDSixFQUFBRixDQUFBLEVBQ0hPLEVBQUFQLENBQUEsQ0E5QkksQ0FBQyxDQUFDLENBZ0NOLENBQ0FRLENBN0JBLFNBNkJ3RGIsRUFBd0JjLEdBQUFoQyxFQUFDaUIsUUFBQSxTQUFBZ0IsR0FBQSxPQUFBQSxFQUFBQyxrQkFBQTlELFVBQUFDLElBQUEsWUFBQSxDQUFBLENBQUEsRUFBQytCLEVBQUFhLFFBQUEsU0FBQWdCLEdBQUEsT0FFbEZKLEVBQUFBLGtCQUF3QnpELFVBQUMrRCxPQUFXQyxvQkFBYyxDQUFBLENBQUEsRUExQmhEbEYsRUE0QkdxRSxVQUFRYSxJQUFBQSxnQkFBaUJYLEVBQzVCTyxFQUFFNUQsVUFBQUMsSUFBQSxpQkFBQSxFQUNIZixFQUFBYyxVQUFBQyxJQUFBLGdCQUFBLENBRUR0QixDQTNCQSxTQWdDSXlELEVBQWtCa0IsR0EvQnBCZCxFQStCNEJLLFFBQUtvQixTQUFBQSxFQUFRakUsR0FBb0NzRCxJQUFBSCxHQUMzRXJFLEVBQUtrQixVQUFVTyxJQUFPLFlBQUEsRUFBQW1ELEVBQWlCUCxDQUFBLEdBRXZDQSxFQUFRbkQsVUFBQ08sT0FBQSxZQUFBLENBNUJYLENBQUMsQ0FDSCxDQStCQSxTQUFFbUQsRUFBQUosR0E1QkFHLEVBQWdCWixRQUFRLFNBQUNrQixFQUFXWixHQUFLLE9BOEIzQ0csSUFBQUgsRUE1QlFZLEVBQVUvRCxVQUFVTyxPQUFPLG9CQUFvQixFQThCakQyRCxFQUFXbEUsVUFBSW1FLElBQUFBLG9CQUFzQkMsQ0FBQUEsQ0FDekNBLENBNUJGLENBR0FULEVBNkJJZCxRQUFBLFNBQUF3QixHQUFBLE9BQUFBLEVBQUEvQyxpQkFBQSxRQUFBLFdBdEdKLElBNEJzQitDLEVBQ05uQixhQURNbUIsRUEwRWxCQSxHQXpFSWxCLElBeEJKTCxFQTRCb0J3QixDQUFZLEVBQUluQixFQUh6QixFQUNFQyxDQUV5QyxHQUMzQyxZQUFGaUIsRUFBRWIsSUF6QlhWLEVBNEJFUixDQUFBLEVBM0JGVSxFQXlCUyxFQUNHQyxDQUVlLEdBQ3pCUyxjQUFBQSxFQUFBQSxJQUdOWixFQUFBQyxDQUFBLEVBRUFDLEVBSk0sRUFDSCxFQUdzQyxHQUNyQixhQUFSSCxFQUFBQSxLQUNWYixFQUFvQmEsQ0FBUSxFQUFTRyxFQURJYyxHQUE4QyxFQUUxRDlELEVBdUQzQixDQUFBLENBQUEsQ0FBQSxFQUdKeUQsRUFBTWMsUUFBa0IsU0FBRzVGLEVBQVNLLEdBQWdCLE9BQ3BEK0UsRUFBTVMsaUJBQXNCN0YsUUFBU0ssV0FDTkwsRUFBekI4RixNQUFBQSxDQUFrRCxDQUN4REYsQ0FBQUEsQ0FBQUEsQ0E3QkEsRUE4QkFDLFNBQUFBLGlCQUFvQjNCLFFBQVEsU0FBQXRCLElBQTZCQSxFQUFBbUQsT0FBQTFFLFVBQUFtQyxTQUFBLFNBQUEsR0FBQXJELEVBQUFrQixVQUFBbUMsU0FBQSxnQkFBQSxHQUN6RHNDLEVBQUFBLFVBQUFBLFNBQXVCNUIsVUFBUSxLQUE2QlQsRUFBQVMsUUFBQSxTQUFBb0IsR0FBQSxPQUFBQSxFQUFBakUsVUFBQU8sT0FBQSxpQkFBQSxDQUFBLENBQUEsRUFDN0R6QixFQUFBa0IsVUFBQU8sT0FBQSxnQkFBQSxFQXZCS3JCLEVBQVdjLFVBQVVPLE9BQU8sZ0JBQWdCLEVBQzVDNEMsTUFBUSxFQUVSdkIsRUFBVWlCLFFBQVEsU0FBQ2dCLEdBQVEsT0FBS0EsRUFBU0Msa0JBQWtCOUQsVUFBVUMsSUFBSSxZQUFZLENBQUMsQ0FBQSxFQUUxRixDQUFDLEVBSUQsSUFBTWlFLEVBQVcsSUFBSUMscUJBQXFCLFNBQUNDLEdBQ3pDQSxFQUFRdkIsUUFBUSxTQUFDOEIsR0FDWEEsRUFBTUMsZ0JBQ1JELEVBQU1ELE9BQU8xRSxVQUFVQyxJQUFJLE1BQU0sQ0FFckMsQ0FBQyxDQUNILENBQUMsRUFFS3NFLEVBQXFCNUYsU0FBU0ssaUJBQWlCLFNBQVMsRUFDeER3RixFQUFzQjdGLFNBQVNLLGlCQUFpQixlQUFlLEVBQy9EeUYsRUFBeUI5RixTQUFTSyxpQkFBaUIsa0JBQWtCLEVBQzNFdUYsRUFBbUIxQixRQUFRLFNBQUN6QyxHQUFFLE9BQUs4RCxFQUFTVyxRQUFRekUsQ0FBRSxDQUFDLENBQUEsRUFDdkRvRSxFQUFvQjNCLFFBQVEsU0FBQ3pDLEdBQUUsT0FBSzhELEVBQVNXLFFBQVF6RSxDQUFFLENBQUMsQ0FBQSxFQUN4RHFFLEVBQXVCNUIsUUFBUSxTQUFDekMsR0FBRSxPQUFLOEQsRUFBU1csUUFBUXpFLENBQUUsQ0FBQyxDQUFBLENBQzdEIiwiZmlsZSI6Im1haW4ubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsid2luZG93Lm9ubG9hZCA9IGZ1bmN0aW9uICgpIHtcclxuICAvL3NlbGVjdG9yc1xyXG4gIGNvbnN0IGJvZHkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmJvZHlcIik7XHJcbiAgY29uc3QgYnVyZ2VyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5idXJnZXJcIik7XHJcbiAgY29uc3QgYWxsQnVyZ2VyQmFycyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuYnVyZ2VyX19iYXJzXCIpO1xyXG4gIGNvbnN0IG5hdk1vYmlsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubmF2XCIpO1xyXG4gIGNvbnN0IG5hdkRlc2t0b3AgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm5hdi1kZXNrdG9wXCIpO1xyXG4gIGNvbnN0IGFsbE5hdkxpbmtzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5uYXYtbW9iaWxlX19saW5rXCIpO1xyXG4gIGNvbnN0IGFycm93VXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmFycm93dXBcIik7XHJcblxyXG4gIGNvbnN0IGZvb3RlckRhdGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmZvb3Rlcl9fYm90dG9tLS1kYXRlXCIpO1xyXG4gIGNvbnN0IGFsbFNlY3Rpb25zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5zZWN0aW9uXCIpO1xyXG4gIGNvbnN0IGVycm9yTXNnID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5lcnJvci1tc2dcIik7XHJcbiAgY29uc3QgZXJyb3JNc2dUZWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmVycm9yLW1zZy10ZWxcIik7XHJcbiAgY29uc3QgZW1haWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmVtYWlsXCIpO1xyXG4gIGNvbnN0IHBob25lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi50ZWxOdW1cIik7XHJcbiAgY29uc3Qgc3VibWl0QnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5zdWJtaXRcIik7XHJcblxyXG4gIGNvbnN0IG1zZ1N0YXR1cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubXNnLXN0YXR1c1wiKTtcclxuXHJcbiAgLy9jb29raWVBbGVydFxyXG5cclxuICBjb25zdCBjb25zZW50Qm94ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjb29raWUtYm94XCIpO1xyXG4gIGNvbnN0IGFjY2VwdEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY29va2llLWJveF9fYnV0dG9ucy0tYWNjZXB0XCIpO1xyXG4gIGNvbnN0IHJlamVjdEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY29va2llLWJveF9fYnV0dG9ucy0tcmVqZWN0XCIpO1xyXG5cclxuICBhY2NlcHRCdG4ub25jbGljayA9ICgpID0+IHtcclxuICAgIGRvY3VtZW50LmNvb2tpZSA9IFwiQ29va2llQnk9c2Fsb25iZWF0YS5ldTsgbWF4LWFnZT1cIiArIDYwICogNjAgKiAyNDtcclxuICAgIGlmIChkb2N1bWVudC5jb29raWUpIHtcclxuICAgICAgY29uc2VudEJveC5jbGFzc0xpc3QuYWRkKFwiaGlkZVwiKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGFsZXJ0KFxyXG4gICAgICAgIFwiQ29va2llIGNhbid0IGJlIHNldCEgUGxlYXNlXCIgK1xyXG4gICAgICAgICAgXCIgdW5ibG9jayB0aGlzIHNpdGUgZnJvbSB0aGUgY29va2llXCIgK1xyXG4gICAgICAgICAgXCIgc2V0dGluZyBvZiB5b3VyIGJyb3dzZXIuXCJcclxuICAgICAgKTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICByZWplY3RCdG4ub25jbGljayA9ICgpID0+IHtcclxuICAgIGFsZXJ0KFwiQ29va2llcyByZWplY3RlZC4gU29tZSBmdW5jdGlvbmFsaXR5IG1heSBiZSBsaW1pdGVkLlwiKTtcclxuICAgIGNvbnNlbnRCb3guY2xhc3NMaXN0LmFkZChcImhpZGVcIik7XHJcbiAgfTtcclxuXHJcbiAgbGV0IGNoZWNrQ29va2llID0gZG9jdW1lbnQuY29va2llLmluZGV4T2YoXCJDb29raWVCeT1HZWVrc0ZvckdlZWtzXCIpO1xyXG4gIGNoZWNrQ29va2llICE9PSAtMSA/IGNvbnNlbnRCb3guY2xhc3NMaXN0LmFkZChcImhpZGVcIikgOiBjb25zZW50Qm94LmNsYXNzTGlzdC5yZW1vdmUoXCJoaWRlXCIpO1xyXG5cclxuICAvL3NlbmQgbWFpbFxyXG5cclxuICBpZiAoZG9jdW1lbnQubG9jYXRpb24uc2VhcmNoID09PSBcIj9tYWlsX3N0YXR1cz1zZW50XCIpIHtcclxuICAgIG1zZ1N0YXR1cy5jbGFzc0xpc3QuYWRkKFwic3VjY2VzXCIpO1xyXG4gICAgbXNnU3RhdHVzLnRleHRDb250ZW50ID0gXCJXaWFkb21vxZvEhyB3eXPFgmFuYSFcIjtcclxuICB9XHJcbiAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICBtc2dTdGF0dXMuY2xhc3NMaXN0LnJlbW92ZShcInN1Y2Nlc1wiKTtcclxuICB9LCAzMDAwKTtcclxuXHJcbiAgaWYgKGRvY3VtZW50LmxvY2F0aW9uLnNlYXJjaCA9PT0gXCI/bWFpbF9zdGF0dXM9ZXJyb3JcIikge1xyXG4gICAgbXNnU3RhdHVzLmNsYXNzTGlzdC5hZGQoXCJlcnJvclwiKTtcclxuICAgIG1zZ1N0YXR1cy50ZXh0Q29udGVudCA9IFwiYsWCxIVkLCBzcHLDs2J1aiBwb25vd25pZVwiO1xyXG4gIH1cclxuICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgIG1zZ1N0YXR1cy5jbGFzc0xpc3QucmVtb3ZlKFwiZXJyb3JcIik7XHJcbiAgfSwgMzAwMCk7XHJcblxyXG4gICAgLy8gZm9ybSB2YWxpZGF0b3JcclxuXHJcbiAgICBjb25zdCBjaGVja1Bob25lID0gKHBob25lKSA9PiB7XHJcbiAgICAgIGNvbnN0IHZhbGlkTnVtID0gL15bMC05XFwrXXs4LDEzfSQvO1xyXG4gIFxyXG4gICAgICBpZiAodmFsaWROdW0udGVzdCh0ZWxOdW0udmFsdWUpKSB7XHJcbiAgICAgICAgY2xlYXJFcnJvcihlcnJvck1zZ1RlbCk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgc2hvd0Vycm9yKGVycm9yTXNnVGVsLCBcIndwaXN6IHBvcHJhd255IG5yIHRlbC5cIik7XHJcbiAgICAgIH1cclxuICAgIH07XHJcbiAgXHJcbiAgICBjb25zdCBjaGVja01haWwgPSAoZW1haWwpID0+IHtcclxuICAgICAgY29uc3QgdmFsaWRNYWlsID0gL15bXFx3LVxcLl0rQChbXFx3LV0rXFwuKStbXFx3LV17Miw0fSQvO1xyXG4gIFxyXG4gICAgICBpZiAodmFsaWRNYWlsLnRlc3QoZW1haWwudmFsdWUpKSB7XHJcbiAgICAgICAgY2xlYXJFcnJvcihlcnJvck1zZyk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgc2hvd0Vycm9yKGVycm9yTXNnLCBcIndwaXN6IHBvcHJhd255IGFkcmVzIGVtYWlsLlwiKTtcclxuICAgICAgfVxyXG4gICAgfTtcclxuICAgIGNvbnN0IGNsZWFyRXJyb3IgPSAoZWwpID0+IHtcclxuICAgICAgY29uc3QgZm9ybUJveCA9IGVsO1xyXG4gICAgICBmb3JtQm94LmNsYXNzTGlzdC5yZW1vdmUoXCJlcnJvci1kaXNwbGF5XCIpO1xyXG4gICAgICBmb3JtQm94LnRleHRDb250ZW50ID0gXCJcIjtcclxuICAgIH07XHJcbiAgXHJcbiAgICBjb25zdCBzaG93RXJyb3IgPSAoaW5wdXQsIG1zZykgPT4ge1xyXG4gICAgICBjb25zdCBmb3JtQm94ID0gaW5wdXQ7XHJcbiAgICAgIGZvcm1Cb3guY2xhc3NMaXN0LmFkZChcImVycm9yLWRpc3BsYXlcIik7XHJcbiAgICAgIGZvcm1Cb3gudGV4dENvbnRlbnQgPSBtc2c7XHJcbiAgICB9O1xyXG4gIFxyXG4gICAgLy8gZXZlbnQgbGlzdGVuZXJzXHJcbiAgICBzdWJtaXRCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChlKSA9PiB7XHJcbiAgIFxyXG4gICAgICBjaGVja01haWwoZW1haWwpO1xyXG4gICAgICBjaGVja1Bob25lKHBob25lKTtcclxuICAgIH0pO1xyXG4gIFxyXG5cclxuICAvLyBmb290ZXJcclxuICBjb25zdCBjdXJyZW50RGF0ZSA9IG5ldyBEYXRlKCk7XHJcbiAgY29uc3QgY3VycmVudFllYXIgPSBjdXJyZW50RGF0ZS5nZXRGdWxsWWVhcigpO1xyXG5cclxuICBjb25zdCBoYW5kbGVGb290ZXJZZWFyID0gKCkgPT4ge1xyXG4gICAgZm9vdGVyRGF0ZS50ZXh0Q29udGVudCA9IGN1cnJlbnRZZWFyLnRvU3RyaW5nKCk7XHJcbiAgfTtcclxuXHJcbiAgaGFuZGxlRm9vdGVyWWVhcigpO1xyXG4gIC8vIE5BVlxyXG5cclxuICBjb25zdCBoYW5kbGVOYXYgPSAoKSA9PiB7XHJcbiAgICBuYXZNb2JpbGUuY2xhc3NMaXN0LnRvZ2dsZShcImFjdGl2ZVwiKTtcclxuICAgIGJ1cmdlci5jbGFzc0xpc3QudG9nZ2xlKFwiYWN0aXZlXCIpO1xyXG4gICAgYm9keS5jbGFzc0xpc3QudG9nZ2xlKFwiZGlzYWJsZS1zY3JvbGxcIik7XHJcblxyXG4gICAgYWxsTmF2TGlua3MuZm9yRWFjaCgobGluaykgPT4ge1xyXG4gICAgICBsaW5rLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgICAgbmF2TW9iaWxlLmNsYXNzTGlzdC5yZW1vdmUoXCJhY3RpdmVcIik7XHJcbiAgICAgICAgYnVyZ2VyLmNsYXNzTGlzdC5yZW1vdmUoXCJhY3RpdmVcIik7XHJcbiAgICAgICAgYm9keS5jbGFzc0xpc3QucmVtb3ZlKFwiZGlzYWJsZS1zY3JvbGxcIik7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfTtcclxuICBjb25zdCBoYW5kbGVBcnJvd1VwID0gKCkgPT4ge1xyXG4gICAgY29uc3QgY3VycmVudFNlY3Rpb24gPSB3aW5kb3cuc2Nyb2xsWTtcclxuICAgIGlmIChjdXJyZW50U2VjdGlvbiA+IDQ4MCkge1xyXG4gICAgICBhcnJvd1VwLmNsYXNzTGlzdC5hZGQoXCJhY3RpdmVcIik7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBhcnJvd1VwLmNsYXNzTGlzdC5yZW1vdmUoXCJhY3RpdmVcIik7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgY29uc3QgaGFuZGxlT2JzZXJ2ZXIgPSAoKSA9PiB7XHJcbiAgICBjb25zdCBjdXJyZW50U2VjdGlvbiA9IHdpbmRvdy5zY3JvbGxZO1xyXG5cclxuICAgIGFsbFNlY3Rpb25zLmZvckVhY2goKHNlY3Rpb24pID0+IHtcclxuICAgICAgaWYgKFxyXG4gICAgICAgICFzZWN0aW9uLmNsYXNzTGlzdC5jb250YWlucyhcIndoaXRlLXNlY3Rpb25cIikgJiZcclxuICAgICAgICBzZWN0aW9uLm9mZnNldFRvcCA8PSBjdXJyZW50U2VjdGlvbiArIDMwXHJcbiAgICAgICkge1xyXG4gICAgICAgIGFsbEJ1cmdlckJhcnMuZm9yRWFjaCgoYmFyKSA9PiBiYXIuY2xhc3NMaXN0LmFkZChcIndoaXRlLWJ1cmdlclwiKSk7XHJcbiAgICAgIH0gZWxzZSBpZiAoXHJcbiAgICAgICAgc2VjdGlvbi5jbGFzc0xpc3QuY29udGFpbnMoXCJ3aGl0ZS1zZWN0aW9uXCIpICYmXHJcbiAgICAgICAgc2VjdGlvbi5vZmZzZXRUb3AgPD0gY3VycmVudFNlY3Rpb24gKyAxMDBcclxuICAgICAgKSB7XHJcbiAgICAgICAgYWxsQnVyZ2VyQmFycy5mb3JFYWNoKChiYXIpID0+IGJhci5jbGFzc0xpc3QucmVtb3ZlKFwid2hpdGUtYnVyZ2VyXCIpKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICBoYW5kbGVBcnJvd1VwKCk7XHJcbiAgfTtcclxuXHJcbiAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJzY3JvbGxcIiwgaGFuZGxlT2JzZXJ2ZXIpO1xyXG4gIGJ1cmdlci5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgaGFuZGxlTmF2KTtcclxuXHJcblxyXG4gIC8vIC0tLS0tLS0tLS0tLS0gR0FMTEVSWSAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuICBjb25zdCBjYXJvdXNlbHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmNhcm91c2VsXCIpO1xyXG4gIGNvbnN0IHRodW1ibmFpbHNDYXJvdXNlbHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmNhcm91c2VsLXRodW1ibmFpbHNcIik7XHJcbiAgY29uc3Qgd29ya0J0bnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLndvcmstYnRuXCIpO1xyXG5cclxuICBjb25zdCBhcnJvd0ljb25zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5hcnJvd1wiKTtcclxuICBjb25zdCBnYWxsZXJpZXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmdhbGxlcnlcIik7XHJcbiAgY29uc3QgaGFpcmN1dEdhbGxlcnkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImhhaXJjdXRcIik7XHJcbiAgY29uc3QgY29sb3JHYWxsZXJ5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjb2xvclwiKTtcclxuICBjb25zdCBiYXJiZXJHYWxsZXJ5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJiYXJiZXJcIik7XHJcbiAgY29uc3Qgc3R5bGVHYWxsZXJ5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzdHlsZVwiKTtcclxuXHJcbiAgY29uc3QgaW1hZ2VzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5pbWdcIik7XHJcbiAgY29uc3QgdGh1bWJuYWlsSW1hZ2VzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi50aHVtYm5haWwtaW1nXCIpO1xyXG5cclxuICBmdW5jdGlvbiBoYW5kbGVXb3JrQnRuKGJ0bikge1xyXG4gICAgaWYgKGJ0bi5pZCA9PT0gXCJidG4tb25lXCIpIHtcclxuICAgICAgbGV0IHN0YXJ0SW5kZXggPSAwO1xyXG4gICAgICBsZXQgZW5kSW5kZXggPSAzO1xyXG5cclxuICAgICAgaGFuZGxlRGlzcGxheUdhbGxlcnkoaGFpcmN1dEdhbGxlcnkpLCBoYW5kbGVBcnJvd0FjdGlvbihzdGFydEluZGV4LCBlbmRJbmRleCk7XHJcbiAgICB9IGVsc2UgaWYgKGJ0bi5pZCA9PT0gXCJidG4tdHdvXCIpIHtcclxuICAgICAgbGV0IHN0YXJ0SW5kZXggPSA0O1xyXG4gICAgICBsZXQgZW5kSW5kZXggPSA3O1xyXG4gICAgICBoYW5kbGVEaXNwbGF5R2FsbGVyeShjb2xvckdhbGxlcnkpO1xyXG4gICAgICBoYW5kbGVBcnJvd0FjdGlvbihzdGFydEluZGV4LCBlbmRJbmRleCk7XHJcbiAgICB9IGVsc2UgaWYgKGJ0bi5pZCA9PT0gXCJidG4tdGhyZWVcIikge1xyXG4gICAgICBsZXQgc3RhcnRJbmRleCA9IDg7XHJcbiAgICAgIGxldCBlbmRJbmRleCA9IDExO1xyXG4gICAgICBoYW5kbGVEaXNwbGF5R2FsbGVyeShiYXJiZXJHYWxsZXJ5KTtcclxuICAgICAgaGFuZGxlQXJyb3dBY3Rpb24oc3RhcnRJbmRleCwgZW5kSW5kZXgpO1xyXG4gICAgfSBlbHNlIGlmIChidG4uaWQgPT09IFwiYnRuLWZvdXJcIikge1xyXG4gICAgICBsZXQgc3RhcnRJbmRleCA9IDEyO1xyXG4gICAgICBsZXQgZW5kSW5kZXggPSAxNTtcclxuICAgICAgaGFuZGxlRGlzcGxheUdhbGxlcnkoc3R5bGVHYWxsZXJ5KTtcclxuICAgICAgaGFuZGxlQXJyb3dBY3Rpb24oc3RhcnRJbmRleCwgZW5kSW5kZXgpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gaGFuZGxlQXJyb3dBY3Rpb24oc3RhcnRJbmRleCwgZW5kSW5kZXgpIHtcclxuICAgIGxldCBpbmRleCA9IHN0YXJ0SW5kZXg7XHJcbiAgICBhcnJvd0ljb25zLmZvckVhY2goKGljb24pID0+XHJcbiAgICAgIGljb24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgICBpZiAoaWNvbi5pZCA9PT0gXCJsZWZ0XCIgJiYgaW5kZXggPT09IHN0YXJ0SW5kZXgpIHtcclxuICAgICAgICAgIGluZGV4ID0gZW5kSW5kZXggKyAxO1xyXG4gICAgICAgICAgaW5kZXgtLTtcclxuICAgICAgICB9IGVsc2UgaWYgKGljb24uaWQgPT09IFwibGVmdFwiICYmIGluZGV4ID4gc3RhcnRJbmRleCkge1xyXG4gICAgICAgICAgaW5kZXgtLTtcclxuICAgICAgICB9IGVsc2UgaWYgKGljb24uaWQgPT09IFwicmlnaHRcIiAmJiBpbmRleCA8IGVuZEluZGV4KSB7XHJcbiAgICAgICAgICBpbmRleCsrO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBpbmRleCA9IHN0YXJ0SW5kZXg7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGhhbmRsZURpc3BsYXlJbWFnZShpbmRleCk7XHJcbiAgICAgICAgaGFuZGxlQWN0aXZhdGVUaHVtYm5haWwoaW5kZXgpO1xyXG4gICAgICB9KVxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGhhbmRsZURpc3BsYXlHYWxsZXJ5KGdhbGxlcnlUeXBlKSB7XHJcbiAgICBjYXJvdXNlbHMuZm9yRWFjaCgoY2Fyb3VzZWwpID0+IGNhcm91c2VsLmZpcnN0RWxlbWVudENoaWxkLmNsYXNzTGlzdC5hZGQoXCJzaG93LWltYWdlXCIpKTtcclxuICAgIHRodW1ibmFpbHNDYXJvdXNlbHMuZm9yRWFjaCgoY2Fyb3VzZWwpID0+XHJcbiAgICAgIGNhcm91c2VsLmZpcnN0RWxlbWVudENoaWxkLmNsYXNzTGlzdC5yZW1vdmUoXCJ0aHVtYm5haWwtZGlzYWJsZWRcIilcclxuICAgICk7XHJcbiAgICBib2R5LmNsYXNzTGlzdC5hZGQoXCJkaXNhYmxlLXNjcm9sbFwiKTtcclxuICAgIGdhbGxlcnlUeXBlLmNsYXNzTGlzdC5hZGQoXCJkaXNwbGF5LWdhbGxlcnlcIik7XHJcbiAgICBuYXZEZXNrdG9wLmNsYXNzTGlzdC5hZGQoXCJuYXYtdHJhbnNpdGlvblwiKTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGhhbmRsZURpc3BsYXlJbWFnZShjdXJyZW50SW5kZXgpIHtcclxuICAgIGltYWdlcy5mb3JFYWNoKChpbWFnZSwgaW5kZXgpID0+IHtcclxuICAgICAgaWYgKGN1cnJlbnRJbmRleCA9PT0gaW5kZXgpIHtcclxuICAgICAgICBpbWFnZS5jbGFzc0xpc3QuYWRkKFwic2hvdy1pbWFnZVwiKSwgaGFuZGxlQWN0aXZhdGVUaHVtYm5haWwoaW5kZXgpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGltYWdlLmNsYXNzTGlzdC5yZW1vdmUoXCJzaG93LWltYWdlXCIpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGhhbmRsZUFjdGl2YXRlVGh1bWJuYWlsKGN1cnJlbnRJbmRleCkge1xyXG4gICAgdGh1bWJuYWlsSW1hZ2VzLmZvckVhY2goKHRodW1ibmFpbCwgaW5kZXgpID0+XHJcbiAgICAgIGN1cnJlbnRJbmRleCA9PT0gaW5kZXhcclxuICAgICAgICA/IHRodW1ibmFpbC5jbGFzc0xpc3QucmVtb3ZlKFwidGh1bWJuYWlsLWRpc2FibGVkXCIpXHJcbiAgICAgICAgOiB0aHVtYm5haWwuY2xhc3NMaXN0LmFkZChcInRodW1ibmFpbC1kaXNhYmxlZFwiKVxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIC8vIGV2ZW50IGxpc3RlbmVycyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgd29ya0J0bnMuZm9yRWFjaCgoYnRuKSA9PiBidG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IGhhbmRsZVdvcmtCdG4oYnRuKSkpO1xyXG5cclxuICB0aHVtYm5haWxJbWFnZXMuZm9yRWFjaCgodGh1bWJuYWlsLCB0aHVtYm5haWxJbmRleCkgPT5cclxuICAgIHRodW1ibmFpbC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICAoaW5kZXggPSB0aHVtYm5haWxJbmRleCksIGhhbmRsZURpc3BsYXlJbWFnZShpbmRleCk7XHJcbiAgICB9KVxyXG4gICk7XHJcblxyXG4gIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZSkgPT4ge1xyXG4gICAgaWYgKFxyXG4gICAgICAoZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwiZ2FsbGVyeVwiKSAmJiBib2R5LmNsYXNzTGlzdC5jb250YWlucyhcImRpc2FibGUtc2Nyb2xsXCIpKSB8fFxyXG4gICAgICBib2R5LmNsYXNzTGlzdC5jb250YWlucyhcImNhcm91c2VsXCIpXHJcbiAgICApIHtcclxuICAgICAgZ2FsbGVyaWVzLmZvckVhY2goKGdhbGxlcnkpID0+IGdhbGxlcnkuY2xhc3NMaXN0LnJlbW92ZShcImRpc3BsYXktZ2FsbGVyeVwiKSk7XHJcbiAgICAgIGJvZHkuY2xhc3NMaXN0LnJlbW92ZShcImRpc2FibGUtc2Nyb2xsXCIpO1xyXG4gICAgICBuYXZEZXNrdG9wLmNsYXNzTGlzdC5yZW1vdmUoXCJuYXYtdHJhbnNpdGlvblwiKTtcclxuICAgICAgaW5kZXggPSAwO1xyXG5cclxuICAgICAgY2Fyb3VzZWxzLmZvckVhY2goKGNhcm91c2VsKSA9PiBjYXJvdXNlbC5maXJzdEVsZW1lbnRDaGlsZC5jbGFzc0xpc3QuYWRkKFwic2hvdy1pbWFnZVwiKSk7XHJcbiAgICB9XHJcbiAgfSk7XHJcblxyXG4gIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tZmFkZUlOIGFuaW0gLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4gIGNvbnN0IG9ic2VydmVyID0gbmV3IEludGVyc2VjdGlvbk9ic2VydmVyKChlbnRyaWVzKSA9PiB7XHJcbiAgICBlbnRyaWVzLmZvckVhY2goKGVudHJ5KSA9PiB7XHJcbiAgICAgIGlmIChlbnRyeS5pc0ludGVyc2VjdGluZykge1xyXG4gICAgICAgIGVudHJ5LnRhcmdldC5jbGFzc0xpc3QuYWRkKFwic2hvd1wiKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gIGNvbnN0IGhpZGRlbkVsZW1lbnRzTGVmdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuaGlkZGVuXCIpO1xyXG4gIGNvbnN0IGhpZGRlbkVsZW1lbnRzUmlnaHQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmhpZGRlbi1yaWdodFwiKTtcclxuICBjb25zdCBoaWRkZW5WYW5pc2hlZEVsZW1lbnRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5oaWRkZW4tdmFuaXNoZWRcIik7XHJcbiAgaGlkZGVuRWxlbWVudHNMZWZ0LmZvckVhY2goKGVsKSA9PiBvYnNlcnZlci5vYnNlcnZlKGVsKSk7XHJcbiAgaGlkZGVuRWxlbWVudHNSaWdodC5mb3JFYWNoKChlbCkgPT4gb2JzZXJ2ZXIub2JzZXJ2ZShlbCkpO1xyXG4gIGhpZGRlblZhbmlzaGVkRWxlbWVudHMuZm9yRWFjaCgoZWwpID0+IG9ic2VydmVyLm9ic2VydmUoZWwpKTtcclxufTtcclxuIl19
