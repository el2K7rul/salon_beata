window.onload=function(){var t=document.querySelector(".body"),o=document.querySelector(".burger"),n=document.querySelectorAll(".burger__bars"),c=document.querySelector(".nav"),s=document.querySelector(".nav-desktop"),e=document.querySelectorAll(".nav-mobile__link"),r=document.querySelector(".arrowup"),i=document.querySelector(".footer__bottom--date"),l=document.querySelectorAll(".section"),a=document.querySelector(".error-msg"),u=document.querySelector(".error-msg-tel"),d=document.querySelector(".email"),m=(document.querySelector(".telNum"),document.querySelector(".submit")),f=document.querySelector(".msg-status"),h=document.getElementById("cookie-box"),y=document.querySelector(".cookie-box__buttons--accept"),v=document.querySelector(".cookie-box__buttons--reject");y.onclick=function(){document.cookie="CookieBy=salonbeata.eu; max-age=86400",document.cookie?h.classList.add("hide"):alert("Cookie can't be set! Please unblock this site from the cookie setting of your browser.")},v.onclick=function(){alert("Pliki Cookies odrzucone. Funkcjonalność strony może zostać ograniczona."),h.classList.add("hide")};function L(e){e.classList.remove("error-display"),e.textContent=""}function b(e,t){e.classList.add("error-display"),e.textContent=t}-1!==document.cookie.indexOf("CookieBy=GeeksForGeeks")?h.classList.add("hide"):h.classList.remove("hide"),"?mail_status=sent"===document.location.search&&(f.classList.add("succes"),f.textContent="Wiadomość wysłana!"),setTimeout(function(){f.classList.remove("succes")},3e3),"?mail_status=error"===document.location.search&&(f.classList.add("error"),f.textContent="błąd, spróbuj ponownie"),setTimeout(function(){f.classList.remove("error")},3e3);m.addEventListener("click",function(e){/^[\w-\.]+@([\w-]+\.)+[\w-]{2,4}$/.test(d.value)?L(a):b(a,"wpisz poprawny adres email."),/^[0-9\+]{8,13}$/.test(telNum.value)?L(u):b(u,"wpisz poprawny nr tel.")});var y=(new Date).getFullYear(),g=(i.textContent=y.toString(),window.addEventListener("scroll",function(){var t=window.scrollY;l.forEach(function(e){!e.classList.contains("white-section")&&e.offsetTop<=t+30?n.forEach(function(e){return e.classList.add("white-burger")}):e.classList.contains("white-section")&&e.offsetTop<=t+100&&n.forEach(function(e){return e.classList.remove("white-burger")})}),480<window.scrollY?r.classList.add("active"):r.classList.remove("active")}),o.addEventListener("click",function(){c.classList.toggle("active"),o.classList.toggle("active"),t.classList.toggle("disable-scroll"),e.forEach(function(e){e.addEventListener("click",function(){c.classList.remove("active"),o.classList.remove("active"),t.classList.remove("disable-scroll")})})}),document.querySelectorAll(".carousel")),w=document.querySelectorAll(".carousel-thumbnails"),v=document.querySelectorAll(".work-btn"),E=document.querySelectorAll(".arrow"),k=document.querySelectorAll(".gallery"),S=document.getElementById("haircut"),q=document.getElementById("color"),p=document.getElementById("barber"),A=document.getElementById("style"),x=document.querySelectorAll(".img"),C=document.querySelectorAll(".thumbnail-img");function _(t,o){var n=t;E.forEach(function(e){return e.addEventListener("click",function(){"left"===e.id&&n===t?(n=o+1,n--):"left"===e.id&&t<n?n--:"right"===e.id&&n<o?n++:n=t,I(n),z(n)})})}function B(e){g.forEach(function(e){return e.firstElementChild.classList.add("show-image")}),w.forEach(function(e){return e.firstElementChild.classList.remove("thumbnail-disabled")}),t.classList.add("disable-scroll"),e.classList.add("display-gallery"),s.classList.add("nav-transition")}function I(o){x.forEach(function(e,t){o===t?(e.classList.add("show-image"),z(t)):e.classList.remove("show-image")})}function z(o){C.forEach(function(e,t){return o===t?e.classList.remove("thumbnail-disabled"):e.classList.add("thumbnail-disabled")})}v.forEach(function(t){return t.addEventListener("click",function(){var e;"btn-one"===(e=t).id?(B(S),_(0,3)):"btn-two"===e.id?(B(q),_(4,7)):"btn-three"===e.id?(B(p),_(8,11)):"btn-four"===e.id&&(B(A),_(12,15))})}),C.forEach(function(e,t){return e.addEventListener("click",function(){I(index=t)})}),document.addEventListener("click",function(e){(e.target.classList.contains("gallery")&&t.classList.contains("disable-scroll")||t.classList.contains("carousel"))&&(k.forEach(function(e){return e.classList.remove("display-gallery")}),t.classList.remove("disable-scroll"),s.classList.remove("nav-transition"),index=0,g.forEach(function(e){return e.firstElementChild.classList.add("show-image")}))});var T=new IntersectionObserver(function(e){e.forEach(function(e){e.isIntersecting&&e.target.classList.add("show")})}),m=document.querySelectorAll(".hidden"),i=document.querySelectorAll(".hidden-right"),y=document.querySelectorAll(".hidden-vanished");m.forEach(function(e){return T.observe(e)}),i.forEach(function(e){return T.observe(e)}),y.forEach(function(e){return T.observe(e)})};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsid2luZG93Iiwib25sb2FkIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiYnVyZ2VyIiwiYm9keSIsImFsbEJ1cmdlckJhcnMiLCJxdWVyeVNlbGVjdG9yQWxsIiwibmF2TW9iaWxlIiwibmF2RGVza3RvcCIsImFycm93VXAiLCJmb290ZXJEYXRlIiwiYWxsU2VjdGlvbnMiLCJlcnJvck1zZyIsImVycm9yTXNnVGVsIiwicGhvbmUiLCJtc2dTdGF0dXMiLCJjb25zZW50Qm94IiwiZ2V0RWxlbWVudEJ5SWQiLCJhY2NlcHRCdG4iLCJyZWplY3RCdG4iLCJvbmNsaWNrIiwiY29va2llIiwiY2xhc3NMaXN0IiwiYWRkIiwiYWxlcnQiLCJjbGVhckVycm9yIiwiZWwiLCJjaGVja01haWwiLCJyZW1vdmUiLCJjaGVja1Bob25lIiwic2hvd0Vycm9yIiwiaW5wdXQiLCJtc2ciLCJmb3JtQm94IiwiY3VycmVudFllYXIiLCJjdXJyZW50RGF0ZSIsImdldEZ1bGxZZWFyIiwiaGFuZGxlRm9vdGVyWWVhciIsInRleHRDb250ZW50IiwiaW5kZXhPZiIsImxvY2F0aW9uIiwic2VhcmNoIiwic2V0VGltZW91dCIsInZhbGlkTnVtIiwic3VibWl0QnRuIiwiYWRkRXZlbnRMaXN0ZW5lciIsImUiLCJ0ZXN0IiwiZW1haWwiLCJ2YWx1ZSIsImxpbmsiLCJmb3JFYWNoIiwiRGF0ZSIsImhhbmRsZUFycm93QWN0aW9uIiwidG9TdHJpbmciLCJoYW5kbGVEaXNwbGF5R2FsbGVyeSIsImN1cnJlbnRTZWN0aW9uIiwic2Nyb2xsWSIsInNlY3Rpb24iLCJ0aHVtYm5haWxzQ2Fyb3VzZWxzIiwiY29udGFpbnMiLCJ3b3JrQnRucyIsIm9mZnNldFRvcCIsImdhbGxlcmllcyIsImNvbG9yR2FsbGVyeSIsImJhcmJlckdhbGxlcnkiLCJpbWFnZXMiLCJ0b2dnbGUiLCJhbGxOYXZMaW5rcyIsImhhbmRsZU9ic2VydmVyIiwic3RhcnRJbmRleCIsImVuZEluZGV4IiwiaGFpcmN1dEdhbGxlcnkiLCJzdHlsZUdhbGxlcnkiLCJ0aHVtYm5haWxJbWFnZXMiLCJpbmRleCIsImdhbGxlcnlUeXBlIiwiaWNvbiIsImlkIiwiaGFuZGxlRGlzcGxheUltYWdlIiwiY3VycmVudEluZGV4IiwiaW1hZ2UiLCJoYW5kbGVBY3RpdmF0ZVRodW1ibmFpbCIsImNhcm91c2VsIiwiYnRuIiwiZmlyc3RFbGVtZW50Q2hpbGQiLCJoYW5kbGVXb3JrQnRuIiwidGh1bWJuYWlsSW5kZXgiLCJ0aHVtYm5haWwiLCJ0YXJnZXQiLCJnYWxsZXJ5IiwiZW50cnkiLCJpc0ludGVyc2VjdGluZyIsImFycm93SWNvbnMiLCJjYXJvdXNlbHMiLCJoaWRkZW5FbGVtZW50c0xlZnQiLCJoaWRkZW5FbGVtZW50c1JpZ2h0IiwiaGlkZGVuVmFuaXNoZWRFbGVtZW50cyIsIm9ic2VydmVyIiwiSW50ZXJzZWN0aW9uT2JzZXJ2ZXIiLCJlbnRyaWVzIiwib2JzZXJ2ZSJdLCJtYXBwaW5ncyI6IkFBQUFBLE9BQU9DLE9BQVMsV0FBaEJELElBQU9DLEVBQU1DLFNBQUdDLGNBQVksT0FBQSxFQUMxQkMsRUFBQUYsU0FBQUMsY0FBQSxTQUFBLEVBQ01FLEVBQWdCRixTQUFBQSxpQkFBc0IsZUFBQSxFQUN0Q0MsRUFBU0YsU0FBU0MsY0FBYyxNQUFVLEVBQzFDRyxFQUFhSixTQUFXQyxjQUFDSSxjQUFpQixFQUMxQ0MsRUFBWU4sU0FBU0MsaUJBQXFCLG1CQUFBLEVBQzFDTSxFQUFVUCxTQUFXQyxjQUFjLFVBQUMsRUFFcENPLEVBQVVSLFNBQVNDLGNBQWMsdUJBQVcsRUFFNUNRLEVBQWFULFNBQVNDLGlCQUFjLFVBQUEsRUFDcENTLEVBQVdWLFNBQVdDLGNBQUNJLFlBQWlCLEVBQ3hDTSxFQUFXWCxTQUFTQyxjQUFjLGdCQUFhLEVBQy9DVyxFQUFBQSxTQUFjWixjQUFTQyxRQUFjLEVBRXJDWSxHQURRYixTQUFTQyxjQUFjLFNBQVMsRUFDaENELFNBQVNDLGNBQWMsU0FBVSxHQUd6Q2EsRUFBWWQsU0FBU0MsY0FBYyxhQUFjLEVBSWpEYyxFQUFhZixTQUFTZ0IsZUFBZSxZQUFhLEVBQ2xEQyxFQUFZakIsU0FBU0MsY0FBYyw4QkFBK0IsRUFDbEVpQixFQUFZbEIsU0FBU0MsY0FBYyw4QkFBK0IsRUFFeEVnQixFQUNVRSxRQUFVLFdBQ2xCbkIsU0FBSUEsT0FBU29CLHdDQUNYTCxTQUFXTSxPQUNaTixFQUFNTSxVQUFBQyxJQUFBLE1BQUEsRUFNUEMsTUFDRCx3RkFJQ1IsQ0FHRixFQUxBRyxFQUFVQyxRQUFVLFdBUXBCSSxNQUFBLHlFQUFBLEVBTkVSLEVBQVdNLFVBQVVDLElBQUksTUFBTSxDQVFqQyxFQWlEQSxTQUFBRSxFQUFBQyxHQUVFQyxFQUFBQSxVQUFnQkMsT0FBQSxlQUFBLEVBQ2hCQyxFQUFBQSxZQUFpQixFQUNuQixDQUVBLFNBQUFDLEVBQUFDLEVBQUFDLEdBRUFDLEVBQU1DLFVBQWNDLElBQUFBLGVBQVlDLEVBRWhDSCxFQUFNSSxZQUFtQkwsQ0FaekIsQ0E1Q0EsQ0FBQSxJQURZTSxTQUFjakIsT0FBQWtCLFFBQUEsd0JBQW9CLEVBQzlDdkIsRUFBQU0sVUFBQUMsSUFBQSxNQUFBLEVBQUFQLEVBQUFNLFVBQUFNLE9BQUEsTUFBQSxFQUtpQyxzQkFBN0IzQixTQUFTdUMsU0FBU0MsU0FDcEIxQixFQUFVTyxVQUFVQyxJQUFJLFFBQVEsRUFDaENSLEVBQVV1QixZQUFjLHNCQUUxQkksV0FBVyxXQUNUM0IsRUFBVU8sVUFBVU0sT0FBTyxRQUFRLENBQ3JDLEVBQUcsR0FBSSxFQUVQLHVCQUFBM0IsU0FBQXVDLFNBQUFDLFNBUEUxQixFQUFVTyxVQUFVQyxJQUFJLE9BQU8sRUFTakNSLEVBQU1jLFlBQUFBLDBCQU5OYSxXQVNNQyxXQVJKNUIsRUFTRVUsVUFBV1osT0FBWSxPQUFBLENBUjNCLEVBU0csR0FBQSxFQXlDSCtCLEVBQUFDLGlCQUFBLFFBQUEsU0FBQUMsR0F4QlVSLG1DQUdRUyxLQVFOQyxFQVJObEIsS0FBQUEsRUFDSkwsRUFBYWIsQ0FBUSxFQUVyQnFCLEVBQVFLLEVBQWNOLDZCQUFHLEVBakJQLGtCQUdMcEIsS0FBQUEsT0FBU3FDLEtBQUEsRUFDckJ4QixFQUFNWixDQUFBLEVBRVBpQixFQUFBakIsRUFBQSx3QkFBQSxDQWtCRixDQUFDLEVBdEdIZCxJQXlITW1ELEdBRFVDLElBQVFDLE1BQ0loQixZQUFTLEVBZ0UvQmlCLEdBNUVGM0MsRUFlU1ksWUFBZ0JZLEVBQUNvQixTQUFpQixFQWdDN0N2RCxPQXdCSXdELGlCQUFvQixTQXZCRCxXQW5CckIsSUFBTUMsRUFBaUJ6RCxPQUFPMEQsUUFFOUI5QyxFQUFZd0MsUUFBUSxTQUFDTyxHQXNCakJDLENBQUFBLEVBQUFBLFVBQW1CQyxTQUFXLGVBQUN0RCxHQUMvQnVELEVBQVFDLFdBQVl4RCxFQUFpQixHQUdyQ3lELEVBQVk5RCxRQUFTSyxTQUFBQSxHQUFBQSxPQUFBQSxFQUFnQmdCLFVBQUNDLElBQVcsY0FBQSxDQUFBLENBQUEsRUFFakR5QyxFQUFBQSxVQUFlL0QsU0FBU2dCLGVBQWUsR0FDdkNnRCxFQUFBQSxXQUFnQmhFLEVBQXdCLEtBR3hDaUUsRUFBU2pFLFFBQVNLLFNBQUFBLEdBQUFBLE9BQUFBLEVBQWlCZ0IsVUFBT00sT0FBQSxjQUFBLENBQUEsQ0FBQSxDQUdoRCxDQUFBLEVBekJ5Q04sSUFBckI2QixPQUFRTSxRQW5CeEJoRCxFQW1Cc0VhLFVBQUFDLElBQUEsUUFBQSxFQUV0RWQsRUFBQWEsVUFBQU0sT0FBQSxRQUFBLENBRUosQ0EwQjBDeUIsRUF2QjFDbEQsRUF3QkcwQyxpQkFBcUIsUUFuRGxCVyxXQWRKakQsRUFlVWUsVUFBVUMsT0FBSSxRQUFTLEVBQ2pDcEIsRUFBT21CLFVBQUE2QyxPQUFBLFFBQUEsRUFkUC9ELEVBZUVLLFVBQVFhLE9BQVVNLGdCQUFnQixFQUVyQ3dDLEVBQUFqQixRQUFBLFNBQUFELEdBRUttQixFQUFBQSxpQkFBaUIsUUFBakJBLFdBQ0ViLEVBQUFBLFVBQWlCekQsT0FBTzBELFFBQU8sRUFFckM5QyxFQUFXVyxVQUFTTSxPQUFBLFFBQUM4QixFQUNuQnRELEVBQ0dzRCxVQUFRcEMsT0FBVXNDLGdCQUFTLENBakI5QixDQUFDLENBQ0gsQ0FBQyxDQUNILENBc0RtQyxFQUkvQlAsU0FBa0JpQixpQkFBb0IsV0FBQyxHQUN4Q1gsRUFBcUIxRCxTQUFhSyxpQkFBQSxzQkFBQSxFQUNqQ3VELEVBQUlTLFNBQWNoRSxpQkFBQSxXQUFBLEVBRWxCaUQsRUFBQUEsU0FBcUJVLGlCQUFjLFFBQUEsRUFDbkNaLEVBQUFBLFNBQWtCaUIsaUJBQVlDLFVBQVMsRUFDeENDLEVBQWdCdkUsU0FBS2dCLGVBQVksU0FBQSxFQUNoQytDLEVBQWMvRCxTQUFLZ0IsZUFBQSxPQUFBLEVBQ25CZ0QsRUFBZWhFLFNBQUVnQixlQUFBLFFBQUEsRUFDakJzQyxFQUFBQSxTQUFxQmtCLGVBQWEsT0FBQSxFQUVwQ1AsRUFBQWpFLFNBQUFLLGlCQUFBLE1BQUEsRUFDRm9FLEVBQUF6RSxTQUFBSyxpQkFBQSxnQkFBQSxFQUVBLFNBd0JHK0MsRUFBQWlCLEVBQUFDLEdBQ0RuRSxJQUFJdUUsRUFBQ3JELEVBQ0xzRCxFQUFXekIsUUFBQzdCLFNBQUFBLEdBQVVDLE9BQ3RCZixFQUFBQSxpQkFBd0IsUUFBQyxXQUMzQixTQUFBcUUsRUFBQUMsSUFBQUgsSUFBQUwsR0FFQUssRUFBU0ksRUFBa0JBLEVBQ25CSixDQUFDeEIsSUFDZ0J3QixTQUFqQkssRUFBWUYsSUFBWVIsRUFBQUssRUFDMUJNLENBQU0zRCxHQUNELFVBQUF1RCxFQUFBQyxJQUFBSCxFQUFBSixFQUNMVSxDQUFNM0QsR0FFUnFELEVBQUFMLEVBR0pTLEVBQVNHLENBQUFBLEVBQ1BSLEVBQXdCQyxDQUFBLENBQWlCLENBQUEsQ0FBQSxDQUdVLENBRXJELENBRUEsU0FBQXBCLEVBQUFxQixHQUNBZixFQUFTVixRQUFRLFNBQUFnQyxHQUFDQyxPQUFHRCxFQUFBRSxrQkFBQS9ELFVBQUFDLElBQUEsWUFBQSxDQUFBLENBQUEsRUFBQW9DLEVBQVNkLFFBQWlCLFNBQUFzQyxHQUFTLE9BQUFBLEVBQU1HLGtCQUFrQmhFLFVBQUFNLE9BQUEsb0JBQUEsQ0FBQSxDQUFBLEVBQUV4QixFQUFBa0IsVUFBQUMsSUFBQSxnQkFBQSxFQUVsRm1ELEVBQUFBLFVBQXdCbkQsSUFBQSxpQkFBWWdFLEVBQWMvRSxFQUNoRGdGLFVBQVUzQyxJQUFBQSxnQkFBd0IsQ0F4QnBDLENBMEJJLFNBQ0hrQyxFQUFBQyxHQUVEL0UsRUFBUzRDLFFBQUFBLFNBQUFBLEVBQWdCOEIsR0FFbEJjLElBQWlCN0IsR0FHcEJHLEVBQUFBLFVBQWtCeEMsSUFBQSxZQUFDbUUsRUFBT1IsRUFBQVAsQ0FBQSxHQUFpRE0sRUFBQTNELFVBQUFNLE9BQUEsWUFBQSxDQXpCN0UsQ0FBQyxDQUNILENBRUEsU0EyQitCc0QsRUFBY0csR0ExQjNDWCxFQTBCeUZ2QixRQUFBLFNBQUFxQyxFQUFBYixHQUFBLE9BQ3pGSyxJQUFBTCxFQUNBYSxFQUFBbEUsVUFBQU0sT0FBQSxvQkFBQSxFQXpCTTRELEVBQVVsRSxVQUFVQyxJQUFJLG9CQUFvQixDQUFDLENBMkJyRCxDQXpCQSxDQUdBc0MsRUEwQlE4QixRQUFNQyxTQUFBQSxHQUFBQSxPQUFBQSxFQUFnQi9DLGlCQUFBLFFBQUEsV0FuRzlCLElBeUJjeUIsRUFDRG5CLGFBRENtQixFQTBFZ0JjLEdBekU1QlMsSUFyQkV0QyxFQXlCV2lCLENBQUEsRUFBQW5CLEVBSE5SLEVBQ1EsQ0FFRixHQUNTLFlBQVh1QyxFQUFJUCxJQXRCYnRCLEVBeUJXUyxDQUFBLEVBeEJYWCxFQXNCVyxFQUNFd0IsQ0FFSixHQUNHUCxjQUFIYyxFQUFHZCxJQXRCWmYsRUF5QkUyQixDQUE4QixFQUNoQzdCLEVBSEUsRUFDQTBCLEVBRUEsR0FDSCxhQUFBSyxFQUFBTixLQUlEZ0IsRUFBa0JyQixDQUFDVSxFQUFROUIsRUFIN0IsR0FFU0UsRUFDb0RqQyxFQXNEL0IsQ0FBQSxDQUFBLENBQUEsRUF4QjlCb0QsRUEwQkl2QixRQUFBLFNBQUFxQyxFQUFBRCxHQUFBLE9BQ0ZDLEVBQUUzQyxpQkFBQSxRQUFBLFdBQ0ZrQyxFQUFBSixNQUFBWSxDQUFBLENBRUYsQ0FBQSxDQUFNUSxDQUNOLEVBRUFBLFNBQUFBLGlCQUEwQixRQUFDLFNBQUFqRCxJQUE2QkEsRUFBQTJDLE9BQUFuRSxVQUFBc0MsU0FBQSxTQUFBLEdBQUF4RCxFQUFBa0IsVUFBQXNDLFNBQUEsZ0JBQUEsR0FDeERvQyxFQUFBQSxVQUFtQnBDLFNBQVMsVUFBQ2xDLEtBQTRCcUMsRUFBQVosUUFBQSxTQUFBdUMsR0FBQSxPQUFBQSxFQUFBcEUsVUFBQU0sT0FBQSxpQkFBQSxDQUFBLENBQUEsRUFDekRxRSxFQUFBQSxVQUFBQSxPQUF1QjlDLGdCQUFTekIsRUFBRWxCLEVBQUswRixVQUFnQnRFLE9BQUksZ0JBQUEsRUFBQytDLE1BQUEsRUFuQnhEbUIsRUFBVTNDLFFBQVEsU0FBQ2dDLEdBQVEsT0FBS0EsRUFBU0Usa0JBQWtCL0QsVUFBVUMsSUFBSSxZQUFZLENBQUMsQ0FBQSxFQUUxRixDQUFDLEVBSUQsSUFBTTJFLEVBQVcsSUFBSUMscUJBQXFCLFNBQUNDLEdBQ3pDQSxFQUFRakQsUUFBUSxTQUFDd0MsR0FDWEEsRUFBTUMsZ0JBQ1JELEVBQU1GLE9BQU9uRSxVQUFVQyxJQUFJLE1BQU0sQ0FFckMsQ0FBQyxDQUNILENBQUMsRUFFS3dFLEVBQXFCOUYsU0FBU0ssaUJBQWlCLFNBQVMsRUFDeEQwRixFQUFzQi9GLFNBQVNLLGlCQUFpQixlQUFlLEVBQy9EMkYsRUFBeUJoRyxTQUFTSyxpQkFBaUIsa0JBQWtCLEVBQzNFeUYsRUFBbUI1QyxRQUFRLFNBQUN6QixHQUFFLE9BQUt3RSxFQUFTRyxRQUFRM0UsQ0FBRSxDQUFDLENBQUEsRUFDdkRzRSxFQUFvQjdDLFFBQVEsU0FBQ3pCLEdBQUUsT0FBS3dFLEVBQVNHLFFBQVEzRSxDQUFFLENBQUMsQ0FBQSxFQUN4RHVFLEVBQXVCOUMsUUFBUSxTQUFDekIsR0FBRSxPQUFLd0UsRUFBU0csUUFBUTNFLENBQUUsQ0FBQyxDQUFBLENBQzdEIiwiZmlsZSI6Im1haW4ubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsid2luZG93Lm9ubG9hZCA9IGZ1bmN0aW9uICgpIHtcclxuICAvL3NlbGVjdG9yc1xyXG4gIGNvbnN0IGJvZHkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmJvZHlcIik7XHJcbiAgY29uc3QgYnVyZ2VyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5idXJnZXJcIik7XHJcbiAgY29uc3QgYWxsQnVyZ2VyQmFycyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuYnVyZ2VyX19iYXJzXCIpO1xyXG4gIGNvbnN0IG5hdk1vYmlsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubmF2XCIpO1xyXG4gIGNvbnN0IG5hdkRlc2t0b3AgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm5hdi1kZXNrdG9wXCIpO1xyXG4gIGNvbnN0IGFsbE5hdkxpbmtzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5uYXYtbW9iaWxlX19saW5rXCIpO1xyXG4gIGNvbnN0IGFycm93VXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmFycm93dXBcIik7XHJcblxyXG4gIGNvbnN0IGZvb3RlckRhdGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmZvb3Rlcl9fYm90dG9tLS1kYXRlXCIpO1xyXG4gIGNvbnN0IGFsbFNlY3Rpb25zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5zZWN0aW9uXCIpO1xyXG4gIGNvbnN0IGVycm9yTXNnID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5lcnJvci1tc2dcIik7XHJcbiAgY29uc3QgZXJyb3JNc2dUZWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmVycm9yLW1zZy10ZWxcIik7XHJcbiAgY29uc3QgZW1haWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmVtYWlsXCIpO1xyXG4gIGNvbnN0IHBob25lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi50ZWxOdW1cIik7XHJcbiAgY29uc3Qgc3VibWl0QnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5zdWJtaXRcIik7XHJcblxyXG4gIGNvbnN0IG1zZ1N0YXR1cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubXNnLXN0YXR1c1wiKTtcclxuXHJcbiAgLy9jb29raWVBbGVydFxyXG5cclxuICBjb25zdCBjb25zZW50Qm94ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjb29raWUtYm94XCIpO1xyXG4gIGNvbnN0IGFjY2VwdEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY29va2llLWJveF9fYnV0dG9ucy0tYWNjZXB0XCIpO1xyXG4gIGNvbnN0IHJlamVjdEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY29va2llLWJveF9fYnV0dG9ucy0tcmVqZWN0XCIpO1xyXG5cclxuICBhY2NlcHRCdG4ub25jbGljayA9ICgpID0+IHtcclxuICAgIGRvY3VtZW50LmNvb2tpZSA9IFwiQ29va2llQnk9c2Fsb25iZWF0YS5ldTsgbWF4LWFnZT1cIiArIDYwICogNjAgKiAyNDtcclxuICAgIGlmIChkb2N1bWVudC5jb29raWUpIHtcclxuICAgICAgY29uc2VudEJveC5jbGFzc0xpc3QuYWRkKFwiaGlkZVwiKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGFsZXJ0KFxyXG4gICAgICAgIFwiQ29va2llIGNhbid0IGJlIHNldCEgUGxlYXNlXCIgK1xyXG4gICAgICAgICAgXCIgdW5ibG9jayB0aGlzIHNpdGUgZnJvbSB0aGUgY29va2llXCIgK1xyXG4gICAgICAgICAgXCIgc2V0dGluZyBvZiB5b3VyIGJyb3dzZXIuXCJcclxuICAgICAgKTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICByZWplY3RCdG4ub25jbGljayA9ICgpID0+IHtcclxuICAgIGFsZXJ0KFwiUGxpa2kgQ29va2llcyBvZHJ6dWNvbmUuIEZ1bmtjam9uYWxub8WbxIcgc3Ryb255IG1vxbxlIHpvc3RhxIcgb2dyYW5pY3pvbmEuXCIpO1xyXG4gICAgY29uc2VudEJveC5jbGFzc0xpc3QuYWRkKFwiaGlkZVwiKTtcclxuICB9O1xyXG5cclxuICBsZXQgY2hlY2tDb29raWUgPSBkb2N1bWVudC5jb29raWUuaW5kZXhPZihcIkNvb2tpZUJ5PUdlZWtzRm9yR2Vla3NcIik7XHJcbiAgY2hlY2tDb29raWUgIT09IC0xID8gY29uc2VudEJveC5jbGFzc0xpc3QuYWRkKFwiaGlkZVwiKSA6IGNvbnNlbnRCb3guY2xhc3NMaXN0LnJlbW92ZShcImhpZGVcIik7XHJcblxyXG4gIC8vc2VuZCBtYWlsXHJcblxyXG4gIGlmIChkb2N1bWVudC5sb2NhdGlvbi5zZWFyY2ggPT09IFwiP21haWxfc3RhdHVzPXNlbnRcIikge1xyXG4gICAgbXNnU3RhdHVzLmNsYXNzTGlzdC5hZGQoXCJzdWNjZXNcIik7XHJcbiAgICBtc2dTdGF0dXMudGV4dENvbnRlbnQgPSBcIldpYWRvbW/Fm8SHIHd5c8WCYW5hIVwiO1xyXG4gIH1cclxuICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgIG1zZ1N0YXR1cy5jbGFzc0xpc3QucmVtb3ZlKFwic3VjY2VzXCIpO1xyXG4gIH0sIDMwMDApO1xyXG5cclxuICBpZiAoZG9jdW1lbnQubG9jYXRpb24uc2VhcmNoID09PSBcIj9tYWlsX3N0YXR1cz1lcnJvclwiKSB7XHJcbiAgICBtc2dTdGF0dXMuY2xhc3NMaXN0LmFkZChcImVycm9yXCIpO1xyXG4gICAgbXNnU3RhdHVzLnRleHRDb250ZW50ID0gXCJixYLEhWQsIHNwcsOzYnVqIHBvbm93bmllXCI7XHJcbiAgfVxyXG4gIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgbXNnU3RhdHVzLmNsYXNzTGlzdC5yZW1vdmUoXCJlcnJvclwiKTtcclxuICB9LCAzMDAwKTtcclxuXHJcbiAgLy8gZm9ybSB2YWxpZGF0b3JcclxuXHJcbiAgY29uc3QgY2hlY2tQaG9uZSA9IChwaG9uZSkgPT4ge1xyXG4gICAgY29uc3QgdmFsaWROdW0gPSAvXlswLTlcXCtdezgsMTN9JC87XHJcblxyXG4gICAgaWYgKHZhbGlkTnVtLnRlc3QodGVsTnVtLnZhbHVlKSkge1xyXG4gICAgICBjbGVhckVycm9yKGVycm9yTXNnVGVsKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHNob3dFcnJvcihlcnJvck1zZ1RlbCwgXCJ3cGlzeiBwb3ByYXdueSBuciB0ZWwuXCIpO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIGNvbnN0IGNoZWNrTWFpbCA9IChlbWFpbCkgPT4ge1xyXG4gICAgY29uc3QgdmFsaWRNYWlsID0gL15bXFx3LVxcLl0rQChbXFx3LV0rXFwuKStbXFx3LV17Miw0fSQvO1xyXG5cclxuICAgIGlmICh2YWxpZE1haWwudGVzdChlbWFpbC52YWx1ZSkpIHtcclxuICAgICAgY2xlYXJFcnJvcihlcnJvck1zZyk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBzaG93RXJyb3IoZXJyb3JNc2csIFwid3Bpc3ogcG9wcmF3bnkgYWRyZXMgZW1haWwuXCIpO1xyXG4gICAgfVxyXG4gIH07XHJcbiAgY29uc3QgY2xlYXJFcnJvciA9IChlbCkgPT4ge1xyXG4gICAgY29uc3QgZm9ybUJveCA9IGVsO1xyXG4gICAgZm9ybUJveC5jbGFzc0xpc3QucmVtb3ZlKFwiZXJyb3ItZGlzcGxheVwiKTtcclxuICAgIGZvcm1Cb3gudGV4dENvbnRlbnQgPSBcIlwiO1xyXG4gIH07XHJcblxyXG4gIGNvbnN0IHNob3dFcnJvciA9IChpbnB1dCwgbXNnKSA9PiB7XHJcbiAgICBjb25zdCBmb3JtQm94ID0gaW5wdXQ7XHJcbiAgICBmb3JtQm94LmNsYXNzTGlzdC5hZGQoXCJlcnJvci1kaXNwbGF5XCIpO1xyXG4gICAgZm9ybUJveC50ZXh0Q29udGVudCA9IG1zZztcclxuICB9O1xyXG5cclxuICAvLyBldmVudCBsaXN0ZW5lcnNcclxuICBzdWJtaXRCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChlKSA9PiB7XHJcbiAgICBjaGVja01haWwoZW1haWwpO1xyXG4gICAgY2hlY2tQaG9uZShwaG9uZSk7XHJcbiAgfSk7XHJcblxyXG4gIC8vIGZvb3RlclxyXG4gIGNvbnN0IGN1cnJlbnREYXRlID0gbmV3IERhdGUoKTtcclxuICBjb25zdCBjdXJyZW50WWVhciA9IGN1cnJlbnREYXRlLmdldEZ1bGxZZWFyKCk7XHJcblxyXG4gIGNvbnN0IGhhbmRsZUZvb3RlclllYXIgPSAoKSA9PiB7XHJcbiAgICBmb290ZXJEYXRlLnRleHRDb250ZW50ID0gY3VycmVudFllYXIudG9TdHJpbmcoKTtcclxuICB9O1xyXG5cclxuICBoYW5kbGVGb290ZXJZZWFyKCk7XHJcbiAgLy8gTkFWXHJcblxyXG4gIGNvbnN0IGhhbmRsZU5hdiA9ICgpID0+IHtcclxuICAgIG5hdk1vYmlsZS5jbGFzc0xpc3QudG9nZ2xlKFwiYWN0aXZlXCIpO1xyXG4gICAgYnVyZ2VyLmNsYXNzTGlzdC50b2dnbGUoXCJhY3RpdmVcIik7XHJcbiAgICBib2R5LmNsYXNzTGlzdC50b2dnbGUoXCJkaXNhYmxlLXNjcm9sbFwiKTtcclxuXHJcbiAgICBhbGxOYXZMaW5rcy5mb3JFYWNoKChsaW5rKSA9PiB7XHJcbiAgICAgIGxpbmsuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgICBuYXZNb2JpbGUuY2xhc3NMaXN0LnJlbW92ZShcImFjdGl2ZVwiKTtcclxuICAgICAgICBidXJnZXIuY2xhc3NMaXN0LnJlbW92ZShcImFjdGl2ZVwiKTtcclxuICAgICAgICBib2R5LmNsYXNzTGlzdC5yZW1vdmUoXCJkaXNhYmxlLXNjcm9sbFwiKTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICB9O1xyXG4gIGNvbnN0IGhhbmRsZUFycm93VXAgPSAoKSA9PiB7XHJcbiAgICBjb25zdCBjdXJyZW50U2VjdGlvbiA9IHdpbmRvdy5zY3JvbGxZO1xyXG4gICAgaWYgKGN1cnJlbnRTZWN0aW9uID4gNDgwKSB7XHJcbiAgICAgIGFycm93VXAuY2xhc3NMaXN0LmFkZChcImFjdGl2ZVwiKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGFycm93VXAuY2xhc3NMaXN0LnJlbW92ZShcImFjdGl2ZVwiKTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICBjb25zdCBoYW5kbGVPYnNlcnZlciA9ICgpID0+IHtcclxuICAgIGNvbnN0IGN1cnJlbnRTZWN0aW9uID0gd2luZG93LnNjcm9sbFk7XHJcblxyXG4gICAgYWxsU2VjdGlvbnMuZm9yRWFjaCgoc2VjdGlvbikgPT4ge1xyXG4gICAgICBpZiAoXHJcbiAgICAgICAgIXNlY3Rpb24uY2xhc3NMaXN0LmNvbnRhaW5zKFwid2hpdGUtc2VjdGlvblwiKSAmJlxyXG4gICAgICAgIHNlY3Rpb24ub2Zmc2V0VG9wIDw9IGN1cnJlbnRTZWN0aW9uICsgMzBcclxuICAgICAgKSB7XHJcbiAgICAgICAgYWxsQnVyZ2VyQmFycy5mb3JFYWNoKChiYXIpID0+IGJhci5jbGFzc0xpc3QuYWRkKFwid2hpdGUtYnVyZ2VyXCIpKTtcclxuICAgICAgfSBlbHNlIGlmIChcclxuICAgICAgICBzZWN0aW9uLmNsYXNzTGlzdC5jb250YWlucyhcIndoaXRlLXNlY3Rpb25cIikgJiZcclxuICAgICAgICBzZWN0aW9uLm9mZnNldFRvcCA8PSBjdXJyZW50U2VjdGlvbiArIDEwMFxyXG4gICAgICApIHtcclxuICAgICAgICBhbGxCdXJnZXJCYXJzLmZvckVhY2goKGJhcikgPT4gYmFyLmNsYXNzTGlzdC5yZW1vdmUoXCJ3aGl0ZS1idXJnZXJcIikpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICAgIGhhbmRsZUFycm93VXAoKTtcclxuICB9O1xyXG5cclxuICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInNjcm9sbFwiLCBoYW5kbGVPYnNlcnZlcik7XHJcbiAgYnVyZ2VyLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBoYW5kbGVOYXYpO1xyXG5cclxuICAvLyAtLS0tLS0tLS0tLS0tIEdBTExFUlkgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbiAgY29uc3QgY2Fyb3VzZWxzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5jYXJvdXNlbFwiKTtcclxuICBjb25zdCB0aHVtYm5haWxzQ2Fyb3VzZWxzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5jYXJvdXNlbC10aHVtYm5haWxzXCIpO1xyXG4gIGNvbnN0IHdvcmtCdG5zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi53b3JrLWJ0blwiKTtcclxuXHJcbiAgY29uc3QgYXJyb3dJY29ucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuYXJyb3dcIik7XHJcbiAgY29uc3QgZ2FsbGVyaWVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5nYWxsZXJ5XCIpO1xyXG4gIGNvbnN0IGhhaXJjdXRHYWxsZXJ5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJoYWlyY3V0XCIpO1xyXG4gIGNvbnN0IGNvbG9yR2FsbGVyeSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY29sb3JcIik7XHJcbiAgY29uc3QgYmFyYmVyR2FsbGVyeSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYmFyYmVyXCIpO1xyXG4gIGNvbnN0IHN0eWxlR2FsbGVyeSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic3R5bGVcIik7XHJcblxyXG4gIGNvbnN0IGltYWdlcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuaW1nXCIpO1xyXG4gIGNvbnN0IHRodW1ibmFpbEltYWdlcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIudGh1bWJuYWlsLWltZ1wiKTtcclxuXHJcbiAgZnVuY3Rpb24gaGFuZGxlV29ya0J0bihidG4pIHtcclxuICAgIGlmIChidG4uaWQgPT09IFwiYnRuLW9uZVwiKSB7XHJcbiAgICAgIGxldCBzdGFydEluZGV4ID0gMDtcclxuICAgICAgbGV0IGVuZEluZGV4ID0gMztcclxuXHJcbiAgICAgIGhhbmRsZURpc3BsYXlHYWxsZXJ5KGhhaXJjdXRHYWxsZXJ5KSwgaGFuZGxlQXJyb3dBY3Rpb24oc3RhcnRJbmRleCwgZW5kSW5kZXgpO1xyXG4gICAgfSBlbHNlIGlmIChidG4uaWQgPT09IFwiYnRuLXR3b1wiKSB7XHJcbiAgICAgIGxldCBzdGFydEluZGV4ID0gNDtcclxuICAgICAgbGV0IGVuZEluZGV4ID0gNztcclxuICAgICAgaGFuZGxlRGlzcGxheUdhbGxlcnkoY29sb3JHYWxsZXJ5KTtcclxuICAgICAgaGFuZGxlQXJyb3dBY3Rpb24oc3RhcnRJbmRleCwgZW5kSW5kZXgpO1xyXG4gICAgfSBlbHNlIGlmIChidG4uaWQgPT09IFwiYnRuLXRocmVlXCIpIHtcclxuICAgICAgbGV0IHN0YXJ0SW5kZXggPSA4O1xyXG4gICAgICBsZXQgZW5kSW5kZXggPSAxMTtcclxuICAgICAgaGFuZGxlRGlzcGxheUdhbGxlcnkoYmFyYmVyR2FsbGVyeSk7XHJcbiAgICAgIGhhbmRsZUFycm93QWN0aW9uKHN0YXJ0SW5kZXgsIGVuZEluZGV4KTtcclxuICAgIH0gZWxzZSBpZiAoYnRuLmlkID09PSBcImJ0bi1mb3VyXCIpIHtcclxuICAgICAgbGV0IHN0YXJ0SW5kZXggPSAxMjtcclxuICAgICAgbGV0IGVuZEluZGV4ID0gMTU7XHJcbiAgICAgIGhhbmRsZURpc3BsYXlHYWxsZXJ5KHN0eWxlR2FsbGVyeSk7XHJcbiAgICAgIGhhbmRsZUFycm93QWN0aW9uKHN0YXJ0SW5kZXgsIGVuZEluZGV4KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGhhbmRsZUFycm93QWN0aW9uKHN0YXJ0SW5kZXgsIGVuZEluZGV4KSB7XHJcbiAgICBsZXQgaW5kZXggPSBzdGFydEluZGV4O1xyXG4gICAgYXJyb3dJY29ucy5mb3JFYWNoKChpY29uKSA9PlxyXG4gICAgICBpY29uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgICAgaWYgKGljb24uaWQgPT09IFwibGVmdFwiICYmIGluZGV4ID09PSBzdGFydEluZGV4KSB7XHJcbiAgICAgICAgICBpbmRleCA9IGVuZEluZGV4ICsgMTtcclxuICAgICAgICAgIGluZGV4LS07XHJcbiAgICAgICAgfSBlbHNlIGlmIChpY29uLmlkID09PSBcImxlZnRcIiAmJiBpbmRleCA+IHN0YXJ0SW5kZXgpIHtcclxuICAgICAgICAgIGluZGV4LS07XHJcbiAgICAgICAgfSBlbHNlIGlmIChpY29uLmlkID09PSBcInJpZ2h0XCIgJiYgaW5kZXggPCBlbmRJbmRleCkge1xyXG4gICAgICAgICAgaW5kZXgrKztcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgaW5kZXggPSBzdGFydEluZGV4O1xyXG4gICAgICAgIH1cclxuICAgICAgICBoYW5kbGVEaXNwbGF5SW1hZ2UoaW5kZXgpO1xyXG4gICAgICAgIGhhbmRsZUFjdGl2YXRlVGh1bWJuYWlsKGluZGV4KTtcclxuICAgICAgfSlcclxuICAgICk7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBoYW5kbGVEaXNwbGF5R2FsbGVyeShnYWxsZXJ5VHlwZSkge1xyXG4gICAgY2Fyb3VzZWxzLmZvckVhY2goKGNhcm91c2VsKSA9PiBjYXJvdXNlbC5maXJzdEVsZW1lbnRDaGlsZC5jbGFzc0xpc3QuYWRkKFwic2hvdy1pbWFnZVwiKSk7XHJcbiAgICB0aHVtYm5haWxzQ2Fyb3VzZWxzLmZvckVhY2goKGNhcm91c2VsKSA9PlxyXG4gICAgICBjYXJvdXNlbC5maXJzdEVsZW1lbnRDaGlsZC5jbGFzc0xpc3QucmVtb3ZlKFwidGh1bWJuYWlsLWRpc2FibGVkXCIpXHJcbiAgICApO1xyXG4gICAgYm9keS5jbGFzc0xpc3QuYWRkKFwiZGlzYWJsZS1zY3JvbGxcIik7XHJcbiAgICBnYWxsZXJ5VHlwZS5jbGFzc0xpc3QuYWRkKFwiZGlzcGxheS1nYWxsZXJ5XCIpO1xyXG4gICAgbmF2RGVza3RvcC5jbGFzc0xpc3QuYWRkKFwibmF2LXRyYW5zaXRpb25cIik7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBoYW5kbGVEaXNwbGF5SW1hZ2UoY3VycmVudEluZGV4KSB7XHJcbiAgICBpbWFnZXMuZm9yRWFjaCgoaW1hZ2UsIGluZGV4KSA9PiB7XHJcbiAgICAgIGlmIChjdXJyZW50SW5kZXggPT09IGluZGV4KSB7XHJcbiAgICAgICAgaW1hZ2UuY2xhc3NMaXN0LmFkZChcInNob3ctaW1hZ2VcIiksIGhhbmRsZUFjdGl2YXRlVGh1bWJuYWlsKGluZGV4KTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBpbWFnZS5jbGFzc0xpc3QucmVtb3ZlKFwic2hvdy1pbWFnZVwiKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBoYW5kbGVBY3RpdmF0ZVRodW1ibmFpbChjdXJyZW50SW5kZXgpIHtcclxuICAgIHRodW1ibmFpbEltYWdlcy5mb3JFYWNoKCh0aHVtYm5haWwsIGluZGV4KSA9PlxyXG4gICAgICBjdXJyZW50SW5kZXggPT09IGluZGV4XHJcbiAgICAgICAgPyB0aHVtYm5haWwuY2xhc3NMaXN0LnJlbW92ZShcInRodW1ibmFpbC1kaXNhYmxlZFwiKVxyXG4gICAgICAgIDogdGh1bWJuYWlsLmNsYXNzTGlzdC5hZGQoXCJ0aHVtYm5haWwtZGlzYWJsZWRcIilcclxuICAgICk7XHJcbiAgfVxyXG5cclxuICAvLyBldmVudCBsaXN0ZW5lcnMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gIHdvcmtCdG5zLmZvckVhY2goKGJ0bikgPT4gYnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiBoYW5kbGVXb3JrQnRuKGJ0bikpKTtcclxuXHJcbiAgdGh1bWJuYWlsSW1hZ2VzLmZvckVhY2goKHRodW1ibmFpbCwgdGh1bWJuYWlsSW5kZXgpID0+XHJcbiAgICB0aHVtYm5haWwuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgKGluZGV4ID0gdGh1bWJuYWlsSW5kZXgpLCBoYW5kbGVEaXNwbGF5SW1hZ2UoaW5kZXgpO1xyXG4gICAgfSlcclxuICApO1xyXG5cclxuICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpID0+IHtcclxuICAgIGlmIChcclxuICAgICAgKGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcImdhbGxlcnlcIikgJiYgYm9keS5jbGFzc0xpc3QuY29udGFpbnMoXCJkaXNhYmxlLXNjcm9sbFwiKSkgfHxcclxuICAgICAgYm9keS5jbGFzc0xpc3QuY29udGFpbnMoXCJjYXJvdXNlbFwiKVxyXG4gICAgKSB7XHJcbiAgICAgIGdhbGxlcmllcy5mb3JFYWNoKChnYWxsZXJ5KSA9PiBnYWxsZXJ5LmNsYXNzTGlzdC5yZW1vdmUoXCJkaXNwbGF5LWdhbGxlcnlcIikpO1xyXG4gICAgICBib2R5LmNsYXNzTGlzdC5yZW1vdmUoXCJkaXNhYmxlLXNjcm9sbFwiKTtcclxuICAgICAgbmF2RGVza3RvcC5jbGFzc0xpc3QucmVtb3ZlKFwibmF2LXRyYW5zaXRpb25cIik7XHJcbiAgICAgIGluZGV4ID0gMDtcclxuXHJcbiAgICAgIGNhcm91c2Vscy5mb3JFYWNoKChjYXJvdXNlbCkgPT4gY2Fyb3VzZWwuZmlyc3RFbGVtZW50Q2hpbGQuY2xhc3NMaXN0LmFkZChcInNob3ctaW1hZ2VcIikpO1xyXG4gICAgfVxyXG4gIH0pO1xyXG5cclxuICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLWZhZGVJTiBhbmltIC0tLS0tLS0tLS0tLS0tLVxyXG5cclxuICBjb25zdCBvYnNlcnZlciA9IG5ldyBJbnRlcnNlY3Rpb25PYnNlcnZlcigoZW50cmllcykgPT4ge1xyXG4gICAgZW50cmllcy5mb3JFYWNoKChlbnRyeSkgPT4ge1xyXG4gICAgICBpZiAoZW50cnkuaXNJbnRlcnNlY3RpbmcpIHtcclxuICAgICAgICBlbnRyeS50YXJnZXQuY2xhc3NMaXN0LmFkZChcInNob3dcIik7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICBjb25zdCBoaWRkZW5FbGVtZW50c0xlZnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmhpZGRlblwiKTtcclxuICBjb25zdCBoaWRkZW5FbGVtZW50c1JpZ2h0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5oaWRkZW4tcmlnaHRcIik7XHJcbiAgY29uc3QgaGlkZGVuVmFuaXNoZWRFbGVtZW50cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuaGlkZGVuLXZhbmlzaGVkXCIpO1xyXG4gIGhpZGRlbkVsZW1lbnRzTGVmdC5mb3JFYWNoKChlbCkgPT4gb2JzZXJ2ZXIub2JzZXJ2ZShlbCkpO1xyXG4gIGhpZGRlbkVsZW1lbnRzUmlnaHQuZm9yRWFjaCgoZWwpID0+IG9ic2VydmVyLm9ic2VydmUoZWwpKTtcclxuICBoaWRkZW5WYW5pc2hlZEVsZW1lbnRzLmZvckVhY2goKGVsKSA9PiBvYnNlcnZlci5vYnNlcnZlKGVsKSk7XHJcbn07XHJcbiJdfQ==
