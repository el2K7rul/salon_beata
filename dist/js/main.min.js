window.onload=function(){var t=document.querySelector(".body"),o=document.querySelector(".burger"),n=document.querySelectorAll(".burger__bars"),c=document.querySelector(".nav"),r=document.querySelector(".nav-desktop"),e=document.querySelectorAll(".nav-mobile__link"),s=document.querySelector(".arrowup"),i=document.querySelector(".footer__bottom--date"),l=document.querySelectorAll(".section"),a=document.querySelector(".error-msg"),u=document.querySelector(".error-msg-tel"),d=document.querySelector(".email"),m=document.querySelector(".telNum"),f=document.querySelector(".submit"),h=document.querySelector(".msg-status"),y=document.getElementById("cookie-box"),v=document.querySelector(".cookie-box__buttons--accept"),L=document.querySelector(".cookie-box__buttons--reject");v.onclick=function(){document.cookie="CookieBy=salonbeata.eu; max-age=86400",document.cookie?y.classList.add("hide"):alert("Cookie can't be set! Please unblock this site from the cookie setting of your browser.")},L.onclick=function(){alert("Cookies rejected. Some functionality may be limited."),y.classList.add("hide")},-1!==document.cookie.indexOf("CookieBy=GeeksForGeeks")?y.classList.add("hide"):y.classList.remove("hide"),"?mail_status=sent"===document.location.search&&(h.classList.add("succes"),h.textContent="Wiadomość wysłana!"),setTimeout(function(){h.classList.remove("succes")},3e3),"?mail_status=error"===document.location.search&&(h.classList.add("error"),h.textContent="błąd, spróbuj ponownie"),setTimeout(function(){h.classList.remove("error")},3e3);function b(e){e.classList.remove("error-display"),e.textContent=""}function g(e,t){e.classList.add("error-display"),e.textContent=t}var v=(new Date).getFullYear(),w=(i.textContent=v.toString(),window.addEventListener("scroll",function(){var t=window.scrollY;l.forEach(function(e){!e.classList.contains("white-section")&&e.offsetTop<=t+30?n.forEach(function(e){return e.classList.add("white-burger")}):e.classList.contains("white-section")&&e.offsetTop<=t+100&&n.forEach(function(e){return e.classList.remove("white-burger")})}),480<window.scrollY?s.classList.add("active"):s.classList.remove("active")}),o.addEventListener("click",function(){c.classList.toggle("active"),o.classList.toggle("active"),t.classList.toggle("disable-scroll"),e.forEach(function(e){e.addEventListener("click",function(){c.classList.remove("active"),o.classList.remove("active"),t.classList.remove("disable-scroll")})})}),f.addEventListener("click",function(e){e.preventDefault(),/^[\w-\.]+@([\w-]+\.)+[\w-]{2,4}$/.test(d.value)?b(a):g(a,"wpisz poprawny adres email."),/^[0-9\+]{8,13}$/.test(m.value)?b(u):g(u,"wpisz poprawny nr tel.")}),document.querySelectorAll(".carousel")),E=document.querySelectorAll(".carousel-thumbnails"),L=document.querySelectorAll(".work-btn"),S=document.querySelectorAll(".arrow"),q=document.querySelectorAll(".gallery"),k=document.getElementById("haircut"),p=document.getElementById("color"),A=document.getElementById("barber"),x=document.getElementById("style"),C=document.querySelectorAll(".img"),_=document.querySelectorAll(".thumbnail-img");function B(t,o){var n=t;S.forEach(function(e){return e.addEventListener("click",function(){"left"===e.id&&n===t?(n=o+1,n--):"left"===e.id&&t<n?n--:"right"===e.id&&n<o?n++:n=t,T(n),j(n)})})}function I(e){w.forEach(function(e){return e.firstElementChild.classList.add("show-image")}),E.forEach(function(e){return e.firstElementChild.classList.remove("thumbnail-disabled")}),t.classList.add("disable-scroll"),e.classList.add("display-gallery"),r.classList.add("nav-transition")}function T(o){C.forEach(function(e,t){o===t?(e.classList.add("show-image"),j(t)):e.classList.remove("show-image")})}function j(o){_.forEach(function(e,t){return o===t?e.classList.remove("thumbnail-disabled"):e.classList.add("thumbnail-disabled")})}L.forEach(function(t){return t.addEventListener("click",function(){var e;"btn-one"===(e=t).id?(I(k),B(0,3)):"btn-two"===e.id?(I(p),B(4,7)):"btn-three"===e.id?(I(A),B(8,11)):"btn-four"===e.id&&(I(x),B(12,15))})}),_.forEach(function(e,t){return e.addEventListener("click",function(){T(index=t)})}),document.addEventListener("click",function(e){(e.target.classList.contains("gallery")&&t.classList.contains("disable-scroll")||t.classList.contains("carousel"))&&(q.forEach(function(e){return e.classList.remove("display-gallery")}),t.classList.remove("disable-scroll"),r.classList.remove("nav-transition"),index=0,w.forEach(function(e){return e.firstElementChild.classList.add("show-image")}))});var Y=new IntersectionObserver(function(e){e.forEach(function(e){e.isIntersecting&&e.target.classList.add("show")})}),i=document.querySelectorAll(".hidden"),v=document.querySelectorAll(".hidden-right"),f=document.querySelectorAll(".hidden-vanished");i.forEach(function(e){return Y.observe(e)}),v.forEach(function(e){return Y.observe(e)}),f.forEach(function(e){return Y.observe(e)})};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsid2luZG93Iiwib25sb2FkIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiYnVyZ2VyIiwiYm9keSIsImFsbEJ1cmdlckJhcnMiLCJxdWVyeVNlbGVjdG9yQWxsIiwibmF2TW9iaWxlIiwibmF2RGVza3RvcCIsImFycm93VXAiLCJmb290ZXJEYXRlIiwiYWxsU2VjdGlvbnMiLCJlcnJvck1zZyIsImVycm9yTXNnVGVsIiwiZW1haWwiLCJ0ZWxOdW0iLCJtc2dTdGF0dXMiLCJjb25zZW50Qm94IiwiZ2V0RWxlbWVudEJ5SWQiLCJhY2NlcHRCdG4iLCJyZWplY3RCdG4iLCJvbmNsaWNrIiwiY29va2llIiwiY2xhc3NMaXN0IiwiYWRkIiwiYWxlcnQiLCJ0ZXh0Q29udGVudCIsImluZGV4T2YiLCJyZW1vdmUiLCJsb2NhdGlvbiIsInNlYXJjaCIsInNldFRpbWVvdXQiLCJjdXJyZW50RGF0ZSIsIkRhdGUiLCJjdXJyZW50WWVhciIsImhhbmRsZUZvb3RlclllYXIiLCJjbGVhckVycm9yIiwiZWwiLCJmb3JtQm94IiwidGh1bWJuYWlsc0Nhcm91c2VscyIsIndvcmtCdG5zIiwiaGFpcmN1dEdhbGxlcnkiLCJpbnB1dCIsImJhcmJlckdhbGxlcnkiLCJzdHlsZUdhbGxlcnkiLCJnZXRGdWxsWWVhciIsImhhbmRsZUFycm93QWN0aW9uIiwiYWxsTmF2TGlua3MiLCJ0b1N0cmluZyIsImhhbmRsZUFycm93VXAiLCJzY3JvbGxZIiwiYWRkRXZlbnRMaXN0ZW5lciIsInNlY3Rpb24iLCJjb250YWlucyIsIm9mZnNldFRvcCIsImN1cnJlbnRTZWN0aW9uIiwiY2hlY2tUZWxOdW0iLCJmb3JFYWNoIiwidmFsaWROdW0iLCJzaG93RXJyb3IiLCJiYXIiLCJ0b2dnbGUiLCJsaW5rIiwiaGFuZGxlT2JzZXJ2ZXIiLCJzdWJtaXRCdG4iLCJpZCIsImUiLCJwcmV2ZW50RGVmYXVsdCIsImVuZEluZGV4IiwidmFsdWUiLCJjaGVja01haWwiLCJoYW5kbGVEaXNwbGF5R2FsbGVyeSIsInN0YXJ0SW5kZXgiLCJjb2xvckdhbGxlcnkiLCJpbWFnZXMiLCJ0aHVtYm5haWxJbWFnZXMiLCJpbmRleCIsImdhbGxlcnlUeXBlIiwiaWNvbiIsImhhbmRsZURpc3BsYXlJbWFnZSIsImN1cnJlbnRJbmRleCIsImltYWdlIiwiaGFuZGxlQWN0aXZhdGVUaHVtYm5haWwiLCJjYXJvdXNlbCIsImJ0biIsImZpcnN0RWxlbWVudENoaWxkIiwiaGFuZGxlV29ya0J0biIsInRodW1ibmFpbEluZGV4IiwidGh1bWJuYWlsIiwidGFyZ2V0IiwiZ2FsbGVyaWVzIiwiZ2FsbGVyeSIsImVudHJ5IiwiaXNJbnRlcnNlY3RpbmciLCJhcnJvd0ljb25zIiwiY2Fyb3VzZWxzIiwiaGlkZGVuRWxlbWVudHNMZWZ0IiwiaGlkZGVuRWxlbWVudHNSaWdodCIsImhpZGRlblZhbmlzaGVkRWxlbWVudHMiLCJvYnNlcnZlciIsIkludGVyc2VjdGlvbk9ic2VydmVyIiwiZW50cmllcyIsIm9ic2VydmUiXSwibWFwcGluZ3MiOiJBQUFBQSxPQUFPQyxPQUFTLFdBQWhCRCxJQUFPQyxFQUFNQyxTQUFHQyxjQUFZLE9BQUEsRUFDMUJDLEVBQUFGLFNBQUFDLGNBQUEsU0FBQSxFQUNNRSxFQUFnQkYsU0FBQUEsaUJBQXNCLGVBQUEsRUFDdENDLEVBQVNGLFNBQVNDLGNBQWMsTUFBVSxFQUMxQ0csRUFBYUosU0FBV0MsY0FBQ0ksY0FBaUIsRUFDMUNDLEVBQVlOLFNBQVNDLGlCQUFxQixtQkFBQSxFQUMxQ00sRUFBVVAsU0FBV0MsY0FBYyxVQUFDLEVBRXBDTyxFQUFVUixTQUFTQyxjQUFjLHVCQUFXLEVBRTVDUSxFQUFhVCxTQUFTQyxpQkFBYyxVQUFBLEVBQ3BDUyxFQUFXVixTQUFXQyxjQUFDSSxZQUFpQixFQUN4Q00sRUFBV1gsU0FBU0MsY0FBYyxnQkFBYSxFQUMvQ1csRUFBQUEsU0FBY1osY0FBU0MsUUFBYyxFQUNyQ1ksRUFBUWIsU0FBU0MsY0FBYyxTQUFTLEVBQ3hDYSxFQUFT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Lm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIndpbmRvdy5vbmxvYWQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgLy9zZWxlY3RvcnNcclxuICBjb25zdCBib2R5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5ib2R5XCIpO1xyXG4gIGNvbnN0IGJ1cmdlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuYnVyZ2VyXCIpO1xyXG4gIGNvbnN0IGFsbEJ1cmdlckJhcnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmJ1cmdlcl9fYmFyc1wiKTtcclxuICBjb25zdCBuYXZNb2JpbGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm5hdlwiKTtcclxuICBjb25zdCBuYXZEZXNrdG9wID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5uYXYtZGVza3RvcFwiKTtcclxuICBjb25zdCBhbGxOYXZMaW5rcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIubmF2LW1vYmlsZV9fbGlua1wiKTtcclxuICBjb25zdCBhcnJvd1VwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5hcnJvd3VwXCIpO1xyXG5cclxuICBjb25zdCBmb290ZXJEYXRlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5mb290ZXJfX2JvdHRvbS0tZGF0ZVwiKTtcclxuICBjb25zdCBhbGxTZWN0aW9ucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuc2VjdGlvblwiKTtcclxuICBjb25zdCBlcnJvck1zZyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZXJyb3ItbXNnXCIpO1xyXG4gIGNvbnN0IGVycm9yTXNnVGVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5lcnJvci1tc2ctdGVsXCIpO1xyXG4gIGNvbnN0IGVtYWlsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5lbWFpbFwiKTtcclxuICBjb25zdCB0ZWxOdW0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnRlbE51bVwiKTtcclxuICBjb25zdCBzdWJtaXRCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnN1Ym1pdFwiKTtcclxuXHJcbiAgY29uc3QgbXNnU3RhdHVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tc2ctc3RhdHVzXCIpO1xyXG5cclxuICAvL2Nvb2tpZUFsZXJ0XHJcblxyXG4gIGNvbnN0IGNvbnNlbnRCb3ggPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNvb2tpZS1ib3hcIik7XHJcbiAgY29uc3QgYWNjZXB0QnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jb29raWUtYm94X19idXR0b25zLS1hY2NlcHRcIik7XHJcbiAgY29uc3QgcmVqZWN0QnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jb29raWUtYm94X19idXR0b25zLS1yZWplY3RcIik7XHJcblxyXG4gIGFjY2VwdEJ0bi5vbmNsaWNrID0gKCkgPT4ge1xyXG4gICAgZG9jdW1lbnQuY29va2llID0gXCJDb29raWVCeT1zYWxvbmJlYXRhLmV1OyBtYXgtYWdlPVwiICsgNjAgKiA2MCAqIDI0O1xyXG4gICAgaWYgKGRvY3VtZW50LmNvb2tpZSkge1xyXG4gICAgICBjb25zZW50Qm94LmNsYXNzTGlzdC5hZGQoXCJoaWRlXCIpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgYWxlcnQoXHJcbiAgICAgICAgXCJDb29raWUgY2FuJ3QgYmUgc2V0ISBQbGVhc2VcIiArXHJcbiAgICAgICAgICBcIiB1bmJsb2NrIHRoaXMgc2l0ZSBmcm9tIHRoZSBjb29raWVcIiArXHJcbiAgICAgICAgICBcIiBzZXR0aW5nIG9mIHlvdXIgYnJvd3Nlci5cIlxyXG4gICAgICApO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIHJlamVjdEJ0bi5vbmNsaWNrID0gKCkgPT4ge1xyXG4gICAgYWxlcnQoXCJDb29raWVzIHJlamVjdGVkLiBTb21lIGZ1bmN0aW9uYWxpdHkgbWF5IGJlIGxpbWl0ZWQuXCIpO1xyXG4gICAgY29uc2VudEJveC5jbGFzc0xpc3QuYWRkKFwiaGlkZVwiKTtcclxuICB9O1xyXG5cclxuICBsZXQgY2hlY2tDb29raWUgPSBkb2N1bWVudC5jb29raWUuaW5kZXhPZihcIkNvb2tpZUJ5PUdlZWtzRm9yR2Vla3NcIik7XHJcbiAgY2hlY2tDb29raWUgIT09IC0xID8gY29uc2VudEJveC5jbGFzc0xpc3QuYWRkKFwiaGlkZVwiKSA6IGNvbnNlbnRCb3guY2xhc3NMaXN0LnJlbW92ZShcImhpZGVcIik7XHJcblxyXG4gIC8vc2VuZCBtYWlsXHJcblxyXG4gIGlmIChkb2N1bWVudC5sb2NhdGlvbi5zZWFyY2ggPT09IFwiP21haWxfc3RhdHVzPXNlbnRcIikge1xyXG4gICAgbXNnU3RhdHVzLmNsYXNzTGlzdC5hZGQoXCJzdWNjZXNcIik7XHJcbiAgICBtc2dTdGF0dXMudGV4dENvbnRlbnQgPSBcIldpYWRvbW/Fm8SHIHd5c8WCYW5hIVwiO1xyXG4gIH1cclxuICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgIG1zZ1N0YXR1cy5jbGFzc0xpc3QucmVtb3ZlKFwic3VjY2VzXCIpO1xyXG4gIH0sIDMwMDApO1xyXG5cclxuICBpZiAoZG9jdW1lbnQubG9jYXRpb24uc2VhcmNoID09PSBcIj9tYWlsX3N0YXR1cz1lcnJvclwiKSB7XHJcbiAgICBtc2dTdGF0dXMuY2xhc3NMaXN0LmFkZChcImVycm9yXCIpO1xyXG4gICAgbXNnU3RhdHVzLnRleHRDb250ZW50ID0gXCJixYLEhWQsIHNwcsOzYnVqIHBvbm93bmllXCI7XHJcbiAgfVxyXG4gIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgbXNnU3RhdHVzLmNsYXNzTGlzdC5yZW1vdmUoXCJlcnJvclwiKTtcclxuICB9LCAzMDAwKTtcclxuXHJcbiAgLy8gZm9vdGVyXHJcbiAgY29uc3QgY3VycmVudERhdGUgPSBuZXcgRGF0ZSgpO1xyXG4gIGNvbnN0IGN1cnJlbnRZZWFyID0gY3VycmVudERhdGUuZ2V0RnVsbFllYXIoKTtcclxuXHJcbiAgY29uc3QgaGFuZGxlRm9vdGVyWWVhciA9ICgpID0+IHtcclxuICAgIGZvb3RlckRhdGUudGV4dENvbnRlbnQgPSBjdXJyZW50WWVhci50b1N0cmluZygpO1xyXG4gIH07XHJcblxyXG4gIGhhbmRsZUZvb3RlclllYXIoKTtcclxuICAvLyBOQVZcclxuXHJcbiAgY29uc3QgaGFuZGxlTmF2ID0gKCkgPT4ge1xyXG4gICAgbmF2TW9iaWxlLmNsYXNzTGlzdC50b2dnbGUoXCJhY3RpdmVcIik7XHJcbiAgICBidXJnZXIuY2xhc3NMaXN0LnRvZ2dsZShcImFjdGl2ZVwiKTtcclxuICAgIGJvZHkuY2xhc3NMaXN0LnRvZ2dsZShcImRpc2FibGUtc2Nyb2xsXCIpO1xyXG5cclxuICAgIGFsbE5hdkxpbmtzLmZvckVhY2goKGxpbmspID0+IHtcclxuICAgICAgbGluay5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICAgIG5hdk1vYmlsZS5jbGFzc0xpc3QucmVtb3ZlKFwiYWN0aXZlXCIpO1xyXG4gICAgICAgIGJ1cmdlci5jbGFzc0xpc3QucmVtb3ZlKFwiYWN0aXZlXCIpO1xyXG4gICAgICAgIGJvZHkuY2xhc3NMaXN0LnJlbW92ZShcImRpc2FibGUtc2Nyb2xsXCIpO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH07XHJcbiAgY29uc3QgaGFuZGxlQXJyb3dVcCA9ICgpID0+IHtcclxuICAgIGNvbnN0IGN1cnJlbnRTZWN0aW9uID0gd2luZG93LnNjcm9sbFk7XHJcbiAgICBpZiAoY3VycmVudFNlY3Rpb24gPiA0ODApIHtcclxuICAgICAgYXJyb3dVcC5jbGFzc0xpc3QuYWRkKFwiYWN0aXZlXCIpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgYXJyb3dVcC5jbGFzc0xpc3QucmVtb3ZlKFwiYWN0aXZlXCIpO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIGNvbnN0IGhhbmRsZU9ic2VydmVyID0gKCkgPT4ge1xyXG4gICAgY29uc3QgY3VycmVudFNlY3Rpb24gPSB3aW5kb3cuc2Nyb2xsWTtcclxuXHJcbiAgICBhbGxTZWN0aW9ucy5mb3JFYWNoKChzZWN0aW9uKSA9PiB7XHJcbiAgICAgIGlmIChcclxuICAgICAgICAhc2VjdGlvbi5jbGFzc0xpc3QuY29udGFpbnMoXCJ3aGl0ZS1zZWN0aW9uXCIpICYmXHJcbiAgICAgICAgc2VjdGlvbi5vZmZzZXRUb3AgPD0gY3VycmVudFNlY3Rpb24gKyAzMFxyXG4gICAgICApIHtcclxuICAgICAgICBhbGxCdXJnZXJCYXJzLmZvckVhY2goKGJhcikgPT4gYmFyLmNsYXNzTGlzdC5hZGQoXCJ3aGl0ZS1idXJnZXJcIikpO1xyXG4gICAgICB9IGVsc2UgaWYgKFxyXG4gICAgICAgIHNlY3Rpb24uY2xhc3NMaXN0LmNvbnRhaW5zKFwid2hpdGUtc2VjdGlvblwiKSAmJlxyXG4gICAgICAgIHNlY3Rpb24ub2Zmc2V0VG9wIDw9IGN1cnJlbnRTZWN0aW9uICsgMTAwXHJcbiAgICAgICkge1xyXG4gICAgICAgIGFsbEJ1cmdlckJhcnMuZm9yRWFjaCgoYmFyKSA9PiBiYXIuY2xhc3NMaXN0LnJlbW92ZShcIndoaXRlLWJ1cmdlclwiKSk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgaGFuZGxlQXJyb3dVcCgpO1xyXG4gIH07XHJcblxyXG4gIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwic2Nyb2xsXCIsIGhhbmRsZU9ic2VydmVyKTtcclxuICBidXJnZXIuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGhhbmRsZU5hdik7XHJcblxyXG4gIC8vIGZvcm0gdmFsaWRhdG9yXHJcblxyXG4gIGNvbnN0IGNoZWNrVGVsTnVtID0gKHRlbE51bSkgPT4ge1xyXG4gICAgY29uc3QgdmFsaWROdW0gPSAvXlswLTlcXCtdezgsMTN9JC87XHJcblxyXG4gICAgaWYgKHZhbGlkTnVtLnRlc3QodGVsTnVtLnZhbHVlKSkge1xyXG4gICAgICBjbGVhckVycm9yKGVycm9yTXNnVGVsKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHNob3dFcnJvcihlcnJvck1zZ1RlbCwgXCJ3cGlzeiBwb3ByYXdueSBuciB0ZWwuXCIpO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIGNvbnN0IGNoZWNrTWFpbCA9IChlbWFpbCkgPT4ge1xyXG4gICAgY29uc3QgdmFsaWRNYWlsID0gL15bXFx3LVxcLl0rQChbXFx3LV0rXFwuKStbXFx3LV17Miw0fSQvO1xyXG5cclxuICAgIGlmICh2YWxpZE1haWwudGVzdChlbWFpbC52YWx1ZSkpIHtcclxuICAgICAgY2xlYXJFcnJvcihlcnJvck1zZyk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBzaG93RXJyb3IoZXJyb3JNc2csIFwid3Bpc3ogcG9wcmF3bnkgYWRyZXMgZW1haWwuXCIpO1xyXG4gICAgfVxyXG4gIH07XHJcbiAgY29uc3QgY2xlYXJFcnJvciA9IChlbCkgPT4ge1xyXG4gICAgY29uc3QgZm9ybUJveCA9IGVsO1xyXG4gICAgZm9ybUJveC5jbGFzc0xpc3QucmVtb3ZlKFwiZXJyb3ItZGlzcGxheVwiKTtcclxuICAgIGZvcm1Cb3gudGV4dENvbnRlbnQgPSBcIlwiO1xyXG4gIH07XHJcblxyXG4gIGNvbnN0IHNob3dFcnJvciA9IChpbnB1dCwgbXNnKSA9PiB7XHJcbiAgICBjb25zdCBmb3JtQm94ID0gaW5wdXQ7XHJcbiAgICBmb3JtQm94LmNsYXNzTGlzdC5hZGQoXCJlcnJvci1kaXNwbGF5XCIpO1xyXG4gICAgZm9ybUJveC50ZXh0Q29udGVudCA9IG1zZztcclxuICB9O1xyXG5cclxuICAvLyBldmVudCBsaXN0ZW5lcnNcclxuICBzdWJtaXRCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChlKSA9PiB7XHJcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICBjaGVja01haWwoZW1haWwpO1xyXG4gICAgY2hlY2tUZWxOdW0odGVsTnVtKTtcclxuICB9KTtcclxuXHJcbiAgLy8gLS0tLS0tLS0tLS0tLSBHQUxMRVJZIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4gIGNvbnN0IGNhcm91c2VscyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuY2Fyb3VzZWxcIik7XHJcbiAgY29uc3QgdGh1bWJuYWlsc0Nhcm91c2VscyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuY2Fyb3VzZWwtdGh1bWJuYWlsc1wiKTtcclxuICBjb25zdCB3b3JrQnRucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIud29yay1idG5cIik7XHJcblxyXG4gIGNvbnN0IGFycm93SWNvbnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmFycm93XCIpO1xyXG4gIGNvbnN0IGdhbGxlcmllcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuZ2FsbGVyeVwiKTtcclxuICBjb25zdCBoYWlyY3V0R2FsbGVyeSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiaGFpcmN1dFwiKTtcclxuICBjb25zdCBjb2xvckdhbGxlcnkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNvbG9yXCIpO1xyXG4gIGNvbnN0IGJhcmJlckdhbGxlcnkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImJhcmJlclwiKTtcclxuICBjb25zdCBzdHlsZUdhbGxlcnkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInN0eWxlXCIpO1xyXG5cclxuICBjb25zdCBpbWFnZXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmltZ1wiKTtcclxuICBjb25zdCB0aHVtYm5haWxJbWFnZXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnRodW1ibmFpbC1pbWdcIik7XHJcblxyXG4gIGZ1bmN0aW9uIGhhbmRsZVdvcmtCdG4oYnRuKSB7XHJcbiAgICBpZiAoYnRuLmlkID09PSBcImJ0bi1vbmVcIikge1xyXG4gICAgICBsZXQgc3RhcnRJbmRleCA9IDA7XHJcbiAgICAgIGxldCBlbmRJbmRleCA9IDM7XHJcblxyXG4gICAgICBoYW5kbGVEaXNwbGF5R2FsbGVyeShoYWlyY3V0R2FsbGVyeSksIGhhbmRsZUFycm93QWN0aW9uKHN0YXJ0SW5kZXgsIGVuZEluZGV4KTtcclxuICAgIH0gZWxzZSBpZiAoYnRuLmlkID09PSBcImJ0bi10d29cIikge1xyXG4gICAgICBsZXQgc3RhcnRJbmRleCA9IDQ7XHJcbiAgICAgIGxldCBlbmRJbmRleCA9IDc7XHJcbiAgICAgIGhhbmRsZURpc3BsYXlHYWxsZXJ5KGNvbG9yR2FsbGVyeSk7XHJcbiAgICAgIGhhbmRsZUFycm93QWN0aW9uKHN0YXJ0SW5kZXgsIGVuZEluZGV4KTtcclxuICAgIH0gZWxzZSBpZiAoYnRuLmlkID09PSBcImJ0bi10aHJlZVwiKSB7XHJcbiAgICAgIGxldCBzdGFydEluZGV4ID0gODtcclxuICAgICAgbGV0IGVuZEluZGV4ID0gMTE7XHJcbiAgICAgIGhhbmRsZURpc3BsYXlHYWxsZXJ5KGJhcmJlckdhbGxlcnkpO1xyXG4gICAgICBoYW5kbGVBcnJvd0FjdGlvbihzdGFydEluZGV4LCBlbmRJbmRleCk7XHJcbiAgICB9IGVsc2UgaWYgKGJ0bi5pZCA9PT0gXCJidG4tZm91clwiKSB7XHJcbiAgICAgIGxldCBzdGFydEluZGV4ID0gMTI7XHJcbiAgICAgIGxldCBlbmRJbmRleCA9IDE1O1xyXG4gICAgICBoYW5kbGVEaXNwbGF5R2FsbGVyeShzdHlsZUdhbGxlcnkpO1xyXG4gICAgICBoYW5kbGVBcnJvd0FjdGlvbihzdGFydEluZGV4LCBlbmRJbmRleCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBoYW5kbGVBcnJvd0FjdGlvbihzdGFydEluZGV4LCBlbmRJbmRleCkge1xyXG4gICAgbGV0IGluZGV4ID0gc3RhcnRJbmRleDtcclxuICAgIGFycm93SWNvbnMuZm9yRWFjaCgoaWNvbikgPT5cclxuICAgICAgaWNvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICAgIGlmIChpY29uLmlkID09PSBcImxlZnRcIiAmJiBpbmRleCA9PT0gc3RhcnRJbmRleCkge1xyXG4gICAgICAgICAgaW5kZXggPSBlbmRJbmRleCArIDE7XHJcbiAgICAgICAgICBpbmRleC0tO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoaWNvbi5pZCA9PT0gXCJsZWZ0XCIgJiYgaW5kZXggPiBzdGFydEluZGV4KSB7XHJcbiAgICAgICAgICBpbmRleC0tO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoaWNvbi5pZCA9PT0gXCJyaWdodFwiICYmIGluZGV4IDwgZW5kSW5kZXgpIHtcclxuICAgICAgICAgIGluZGV4Kys7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIGluZGV4ID0gc3RhcnRJbmRleDtcclxuICAgICAgICB9XHJcbiAgICAgICAgaGFuZGxlRGlzcGxheUltYWdlKGluZGV4KTtcclxuICAgICAgICBoYW5kbGVBY3RpdmF0ZVRodW1ibmFpbChpbmRleCk7XHJcbiAgICAgIH0pXHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gaGFuZGxlRGlzcGxheUdhbGxlcnkoZ2FsbGVyeVR5cGUpIHtcclxuICAgIGNhcm91c2Vscy5mb3JFYWNoKChjYXJvdXNlbCkgPT4gY2Fyb3VzZWwuZmlyc3RFbGVtZW50Q2hpbGQuY2xhc3NMaXN0LmFkZChcInNob3ctaW1hZ2VcIikpO1xyXG4gICAgdGh1bWJuYWlsc0Nhcm91c2Vscy5mb3JFYWNoKChjYXJvdXNlbCkgPT5cclxuICAgICAgY2Fyb3VzZWwuZmlyc3RFbGVtZW50Q2hpbGQuY2xhc3NMaXN0LnJlbW92ZShcInRodW1ibmFpbC1kaXNhYmxlZFwiKVxyXG4gICAgKTtcclxuICAgIGJvZHkuY2xhc3NMaXN0LmFkZChcImRpc2FibGUtc2Nyb2xsXCIpO1xyXG4gICAgZ2FsbGVyeVR5cGUuY2xhc3NMaXN0LmFkZChcImRpc3BsYXktZ2FsbGVyeVwiKTtcclxuICAgIG5hdkRlc2t0b3AuY2xhc3NMaXN0LmFkZChcIm5hdi10cmFuc2l0aW9uXCIpO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gaGFuZGxlRGlzcGxheUltYWdlKGN1cnJlbnRJbmRleCkge1xyXG4gICAgaW1hZ2VzLmZvckVhY2goKGltYWdlLCBpbmRleCkgPT4ge1xyXG4gICAgICBpZiAoY3VycmVudEluZGV4ID09PSBpbmRleCkge1xyXG4gICAgICAgIGltYWdlLmNsYXNzTGlzdC5hZGQoXCJzaG93LWltYWdlXCIpLCBoYW5kbGVBY3RpdmF0ZVRodW1ibmFpbChpbmRleCk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgaW1hZ2UuY2xhc3NMaXN0LnJlbW92ZShcInNob3ctaW1hZ2VcIik7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gaGFuZGxlQWN0aXZhdGVUaHVtYm5haWwoY3VycmVudEluZGV4KSB7XHJcbiAgICB0aHVtYm5haWxJbWFnZXMuZm9yRWFjaCgodGh1bWJuYWlsLCBpbmRleCkgPT5cclxuICAgICAgY3VycmVudEluZGV4ID09PSBpbmRleFxyXG4gICAgICAgID8gdGh1bWJuYWlsLmNsYXNzTGlzdC5yZW1vdmUoXCJ0aHVtYm5haWwtZGlzYWJsZWRcIilcclxuICAgICAgICA6IHRodW1ibmFpbC5jbGFzc0xpc3QuYWRkKFwidGh1bWJuYWlsLWRpc2FibGVkXCIpXHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgLy8gZXZlbnQgbGlzdGVuZXJzIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICB3b3JrQnRucy5mb3JFYWNoKChidG4pID0+IGJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4gaGFuZGxlV29ya0J0bihidG4pKSk7XHJcblxyXG4gIHRodW1ibmFpbEltYWdlcy5mb3JFYWNoKCh0aHVtYm5haWwsIHRodW1ibmFpbEluZGV4KSA9PlxyXG4gICAgdGh1bWJuYWlsLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgIChpbmRleCA9IHRodW1ibmFpbEluZGV4KSwgaGFuZGxlRGlzcGxheUltYWdlKGluZGV4KTtcclxuICAgIH0pXHJcbiAgKTtcclxuXHJcbiAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChlKSA9PiB7XHJcbiAgICBpZiAoXHJcbiAgICAgIChlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJnYWxsZXJ5XCIpICYmIGJvZHkuY2xhc3NMaXN0LmNvbnRhaW5zKFwiZGlzYWJsZS1zY3JvbGxcIikpIHx8XHJcbiAgICAgIGJvZHkuY2xhc3NMaXN0LmNvbnRhaW5zKFwiY2Fyb3VzZWxcIilcclxuICAgICkge1xyXG4gICAgICBnYWxsZXJpZXMuZm9yRWFjaCgoZ2FsbGVyeSkgPT4gZ2FsbGVyeS5jbGFzc0xpc3QucmVtb3ZlKFwiZGlzcGxheS1nYWxsZXJ5XCIpKTtcclxuICAgICAgYm9keS5jbGFzc0xpc3QucmVtb3ZlKFwiZGlzYWJsZS1zY3JvbGxcIik7XHJcbiAgICAgIG5hdkRlc2t0b3AuY2xhc3NMaXN0LnJlbW92ZShcIm5hdi10cmFuc2l0aW9uXCIpO1xyXG4gICAgICBpbmRleCA9IDA7XHJcblxyXG4gICAgICBjYXJvdXNlbHMuZm9yRWFjaCgoY2Fyb3VzZWwpID0+IGNhcm91c2VsLmZpcnN0RWxlbWVudENoaWxkLmNsYXNzTGlzdC5hZGQoXCJzaG93LWltYWdlXCIpKTtcclxuICAgIH1cclxuICB9KTtcclxuXHJcbiAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1mYWRlSU4gYW5pbSAtLS0tLS0tLS0tLS0tLS1cclxuXHJcbiAgY29uc3Qgb2JzZXJ2ZXIgPSBuZXcgSW50ZXJzZWN0aW9uT2JzZXJ2ZXIoKGVudHJpZXMpID0+IHtcclxuICAgIGVudHJpZXMuZm9yRWFjaCgoZW50cnkpID0+IHtcclxuICAgICAgaWYgKGVudHJ5LmlzSW50ZXJzZWN0aW5nKSB7XHJcbiAgICAgICAgZW50cnkudGFyZ2V0LmNsYXNzTGlzdC5hZGQoXCJzaG93XCIpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9KTtcclxuXHJcbiAgY29uc3QgaGlkZGVuRWxlbWVudHNMZWZ0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5oaWRkZW5cIik7XHJcbiAgY29uc3QgaGlkZGVuRWxlbWVudHNSaWdodCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuaGlkZGVuLXJpZ2h0XCIpO1xyXG4gIGNvbnN0IGhpZGRlblZhbmlzaGVkRWxlbWVudHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmhpZGRlbi12YW5pc2hlZFwiKTtcclxuICBoaWRkZW5FbGVtZW50c0xlZnQuZm9yRWFjaCgoZWwpID0+IG9ic2VydmVyLm9ic2VydmUoZWwpKTtcclxuICBoaWRkZW5FbGVtZW50c1JpZ2h0LmZvckVhY2goKGVsKSA9PiBvYnNlcnZlci5vYnNlcnZlKGVsKSk7XHJcbiAgaGlkZGVuVmFuaXNoZWRFbGVtZW50cy5mb3JFYWNoKChlbCkgPT4gb2JzZXJ2ZXIub2JzZXJ2ZShlbCkpO1xyXG59O1xyXG4iXX0=
