window.onload=function(){var t=document.querySelector(".body"),o=document.querySelector(".burger"),n=document.querySelectorAll(".burger__bars"),c=document.querySelector(".nav"),r=document.querySelector(".nav-desktop"),e=document.querySelectorAll(".nav-mobile__link"),s=document.querySelector(".arrowup"),i=document.querySelector(".footer__bottom--date"),l=document.querySelectorAll(".section"),a=document.querySelector(".error-msg"),u=document.querySelector(".error-msg-tel"),d=document.querySelector(".email"),m=document.querySelector(".telNum"),f=document.querySelector(".submit"),h=document.querySelector(".msg-status"),y=document.querySelector(".cookie-container"),v=document.querySelector(".cookie-box"),L=document.querySelector(".cookie-box__buttons--accept"),b=document.querySelector(".cookie-box__buttons--reject");console.log(y),L.onclick=function(){document.cookie="CookieBy=salonbeata.eu; max-age=86400",document.cookie?v.classList.add("hide"):alert("Cookie can't be set! Please unblock this site from the cookie setting of your browser.")},b.onclick=function(){alert("Pliki Cookies odrzucone. Funkcjonalność strony może zostać ograniczona."),v.classList.add("hide")};function g(e){e.classList.remove("error-display"),e.textContent=""}function w(e,t){e.classList.add("error-display"),e.textContent=t}-1!==document.cookie.indexOf("CookieBy=salonbeata.eu")?v.classList.add("hide"):v.classList.remove("hide"),"?mail_status=sent"===document.location.search&&(h.classList.add("succes"),h.textContent="Wiadomość wysłana!"),setTimeout(function(){h.classList.remove("succes")},3e3),"?mail_status=error"===document.location.search&&(h.classList.add("error"),h.textContent="błąd, spróbuj ponownie"),setTimeout(function(){h.classList.remove("error")},3e3);f.addEventListener("click",function(e){/^[\w-\.]+@([\w-]+\.)+[\w-]{2,4}$/.test(d.value)?g(a):w(a,"wpisz poprawny adres email."),/^[0-9\+]{8,13}$/.test(m.value)?g(u):w(u,"wpisz poprawny nr tel.")});var y=(new Date).getFullYear(),E=(i.textContent=y.toString(),window.addEventListener("scroll",function(){var t=window.scrollY;l.forEach(function(e){!e.classList.contains("white-section")&&e.offsetTop<=t+30?n.forEach(function(e){return e.classList.add("white-burger")}):e.classList.contains("white-section")&&e.offsetTop<=t+100&&n.forEach(function(e){return e.classList.remove("white-burger")})}),480<window.scrollY?s.classList.add("active"):s.classList.remove("active")}),o.addEventListener("click",function(){c.classList.toggle("active"),o.classList.toggle("active"),t.classList.toggle("disable-scroll"),e.forEach(function(e){e.addEventListener("click",function(){c.classList.remove("active"),o.classList.remove("active"),t.classList.remove("disable-scroll")})})}),document.querySelectorAll(".carousel")),S=document.querySelectorAll(".carousel-thumbnails"),L=document.querySelectorAll(".work-btn"),q=document.querySelectorAll(".arrow"),k=document.querySelectorAll(".gallery"),p=document.getElementById("haircut"),A=document.getElementById("color"),x=document.getElementById("barber"),C=document.getElementById("style"),_=document.querySelectorAll(".img"),B=document.querySelectorAll(".thumbnail-img");function I(t,o){var n=t;q.forEach(function(e){return e.addEventListener("click",function(){"left"===e.id&&n===t?(n=o+1,n--):"left"===e.id&&t<n?n--:"right"===e.id&&n<o?n++:n=t,T(n),j(n)})})}function z(e){E.forEach(function(e){return e.firstElementChild.classList.add("show-image")}),S.forEach(function(e){return e.firstElementChild.classList.remove("thumbnail-disabled")}),t.classList.add("disable-scroll"),e.classList.add("display-gallery"),r.classList.add("nav-transition")}function T(o){_.forEach(function(e,t){o===t?(e.classList.add("show-image"),j(t)):e.classList.remove("show-image")})}function j(o){B.forEach(function(e,t){return o===t?e.classList.remove("thumbnail-disabled"):e.classList.add("thumbnail-disabled")})}L.forEach(function(t){return t.addEventListener("click",function(){var e;"btn-one"===(e=t).id?(z(p),I(0,3)):"btn-two"===e.id?(z(A),I(4,7)):"btn-three"===e.id?(z(x),I(8,11)):"btn-four"===e.id&&(z(C),I(12,15))})}),B.forEach(function(e,t){return e.addEventListener("click",function(){T(index=t)})}),document.addEventListener("click",function(e){(e.target.classList.contains("gallery")&&t.classList.contains("disable-scroll")||t.classList.contains("carousel"))&&(k.forEach(function(e){return e.classList.remove("display-gallery")}),t.classList.remove("disable-scroll"),r.classList.remove("nav-transition"),index=0,E.forEach(function(e){return e.firstElementChild.classList.add("show-image")}))});var Y=new IntersectionObserver(function(e){e.forEach(function(e){e.isIntersecting&&e.target.classList.add("show")})}),b=document.querySelectorAll(".hidden"),f=document.querySelectorAll(".hidden-right"),i=document.querySelectorAll(".hidden-vanished");b.forEach(function(e){return Y.observe(e)}),f.forEach(function(e){return Y.observe(e)}),i.forEach(function(e){return Y.observe(e)})};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsid2luZG93Iiwib25sb2FkIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiYnVyZ2VyIiwiYm9keSIsImFsbEJ1cmdlckJhcnMiLCJxdWVyeVNlbGVjdG9yQWxsIiwibmF2TW9iaWxlIiwibmF2RGVza3RvcCIsImFycm93VXAiLCJmb290ZXJEYXRlIiwiYWxsU2VjdGlvbnMiLCJlcnJvck1zZyIsImVycm9yTXNnVGVsIiwiZW1haWwiLCJwaG9uZSIsIm1zZ1N0YXR1cyIsImNvb2tpZUNvbnRhaW5lciIsImNvbnNlbnRCb3giLCJhY2NlcHRCdG4iLCJyZWplY3RCdG4iLCJjb25zb2xlIiwibG9nIiwib25jbGljayIsImNvb2tpZSIsImNsYXNzTGlzdCIsImFkZCIsImFsZXJ0IiwiY2hlY2tDb29raWUiLCJjbGVhckVycm9yIiwiZWwiLCJzdWJtaXRCdG4iLCJhZGRFdmVudExpc3RlbmVyIiwiY2hlY2tNYWlsIiwic2hvd0Vycm9yIiwiaW5wdXQiLCJtc2ciLCJmb3JtQm94IiwiY3VycmVudERhdGUiLCJEYXRlIiwiY3VycmVudFllYXIiLCJ0ZXh0Q29udGVudCIsImluZGV4T2YiLCJyZW1vdmUiLCJsb2NhdGlvbiIsInNlYXJjaCIsInNldFRpbWVvdXQiLCJ2YWxpZE51bSIsInZhbHVlIiwiaGFuZGxlRm9vdGVyWWVhciIsImUiLCJ0ZXN0IiwiYWxsTmF2TGlua3MiLCJ0b2dnbGUiLCJsaW5rIiwiaGFuZGxlRGlzcGxheUdhbGxlcnkiLCJ0b1N0cmluZyIsInNjcm9sbFkiLCJmb3JFYWNoIiwic2VjdGlvbiIsImNhcm91c2VscyIsInRodW1ibmFpbHNDYXJvdXNlbHMiLCJhcnJvd0ljb25zIiwiaGFpcmN1dEdhbGxlcnkiLCJnZXRFbGVtZW50QnlJZCIsImNvbG9yR2FsbGVyeSIsImN1cnJlbnRTZWN0aW9uIiwic3R5bGVHYWxsZXJ5IiwiaGFuZGxlT2JzZXJ2ZXIiLCJoYW5kbGVBcnJvd0FjdGlvbiIsInN0YXJ0SW5kZXgiLCJlbmRJbmRleCIsIndvcmtCdG5zIiwiaWQiLCJiYXJiZXJHYWxsZXJ5IiwidGh1bWJuYWlsSW1hZ2VzIiwiZmlyc3RFbGVtZW50Q2hpbGQiLCJpbmRleCIsImljb24iLCJnYWxsZXJ5VHlwZSIsImhhbmRsZURpc3BsYXlJbWFnZSIsImltYWdlIiwiY3VycmVudEluZGV4IiwiaGFuZGxlQWN0aXZhdGVUaHVtYm5haWwiLCJjYXJvdXNlbCIsImltYWdlcyIsInRhcmdldCIsImNvbnRhaW5zIiwidGh1bWJuYWlsIiwiYnRuIiwiZW50cnkiLCJ0aHVtYm5haWxJbmRleCIsImhpZGRlblZhbmlzaGVkRWxlbWVudHMiLCJvYnNlcnZlciIsIm9ic2VydmUiLCJnYWxsZXJpZXMiLCJnYWxsZXJ5IiwiSW50ZXJzZWN0aW9uT2JzZXJ2ZXIiLCJlbnRyaWVzIiwiaXNJbnRlcnNlY3RpbmciLCJoaWRkZW5FbGVtZW50c0xlZnQiLCJoaWRkZW5FbGVtZW50c1JpZ2h0Il0sIm1hcHBpbmdzIjoiQUFBQUEsT0FBT0MsT0FBUyxXQUFoQkQsSUFBT0MsRUFBTUMsU0FBR0MsY0FBWSxPQUFBLEVBQzFCQyxFQUFBRixTQUFBQyxjQUFBLFNBQUEsRUFDTUUsRUFBZ0JGLFNBQUFBLGlCQUFzQixlQUFBLEVBQ3RDQyxFQUFTRixTQUFTQyxjQUFjLE1BQVUsRUFDMUNHLEVBQWFKLFNBQVdDLGNBQUNJLGNBQWlCLEVBQzFDQyxFQUFZTixTQUFTQyxpQkFBcUIsbUJBQUEsRUFDMUNNLEVBQVVQLFNBQVdDLGNBQWMsVUFBQyxFQUVwQ08sRUFBVVIsU0FBU0MsY0FBYyx1QkFBVyxFQUU1Q1EsRUFBYVQsU0FBU0MsaUJBQWMsVUFBQSxFQUNwQ1MsRUFBV1YsU0FBV0MsY0FBQ0ksWUFBaUIsRUFDeENNLEVBQVdYLFNBQVNDLGNBQWMsZ0JBQWEsRUFDL0NXLEVBQUFBLFNBQWNaLGNBQVNDLFFBQWMsRUFDckNZLEVBQVFiLFNBQVNDLGNBQWMsU0FBUyxFQUN4Q2EsRUFBUWQsU0FBU0MsY0FBYyxTQUFVLEVBR3pDYyxFQUFZZixTQUFT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RSxDQUFDLENBQUEsQ0FDN0QiLCJmaWxlIjoibWFpbi5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJ3aW5kb3cub25sb2FkID0gZnVuY3Rpb24gKCkge1xyXG4gIC8vc2VsZWN0b3JzXHJcbiAgY29uc3QgYm9keSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuYm9keVwiKTtcclxuICBjb25zdCBidXJnZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmJ1cmdlclwiKTtcclxuICBjb25zdCBhbGxCdXJnZXJCYXJzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5idXJnZXJfX2JhcnNcIik7XHJcbiAgY29uc3QgbmF2TW9iaWxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5uYXZcIik7XHJcbiAgY29uc3QgbmF2RGVza3RvcCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubmF2LWRlc2t0b3BcIik7XHJcbiAgY29uc3QgYWxsTmF2TGlua3MgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLm5hdi1tb2JpbGVfX2xpbmtcIik7XHJcbiAgY29uc3QgYXJyb3dVcCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuYXJyb3d1cFwiKTtcclxuXHJcbiAgY29uc3QgZm9vdGVyRGF0ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZm9vdGVyX19ib3R0b20tLWRhdGVcIik7XHJcbiAgY29uc3QgYWxsU2VjdGlvbnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnNlY3Rpb25cIik7XHJcbiAgY29uc3QgZXJyb3JNc2cgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmVycm9yLW1zZ1wiKTtcclxuICBjb25zdCBlcnJvck1zZ1RlbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZXJyb3ItbXNnLXRlbFwiKTtcclxuICBjb25zdCBlbWFpbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZW1haWxcIik7XHJcbiAgY29uc3QgcGhvbmUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnRlbE51bVwiKTtcclxuICBjb25zdCBzdWJtaXRCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnN1Ym1pdFwiKTtcclxuXHJcbiAgY29uc3QgbXNnU3RhdHVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tc2ctc3RhdHVzXCIpO1xyXG5cclxuICAvL2Nvb2tpZUFsZXJ0XHJcbiAgY29uc3QgY29va2llQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jb29raWUtY29udGFpbmVyXCIpO1xyXG4gIGNvbnN0IGNvbnNlbnRCb3ggPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNvb2tpZS1ib3hcIik7XHJcbiAgY29uc3QgYWNjZXB0QnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jb29raWUtYm94X19idXR0b25zLS1hY2NlcHRcIik7XHJcbiAgY29uc3QgcmVqZWN0QnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jb29raWUtYm94X19idXR0b25zLS1yZWplY3RcIik7XHJcbmNvbnNvbGUubG9nKGNvb2tpZUNvbnRhaW5lcik7XHJcbiAgYWNjZXB0QnRuLm9uY2xpY2sgPSAoKSA9PiB7XHJcbiAgICBkb2N1bWVudC5jb29raWUgPSBcIkNvb2tpZUJ5PXNhbG9uYmVhdGEuZXU7IG1heC1hZ2U9XCIgKyA2MCAqIDYwICogMjQ7XHJcbiAgICBpZiAoZG9jdW1lbnQuY29va2llKSB7XHJcbiAgICAgIGNvbnNlbnRCb3guY2xhc3NMaXN0LmFkZChcImhpZGVcIilcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGFsZXJ0KFxyXG4gICAgICAgIFwiQ29va2llIGNhbid0IGJlIHNldCEgUGxlYXNlXCIgK1xyXG4gICAgICAgICAgXCIgdW5ibG9jayB0aGlzIHNpdGUgZnJvbSB0aGUgY29va2llXCIgK1xyXG4gICAgICAgICAgXCIgc2V0dGluZyBvZiB5b3VyIGJyb3dzZXIuXCJcclxuICAgICAgKTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICByZWplY3RCdG4ub25jbGljayA9ICgpID0+IHtcclxuICAgIGFsZXJ0KFwiUGxpa2kgQ29va2llcyBvZHJ6dWNvbmUuIEZ1bmtjam9uYWxub8WbxIcgc3Ryb255IG1vxbxlIHpvc3RhxIcgb2dyYW5pY3pvbmEuXCIpO1xyXG4gICAgY29uc2VudEJveC5jbGFzc0xpc3QuYWRkKFwiaGlkZVwiKTtcclxuICB9O1xyXG5cclxuICBsZXQgY2hlY2tDb29raWUgPSBkb2N1bWVudC5jb29raWUuaW5kZXhPZihcIkNvb2tpZUJ5PXNhbG9uYmVhdGEuZXVcIik7XHJcbiAgY2hlY2tDb29raWUgIT09IC0xID8gY29uc2VudEJveC5jbGFzc0xpc3QuYWRkKFwiaGlkZVwiKSA6IGNvbnNlbnRCb3guY2xhc3NMaXN0LnJlbW92ZShcImhpZGVcIik7XHJcblxyXG4gIC8vc2VuZCBtYWlsXHJcblxyXG4gIGlmIChkb2N1bWVudC5sb2NhdGlvbi5zZWFyY2ggPT09IFwiP21haWxfc3RhdHVzPXNlbnRcIikge1xyXG4gICAgbXNnU3RhdHVzLmNsYXNzTGlzdC5hZGQoXCJzdWNjZXNcIik7XHJcbiAgICBtc2dTdGF0dXMudGV4dENvbnRlbnQgPSBcIldpYWRvbW/Fm8SHIHd5c8WCYW5hIVwiO1xyXG4gIH1cclxuICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgIG1zZ1N0YXR1cy5jbGFzc0xpc3QucmVtb3ZlKFwic3VjY2VzXCIpO1xyXG4gIH0sIDMwMDApO1xyXG5cclxuICBpZiAoZG9jdW1lbnQubG9jYXRpb24uc2VhcmNoID09PSBcIj9tYWlsX3N0YXR1cz1lcnJvclwiKSB7XHJcbiAgICBtc2dTdGF0dXMuY2xhc3NMaXN0LmFkZChcImVycm9yXCIpO1xyXG4gICAgbXNnU3RhdHVzLnRleHRDb250ZW50ID0gXCJixYLEhWQsIHNwcsOzYnVqIHBvbm93bmllXCI7XHJcbiAgfVxyXG4gIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgbXNnU3RhdHVzLmNsYXNzTGlzdC5yZW1vdmUoXCJlcnJvclwiKTtcclxuICB9LCAzMDAwKTtcclxuXHJcbiAgLy8gZm9ybSB2YWxpZGF0b3JcclxuXHJcbiAgY29uc3QgY2hlY2tQaG9uZSA9IChwaG9uZSkgPT4ge1xyXG4gICAgY29uc3QgdmFsaWROdW0gPSAvXlswLTlcXCtdezgsMTN9JC87XHJcblxyXG4gICAgaWYgKHZhbGlkTnVtLnRlc3QocGhvbmUudmFsdWUpKSB7XHJcbiAgICAgIGNsZWFyRXJyb3IoZXJyb3JNc2dUZWwpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgc2hvd0Vycm9yKGVycm9yTXNnVGVsLCBcIndwaXN6IHBvcHJhd255IG5yIHRlbC5cIik7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgY29uc3QgY2hlY2tNYWlsID0gKGVtYWlsKSA9PiB7XHJcbiAgICBjb25zdCB2YWxpZE1haWwgPSAvXltcXHctXFwuXStAKFtcXHctXStcXC4pK1tcXHctXXsyLDR9JC87XHJcblxyXG4gICAgaWYgKHZhbGlkTWFpbC50ZXN0KGVtYWlsLnZhbHVlKSkge1xyXG4gICAgICBjbGVhckVycm9yKGVycm9yTXNnKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHNob3dFcnJvcihlcnJvck1zZywgXCJ3cGlzeiBwb3ByYXdueSBhZHJlcyBlbWFpbC5cIik7XHJcbiAgICB9XHJcbiAgfTtcclxuICBjb25zdCBjbGVhckVycm9yID0gKGVsKSA9PiB7XHJcbiAgICBjb25zdCBmb3JtQm94ID0gZWw7XHJcbiAgICBmb3JtQm94LmNsYXNzTGlzdC5yZW1vdmUoXCJlcnJvci1kaXNwbGF5XCIpO1xyXG4gICAgZm9ybUJveC50ZXh0Q29udGVudCA9IFwiXCI7XHJcbiAgfTtcclxuXHJcbiAgY29uc3Qgc2hvd0Vycm9yID0gKGlucHV0LCBtc2cpID0+IHtcclxuICAgIGNvbnN0IGZvcm1Cb3ggPSBpbnB1dDtcclxuICAgIGZvcm1Cb3guY2xhc3NMaXN0LmFkZChcImVycm9yLWRpc3BsYXlcIik7XHJcbiAgICBmb3JtQm94LnRleHRDb250ZW50ID0gbXNnO1xyXG4gIH07XHJcblxyXG4gIC8vIGV2ZW50IGxpc3RlbmVyc1xyXG4gIHN1Ym1pdEJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpID0+IHtcclxuICAgIGNoZWNrTWFpbChlbWFpbCk7XHJcbiAgICBjaGVja1Bob25lKHBob25lKTtcclxuICB9KTtcclxuXHJcbiAgLy8gZm9vdGVyXHJcbiAgY29uc3QgY3VycmVudERhdGUgPSBuZXcgRGF0ZSgpO1xyXG4gIGNvbnN0IGN1cnJlbnRZZWFyID0gY3VycmVudERhdGUuZ2V0RnVsbFllYXIoKTtcclxuXHJcbiAgY29uc3QgaGFuZGxlRm9vdGVyWWVhciA9ICgpID0+IHtcclxuICAgIGZvb3RlckRhdGUudGV4dENvbnRlbnQgPSBjdXJyZW50WWVhci50b1N0cmluZygpO1xyXG4gIH07XHJcblxyXG4gIGhhbmRsZUZvb3RlclllYXIoKTtcclxuICAvLyBOQVZcclxuXHJcbiAgY29uc3QgaGFuZGxlTmF2ID0gKCkgPT4ge1xyXG4gICAgbmF2TW9iaWxlLmNsYXNzTGlzdC50b2dnbGUoXCJhY3RpdmVcIik7XHJcbiAgICBidXJnZXIuY2xhc3NMaXN0LnRvZ2dsZShcImFjdGl2ZVwiKTtcclxuICAgIGJvZHkuY2xhc3NMaXN0LnRvZ2dsZShcImRpc2FibGUtc2Nyb2xsXCIpO1xyXG5cclxuICAgIGFsbE5hdkxpbmtzLmZvckVhY2goKGxpbmspID0+IHtcclxuICAgICAgbGluay5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICAgIG5hdk1vYmlsZS5jbGFzc0xpc3QucmVtb3ZlKFwiYWN0aXZlXCIpO1xyXG4gICAgICAgIGJ1cmdlci5jbGFzc0xpc3QucmVtb3ZlKFwiYWN0aXZlXCIpO1xyXG4gICAgICAgIGJvZHkuY2xhc3NMaXN0LnJlbW92ZShcImRpc2FibGUtc2Nyb2xsXCIpO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH07XHJcbiAgY29uc3QgaGFuZGxlQXJyb3dVcCA9ICgpID0+IHtcclxuICAgIGNvbnN0IGN1cnJlbnRTZWN0aW9uID0gd2luZG93LnNjcm9sbFk7XHJcbiAgICBpZiAoY3VycmVudFNlY3Rpb24gPiA0ODApIHtcclxuICAgICAgYXJyb3dVcC5jbGFzc0xpc3QuYWRkKFwiYWN0aXZlXCIpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgYXJyb3dVcC5jbGFzc0xpc3QucmVtb3ZlKFwiYWN0aXZlXCIpO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIGNvbnN0IGhhbmRsZU9ic2VydmVyID0gKCkgPT4ge1xyXG4gICAgY29uc3QgY3VycmVudFNlY3Rpb24gPSB3aW5kb3cuc2Nyb2xsWTtcclxuXHJcbiAgICBhbGxTZWN0aW9ucy5mb3JFYWNoKChzZWN0aW9uKSA9PiB7XHJcbiAgICAgIGlmIChcclxuICAgICAgICAhc2VjdGlvbi5jbGFzc0xpc3QuY29udGFpbnMoXCJ3aGl0ZS1zZWN0aW9uXCIpICYmXHJcbiAgICAgICAgc2VjdGlvbi5vZmZzZXRUb3AgPD0gY3VycmVudFNlY3Rpb24gKyAzMFxyXG4gICAgICApIHtcclxuICAgICAgICBhbGxCdXJnZXJCYXJzLmZvckVhY2goKGJhcikgPT4gYmFyLmNsYXNzTGlzdC5hZGQoXCJ3aGl0ZS1idXJnZXJcIikpO1xyXG4gICAgICB9IGVsc2UgaWYgKFxyXG4gICAgICAgIHNlY3Rpb24uY2xhc3NMaXN0LmNvbnRhaW5zKFwid2hpdGUtc2VjdGlvblwiKSAmJlxyXG4gICAgICAgIHNlY3Rpb24ub2Zmc2V0VG9wIDw9IGN1cnJlbnRTZWN0aW9uICsgMTAwXHJcbiAgICAgICkge1xyXG4gICAgICAgIGFsbEJ1cmdlckJhcnMuZm9yRWFjaCgoYmFyKSA9PiBiYXIuY2xhc3NMaXN0LnJlbW92ZShcIndoaXRlLWJ1cmdlclwiKSk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgaGFuZGxlQXJyb3dVcCgpO1xyXG4gIH07XHJcblxyXG4gIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwic2Nyb2xsXCIsIGhhbmRsZU9ic2VydmVyKTtcclxuICBidXJnZXIuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGhhbmRsZU5hdik7XHJcblxyXG4gIC8vIC0tLS0tLS0tLS0tLS0gR0FMTEVSWSAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuICBjb25zdCBjYXJvdXNlbHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmNhcm91c2VsXCIpO1xyXG4gIGNvbnN0IHRodW1ibmFpbHNDYXJvdXNlbHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmNhcm91c2VsLXRodW1ibmFpbHNcIik7XHJcbiAgY29uc3Qgd29ya0J0bnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLndvcmstYnRuXCIpO1xyXG5cclxuICBjb25zdCBhcnJvd0ljb25zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5hcnJvd1wiKTtcclxuICBjb25zdCBnYWxsZXJpZXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmdhbGxlcnlcIik7XHJcbiAgY29uc3QgaGFpcmN1dEdhbGxlcnkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImhhaXJjdXRcIik7XHJcbiAgY29uc3QgY29sb3JHYWxsZXJ5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjb2xvclwiKTtcclxuICBjb25zdCBiYXJiZXJHYWxsZXJ5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJiYXJiZXJcIik7XHJcbiAgY29uc3Qgc3R5bGVHYWxsZXJ5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzdHlsZVwiKTtcclxuXHJcbiAgY29uc3QgaW1hZ2VzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5pbWdcIik7XHJcbiAgY29uc3QgdGh1bWJuYWlsSW1hZ2VzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi50aHVtYm5haWwtaW1nXCIpO1xyXG5cclxuICBmdW5jdGlvbiBoYW5kbGVXb3JrQnRuKGJ0bikge1xyXG4gICAgaWYgKGJ0bi5pZCA9PT0gXCJidG4tb25lXCIpIHtcclxuICAgICAgbGV0IHN0YXJ0SW5kZXggPSAwO1xyXG4gICAgICBsZXQgZW5kSW5kZXggPSAzO1xyXG5cclxuICAgICAgaGFuZGxlRGlzcGxheUdhbGxlcnkoaGFpcmN1dEdhbGxlcnkpLCBoYW5kbGVBcnJvd0FjdGlvbihzdGFydEluZGV4LCBlbmRJbmRleCk7XHJcbiAgICB9IGVsc2UgaWYgKGJ0bi5pZCA9PT0gXCJidG4tdHdvXCIpIHtcclxuICAgICAgbGV0IHN0YXJ0SW5kZXggPSA0O1xyXG4gICAgICBsZXQgZW5kSW5kZXggPSA3O1xyXG4gICAgICBoYW5kbGVEaXNwbGF5R2FsbGVyeShjb2xvckdhbGxlcnkpO1xyXG4gICAgICBoYW5kbGVBcnJvd0FjdGlvbihzdGFydEluZGV4LCBlbmRJbmRleCk7XHJcbiAgICB9IGVsc2UgaWYgKGJ0bi5pZCA9PT0gXCJidG4tdGhyZWVcIikge1xyXG4gICAgICBsZXQgc3RhcnRJbmRleCA9IDg7XHJcbiAgICAgIGxldCBlbmRJbmRleCA9IDExO1xyXG4gICAgICBoYW5kbGVEaXNwbGF5R2FsbGVyeShiYXJiZXJHYWxsZXJ5KTtcclxuICAgICAgaGFuZGxlQXJyb3dBY3Rpb24oc3RhcnRJbmRleCwgZW5kSW5kZXgpO1xyXG4gICAgfSBlbHNlIGlmIChidG4uaWQgPT09IFwiYnRuLWZvdXJcIikge1xyXG4gICAgICBsZXQgc3RhcnRJbmRleCA9IDEyO1xyXG4gICAgICBsZXQgZW5kSW5kZXggPSAxNTtcclxuICAgICAgaGFuZGxlRGlzcGxheUdhbGxlcnkoc3R5bGVHYWxsZXJ5KTtcclxuICAgICAgaGFuZGxlQXJyb3dBY3Rpb24oc3RhcnRJbmRleCwgZW5kSW5kZXgpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gaGFuZGxlQXJyb3dBY3Rpb24oc3RhcnRJbmRleCwgZW5kSW5kZXgpIHtcclxuICAgIGxldCBpbmRleCA9IHN0YXJ0SW5kZXg7XHJcbiAgICBhcnJvd0ljb25zLmZvckVhY2goKGljb24pID0+XHJcbiAgICAgIGljb24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgICBpZiAoaWNvbi5pZCA9PT0gXCJsZWZ0XCIgJiYgaW5kZXggPT09IHN0YXJ0SW5kZXgpIHtcclxuICAgICAgICAgIGluZGV4ID0gZW5kSW5kZXggKyAxO1xyXG4gICAgICAgICAgaW5kZXgtLTtcclxuICAgICAgICB9IGVsc2UgaWYgKGljb24uaWQgPT09IFwibGVmdFwiICYmIGluZGV4ID4gc3RhcnRJbmRleCkge1xyXG4gICAgICAgICAgaW5kZXgtLTtcclxuICAgICAgICB9IGVsc2UgaWYgKGljb24uaWQgPT09IFwicmlnaHRcIiAmJiBpbmRleCA8IGVuZEluZGV4KSB7XHJcbiAgICAgICAgICBpbmRleCsrO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBpbmRleCA9IHN0YXJ0SW5kZXg7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGhhbmRsZURpc3BsYXlJbWFnZShpbmRleCk7XHJcbiAgICAgICAgaGFuZGxlQWN0aXZhdGVUaHVtYm5haWwoaW5kZXgpO1xyXG4gICAgICB9KVxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGhhbmRsZURpc3BsYXlHYWxsZXJ5KGdhbGxlcnlUeXBlKSB7XHJcbiAgICBjYXJvdXNlbHMuZm9yRWFjaCgoY2Fyb3VzZWwpID0+IGNhcm91c2VsLmZpcnN0RWxlbWVudENoaWxkLmNsYXNzTGlzdC5hZGQoXCJzaG93LWltYWdlXCIpKTtcclxuICAgIHRodW1ibmFpbHNDYXJvdXNlbHMuZm9yRWFjaCgoY2Fyb3VzZWwpID0+XHJcbiAgICAgIGNhcm91c2VsLmZpcnN0RWxlbWVudENoaWxkLmNsYXNzTGlzdC5yZW1vdmUoXCJ0aHVtYm5haWwtZGlzYWJsZWRcIilcclxuICAgICk7XHJcbiAgICBib2R5LmNsYXNzTGlzdC5hZGQoXCJkaXNhYmxlLXNjcm9sbFwiKTtcclxuICAgIGdhbGxlcnlUeXBlLmNsYXNzTGlzdC5hZGQoXCJkaXNwbGF5LWdhbGxlcnlcIik7XHJcbiAgICBuYXZEZXNrdG9wLmNsYXNzTGlzdC5hZGQoXCJuYXYtdHJhbnNpdGlvblwiKTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGhhbmRsZURpc3BsYXlJbWFnZShjdXJyZW50SW5kZXgpIHtcclxuICAgIGltYWdlcy5mb3JFYWNoKChpbWFnZSwgaW5kZXgpID0+IHtcclxuICAgICAgaWYgKGN1cnJlbnRJbmRleCA9PT0gaW5kZXgpIHtcclxuICAgICAgICBpbWFnZS5jbGFzc0xpc3QuYWRkKFwic2hvdy1pbWFnZVwiKSwgaGFuZGxlQWN0aXZhdGVUaHVtYm5haWwoaW5kZXgpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGltYWdlLmNsYXNzTGlzdC5yZW1vdmUoXCJzaG93LWltYWdlXCIpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGhhbmRsZUFjdGl2YXRlVGh1bWJuYWlsKGN1cnJlbnRJbmRleCkge1xyXG4gICAgdGh1bWJuYWlsSW1hZ2VzLmZvckVhY2goKHRodW1ibmFpbCwgaW5kZXgpID0+XHJcbiAgICAgIGN1cnJlbnRJbmRleCA9PT0gaW5kZXhcclxuICAgICAgICA/IHRodW1ibmFpbC5jbGFzc0xpc3QucmVtb3ZlKFwidGh1bWJuYWlsLWRpc2FibGVkXCIpXHJcbiAgICAgICAgOiB0aHVtYm5haWwuY2xhc3NMaXN0LmFkZChcInRodW1ibmFpbC1kaXNhYmxlZFwiKVxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIC8vIGV2ZW50IGxpc3RlbmVycyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgd29ya0J0bnMuZm9yRWFjaCgoYnRuKSA9PiBidG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IGhhbmRsZVdvcmtCdG4oYnRuKSkpO1xyXG5cclxuICB0aHVtYm5haWxJbWFnZXMuZm9yRWFjaCgodGh1bWJuYWlsLCB0aHVtYm5haWxJbmRleCkgPT5cclxuICAgIHRodW1ibmFpbC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICAoaW5kZXggPSB0aHVtYm5haWxJbmRleCksIGhhbmRsZURpc3BsYXlJbWFnZShpbmRleCk7XHJcbiAgICB9KVxyXG4gICk7XHJcblxyXG4gIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZSkgPT4ge1xyXG4gICAgaWYgKFxyXG4gICAgICAoZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwiZ2FsbGVyeVwiKSAmJiBib2R5LmNsYXNzTGlzdC5jb250YWlucyhcImRpc2FibGUtc2Nyb2xsXCIpKSB8fFxyXG4gICAgICBib2R5LmNsYXNzTGlzdC5jb250YWlucyhcImNhcm91c2VsXCIpXHJcbiAgICApIHtcclxuICAgICAgZ2FsbGVyaWVzLmZvckVhY2goKGdhbGxlcnkpID0+IGdhbGxlcnkuY2xhc3NMaXN0LnJlbW92ZShcImRpc3BsYXktZ2FsbGVyeVwiKSk7XHJcbiAgICAgIGJvZHkuY2xhc3NMaXN0LnJlbW92ZShcImRpc2FibGUtc2Nyb2xsXCIpO1xyXG4gICAgICBuYXZEZXNrdG9wLmNsYXNzTGlzdC5yZW1vdmUoXCJuYXYtdHJhbnNpdGlvblwiKTtcclxuICAgICAgaW5kZXggPSAwO1xyXG5cclxuICAgICAgY2Fyb3VzZWxzLmZvckVhY2goKGNhcm91c2VsKSA9PiBjYXJvdXNlbC5maXJzdEVsZW1lbnRDaGlsZC5jbGFzc0xpc3QuYWRkKFwic2hvdy1pbWFnZVwiKSk7XHJcbiAgICB9XHJcbiAgfSk7XHJcblxyXG4gIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tZmFkZUlOIGFuaW0gLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4gIGNvbnN0IG9ic2VydmVyID0gbmV3IEludGVyc2VjdGlvbk9ic2VydmVyKChlbnRyaWVzKSA9PiB7XHJcbiAgICBlbnRyaWVzLmZvckVhY2goKGVudHJ5KSA9PiB7XHJcbiAgICAgIGlmIChlbnRyeS5pc0ludGVyc2VjdGluZykge1xyXG4gICAgICAgIGVudHJ5LnRhcmdldC5jbGFzc0xpc3QuYWRkKFwic2hvd1wiKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gIGNvbnN0IGhpZGRlbkVsZW1lbnRzTGVmdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuaGlkZGVuXCIpO1xyXG4gIGNvbnN0IGhpZGRlbkVsZW1lbnRzUmlnaHQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmhpZGRlbi1yaWdodFwiKTtcclxuICBjb25zdCBoaWRkZW5WYW5pc2hlZEVsZW1lbnRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5oaWRkZW4tdmFuaXNoZWRcIik7XHJcbiAgaGlkZGVuRWxlbWVudHNMZWZ0LmZvckVhY2goKGVsKSA9PiBvYnNlcnZlci5vYnNlcnZlKGVsKSk7XHJcbiAgaGlkZGVuRWxlbWVudHNSaWdodC5mb3JFYWNoKChlbCkgPT4gb2JzZXJ2ZXIub2JzZXJ2ZShlbCkpO1xyXG4gIGhpZGRlblZhbmlzaGVkRWxlbWVudHMuZm9yRWFjaCgoZWwpID0+IG9ic2VydmVyLm9ic2VydmUoZWwpKTtcclxufTtcclxuIl19
