window.onload=function(){var t=document.querySelector(".body"),o=document.querySelector(".burger"),n=document.querySelectorAll(".burger__bars"),r=document.querySelector(".nav"),c=document.querySelector(".nav-desktop"),e=document.querySelectorAll(".nav-mobile__link"),s=document.querySelector(".arrowup"),i=document.querySelector(".footer__bottom--date"),l=document.querySelectorAll(".section"),a=document.querySelector(".error-msg"),u=document.querySelector(".error-msg-tel"),d=document.querySelector(".email"),m=document.querySelector(".telNum"),f=document.querySelector(".submit"),v=document.querySelector(".msg-status");document.getElementById("cookie-box"),document.querySelector(".cookie-box__buttons--accept"),document.querySelector(".cookie-box__buttons--reject");"?mail_status=sent"===document.location.search&&(v.classList.add("succes"),v.textContent="Wiadomość wysłana!"),setTimeout(function(){v.classList.remove("succes")},3e3),"?mail_status=error"===document.location.search&&(v.classList.add("error"),v.textContent="błąd, spróbuj ponownie"),setTimeout(function(){v.classList.remove("error")},3e3);function y(e){e.classList.remove("error-display"),e.textContent=""}function h(e,t){e.classList.add("error-display"),e.textContent=t}var L=(new Date).getFullYear(),b=(i.textContent=L.toString(),window.addEventListener("scroll",function(){var t=window.scrollY;l.forEach(function(e){!e.classList.contains("white-section")&&e.offsetTop<=t+30?n.forEach(function(e){return e.classList.add("white-burger")}):e.classList.contains("white-section")&&e.offsetTop<=t+100&&n.forEach(function(e){return e.classList.remove("white-burger")})}),480<window.scrollY?s.classList.add("active"):s.classList.remove("active")}),o.addEventListener("click",function(){r.classList.toggle("active"),o.classList.toggle("active"),t.classList.toggle("disable-scroll"),e.forEach(function(e){e.addEventListener("click",function(){r.classList.remove("active"),o.classList.remove("active"),t.classList.remove("disable-scroll")})})}),f.addEventListener("click",function(e){e.preventDefault(),/^[\w-\.]+@([\w-]+\.)+[\w-]{2,4}$/.test(d.value)?y(a):h(a,"wpisz poprawny adres email."),/^[0-9\+]{8,13}$/.test(m.value)?y(u):h(u,"wpisz poprawny nr tel.")}),document.querySelectorAll(".carousel")),g=document.querySelectorAll(".carousel-thumbnails"),i=document.querySelectorAll(".work-btn"),E=document.querySelectorAll(".arrow"),w=document.querySelectorAll(".gallery"),S=document.getElementById("haircut"),q=document.getElementById("color"),p=document.getElementById("barber"),k=document.getElementById("style"),A=document.querySelectorAll(".img"),_=document.querySelectorAll(".thumbnail-img");function x(t,o){var n=t;E.forEach(function(e){return e.addEventListener("click",function(){"left"===e.id&&n===t?(n=o+1,n--):"left"===e.id&&t<n?n--:"right"===e.id&&n<o?n++:n=t,I(n),B(n)})})}function C(e){b.forEach(function(e){return e.firstElementChild.classList.add("show-image")}),g.forEach(function(e){return e.firstElementChild.classList.remove("thumbnail-disabled")}),t.classList.add("disable-scroll"),e.classList.add("display-gallery"),c.classList.add("nav-transition")}function I(o){A.forEach(function(e,t){o===t?(e.classList.add("show-image"),B(t)):e.classList.remove("show-image")})}function B(o){_.forEach(function(e,t){return o===t?e.classList.remove("thumbnail-disabled"):e.classList.add("thumbnail-disabled")})}i.forEach(function(t){return t.addEventListener("click",function(){var e;"btn-one"===(e=t).id?(C(S),x(0,3)):"btn-two"===e.id?(C(q),x(4,7)):"btn-three"===e.id?(C(p),x(8,11)):"btn-four"===e.id&&(C(k),x(12,15))})}),_.forEach(function(e,t){return e.addEventListener("click",function(){I(index=t)})}),document.addEventListener("click",function(e){(e.target.classList.contains("gallery")&&t.classList.contains("disable-scroll")||t.classList.contains("carousel"))&&(w.forEach(function(e){return e.classList.remove("display-gallery")}),t.classList.remove("disable-scroll"),c.classList.remove("nav-transition"),index=0,b.forEach(function(e){return e.firstElementChild.classList.add("show-image")}))});var T=new IntersectionObserver(function(e){e.forEach(function(e){e.isIntersecting&&e.target.classList.add("show")})}),L=document.querySelectorAll(".hidden"),f=document.querySelectorAll(".hidden-right"),i=document.querySelectorAll(".hidden-vanished");L.forEach(function(e){return T.observe(e)}),f.forEach(function(e){return T.observe(e)}),i.forEach(function(e){return T.observe(e)})};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsid2luZG93Iiwib25sb2FkIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiYnVyZ2VyIiwiYm9keSIsImFsbEJ1cmdlckJhcnMiLCJxdWVyeVNlbGVjdG9yQWxsIiwibmF2TW9iaWxlIiwibmF2RGVza3RvcCIsImFycm93VXAiLCJmb290ZXJEYXRlIiwiYWxsU2VjdGlvbnMiLCJlcnJvck1zZyIsImVycm9yTXNnVGVsIiwiZW1haWwiLCJ0ZWxOdW0iLCJtc2dTdGF0dXMiLCJnZXRFbGVtZW50QnlJZCIsImxvY2F0aW9uIiwic2VhcmNoIiwiY2xhc3NMaXN0IiwiYWRkIiwidGV4dENvbnRlbnQiLCJzZXRUaW1lb3V0IiwicmVtb3ZlIiwiYWRkRXZlbnRMaXN0ZW5lciIsInN1Ym1pdEJ0biIsImNoZWNrTWFpbCIsImNoZWNrVGVsTnVtIiwic2hvd0Vycm9yIiwiaW5wdXQiLCJtc2ciLCJmb3JtQm94IiwiY2Fyb3VzZWxzIiwidGh1bWJuYWlsc0Nhcm91c2VscyIsImhhbmRsZUZvb3RlclllYXIiLCJjdXJyZW50RGF0ZSIsImN1cnJlbnRZZWFyIiwidG9TdHJpbmciLCJjdXJyZW50U2VjdGlvbiIsInNjcm9sbFkiLCJmb3JFYWNoIiwic2VjdGlvbiIsImNvbnRhaW5zIiwib2Zmc2V0VG9wIiwiaGFuZGxlQXJyb3dVcCIsImJhciIsInRvZ2dsZSIsImFsbE5hdkxpbmtzIiwibGluayIsImhhaXJjdXRHYWxsZXJ5IiwiZSIsImNvbG9yR2FsbGVyeSIsImJhcmJlckdhbGxlcnkiLCJ2YWx1ZSIsInRlc3QiLCJzdHlsZUdhbGxlcnkiLCJoYW5kbGVEaXNwbGF5R2FsbGVyeSIsImhhbmRsZUFycm93QWN0aW9uIiwiYXJyb3dJY29ucyIsImdhbGxlcmllcyIsInN0YXJ0SW5kZXgiLCJlbmRJbmRleCIsImluZGV4IiwiaWNvbiIsImZpcnN0RWxlbWVudENoaWxkIiwiaWQiLCJjYXJvdXNlbCIsImhhbmRsZURpc3BsYXlJbWFnZSIsImltYWdlIiwiZ2FsbGVyeVR5cGUiLCJoYW5kbGVBY3RpdmF0ZVRodW1ibmFpbCIsImN1cnJlbnRJbmRleCIsInRodW1ibmFpbEltYWdlcyIsInRodW1ibmFpbCIsIndvcmtCdG5zIiwiaW1hZ2VzIiwidGh1bWJuYWlsSW5kZXgiLCJnYWxsZXJ5IiwiYnRuIiwib2JzZXJ2ZXIiLCJlbnRyeSIsInRhcmdldCIsImhpZGRlbkVsZW1lbnRzUmlnaHQiLCJoaWRkZW5WYW5pc2hlZEVsZW1lbnRzIiwiaGlkZGVuRWxlbWVudHNMZWZ0IiwiSW50ZXJzZWN0aW9uT2JzZXJ2ZXIiLCJlbnRyaWVzIiwiaXNJbnRlcnNlY3RpbmciLCJlbCIsIm9ic2VydmUiXSwibWFwcGluZ3MiOiJBQUFBQSxPQUFPQyxPQUFTLFdBQWhCRCxJQUFPQyxFQUFNQyxTQUFHQyxjQUFZLE9BQUEsRUFDMUJDLEVBQUFGLFNBQUFDLGNBQUEsU0FBQSxFQUNNRSxFQUFnQkYsU0FBQUEsaUJBQXNCLGVBQUEsRUFDdENDLEVBQVNGLFNBQVNDLGNBQWMsTUFBVSxFQUMxQ0csRUFBYUosU0FBV0MsY0FBQ0ksY0FBaUIsRUFDMUNDLEVBQVlOLFNBQVNDLGlCQUFxQixtQkFBQSxFQUMxQ00sRUFBVVAsU0FBV0MsY0FBYyxVQUFDLEVBRXBDTyxFQUFVUixTQUFTQyxjQUFjLHVCQUFXLEVBRTVDUSxFQUFhVCxTQUFTQyxpQkFBYyxVQUFBLEVBQ3BDUyxFQUFXVixTQUFXQyxjQUFDSSxZQUFpQixFQUN4Q00sRUFBV1gsU0FBU0MsY0FBYyxnQkFBYSxFQUMvQ1csRUFBQUEsU0FBY1osY0FBU0MsUUFBYyxFQUNyQ1ksRUFBUWIsU0FBU0MsY0FBYyxTQUFTLEVBQ3hDYSxFQUFTZCxTQUFTQyxjQUFjLFNBQVUsRUFHMUNjLEVBQVlmLFNBQVNDLGNBQWMsYUFBYyxFQUlwQ0QsU0FBU2dCLGVBQWUsWUFBYSxFQUN0Q2hCLFNBQVNDLGNBQWMsOEJBQStCLEVBQ3RERCxTQUFTQyxjQUFjLDhCQUErQixFQXlCdkMsc0JBQTdCRCxTQUFTaUIsU0FBU0MsU0FDcEJI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QUFBLFNBQUFDLEdBYkdBLEVBQVE5QyxRQUFRLFNBQUN3QyxHQUNYQSxFQUFNTyxnQkFDUlAsRUFBTUMsT0FBTzlELFVBQVVDLElBQUksTUFBTSxDQUVyQyxDQUFDLENBQ0gsQ0FBQyxFQUVLZ0UsRUFBcUJwRixTQUFTSyxpQkFBaUIsU0FBUyxFQUN4RDZFLEVBQXNCbEYsU0FBU0ssaUJBQWlCLGVBQWUsRUFDL0Q4RSxFQUF5Qm5GLFNBQVNLLGlCQUFpQixrQkFBa0IsRUFDM0UrRSxFQUFtQjVDLFFBQVEsU0FBQ2dELEdBQUUsT0FBS1QsRUFBU1UsUUFBUUQsQ0FBRSxDQUFDLENBQUEsRUFDdkROLEVBQW9CMUMsUUFBUSxTQUFDZ0QsR0FBRSxPQUFLVCxFQUFTVSxRQUFRRCxDQUFFLENBQUMsQ0FBQSxFQUN4REwsRUFBdUIzQyxRQUFRLFNBQUNnRCxHQUFFLE9BQUtULEVBQVNVLFFBQVFELENBQUUsQ0FBQyxDQUFBLENBQzdEIiwiZmlsZSI6Im1haW4ubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsid2luZG93Lm9ubG9hZCA9IGZ1bmN0aW9uICgpIHtcclxuICAvL3NlbGVjdG9yc1xyXG4gIGNvbnN0IGJvZHkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmJvZHlcIik7XHJcbiAgY29uc3QgYnVyZ2VyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5idXJnZXJcIik7XHJcbiAgY29uc3QgYWxsQnVyZ2VyQmFycyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuYnVyZ2VyX19iYXJzXCIpO1xyXG4gIGNvbnN0IG5hdk1vYmlsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubmF2XCIpO1xyXG4gIGNvbnN0IG5hdkRlc2t0b3AgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm5hdi1kZXNrdG9wXCIpO1xyXG4gIGNvbnN0IGFsbE5hdkxpbmtzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5uYXYtbW9iaWxlX19saW5rXCIpO1xyXG4gIGNvbnN0IGFycm93VXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmFycm93dXBcIik7XHJcblxyXG4gIGNvbnN0IGZvb3RlckRhdGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmZvb3Rlcl9fYm90dG9tLS1kYXRlXCIpO1xyXG4gIGNvbnN0IGFsbFNlY3Rpb25zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5zZWN0aW9uXCIpO1xyXG4gIGNvbnN0IGVycm9yTXNnID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5lcnJvci1tc2dcIik7XHJcbiAgY29uc3QgZXJyb3JNc2dUZWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmVycm9yLW1zZy10ZWxcIik7XHJcbiAgY29uc3QgZW1haWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmVtYWlsXCIpO1xyXG4gIGNvbnN0IHRlbE51bSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudGVsTnVtXCIpO1xyXG4gIGNvbnN0IHN1Ym1pdEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuc3VibWl0XCIpO1xyXG5cclxuICBjb25zdCBtc2dTdGF0dXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1zZy1zdGF0dXNcIik7XHJcblxyXG4gIC8vY29va2llQWxlcnRcclxuXHJcbiAgY29uc3QgY29uc2VudEJveCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY29va2llLWJveFwiKTtcclxuICBjb25zdCBhY2NlcHRCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNvb2tpZS1ib3hfX2J1dHRvbnMtLWFjY2VwdFwiKTtcclxuICBjb25zdCByZWplY3RCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNvb2tpZS1ib3hfX2J1dHRvbnMtLXJlamVjdFwiKTtcclxuXHJcbiAgLy8gYWNjZXB0QnRuLm9uY2xpY2sgPSAoKSA9PiB7XHJcbiAgLy8gICBkb2N1bWVudC5jb29raWUgPSBcIkNvb2tpZUJ5PXNhbG9uYmVhdGEuZXU7IG1heC1hZ2U9XCIgKyA2MCAqIDYwICogMjQ7XHJcbiAgLy8gICBpZiAoZG9jdW1lbnQuY29va2llKSB7XHJcbiAgLy8gICAgIGNvbnNlbnRCb3guY2xhc3NMaXN0LmFkZChcImhpZGVcIik7XHJcbiAgLy8gICB9IGVsc2Uge1xyXG4gIC8vICAgICBhbGVydChcclxuICAvLyAgICAgICBcIkNvb2tpZSBjYW4ndCBiZSBzZXQhIFBsZWFzZVwiICtcclxuICAvLyAgICAgICAgIFwiIHVuYmxvY2sgdGhpcyBzaXRlIGZyb20gdGhlIGNvb2tpZVwiICtcclxuICAvLyAgICAgICAgIFwiIHNldHRpbmcgb2YgeW91ciBicm93c2VyLlwiXHJcbiAgLy8gICAgICk7XHJcbiAgLy8gICB9XHJcbiAgLy8gfTtcclxuXHJcbiAgLy8gcmVqZWN0QnRuLm9uY2xpY2sgPSAoKSA9PiB7XHJcbiAgLy8gICBhbGVydChcIkNvb2tpZXMgcmVqZWN0ZWQuIFNvbWUgZnVuY3Rpb25hbGl0eSBtYXkgYmUgbGltaXRlZC5cIik7XHJcbiAgLy8gICBjb25zZW50Qm94LmNsYXNzTGlzdC5hZGQoXCJoaWRlXCIpO1xyXG4gIC8vIH07XHJcblxyXG4gIC8vIGxldCBjaGVja0Nvb2tpZSA9IGRvY3VtZW50LmNvb2tpZS5pbmRleE9mKFwiQ29va2llQnk9R2Vla3NGb3JHZWVrc1wiKTtcclxuICAvLyBjaGVja0Nvb2tpZSAhPT0gLTEgPyBjb25zZW50Qm94LmNsYXNzTGlzdC5hZGQoXCJoaWRlXCIpIDogY29uc2VudEJveC5jbGFzc0xpc3QucmVtb3ZlKFwiaGlkZVwiKTtcclxuXHJcbiAgLy9zZW5kIG1haWxcclxuXHJcbiAgaWYgKGRvY3VtZW50LmxvY2F0aW9uLnNlYXJjaCA9PT0gXCI/bWFpbF9zdGF0dXM9c2VudFwiKSB7XHJcbiAgICBtc2dTdGF0dXMuY2xhc3NMaXN0LmFkZChcInN1Y2Nlc1wiKTtcclxuICAgIG1zZ1N0YXR1cy50ZXh0Q29udGVudCA9IFwiV2lhZG9tb8WbxIcgd3lzxYJhbmEhXCI7XHJcbiAgfVxyXG4gIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgbXNnU3RhdHVzLmNsYXNzTGlzdC5yZW1vdmUoXCJzdWNjZXNcIik7XHJcbiAgfSwgMzAwMCk7XHJcblxyXG4gIGlmIChkb2N1bWVudC5sb2NhdGlvbi5zZWFyY2ggPT09IFwiP21haWxfc3RhdHVzPWVycm9yXCIpIHtcclxuICAgIG1zZ1N0YXR1cy5jbGFzc0xpc3QuYWRkKFwiZXJyb3JcIik7XHJcbiAgICBtc2dTdGF0dXMudGV4dENvbnRlbnQgPSBcImLFgsSFZCwgc3Byw7NidWogcG9ub3duaWVcIjtcclxuICB9XHJcbiAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICBtc2dTdGF0dXMuY2xhc3NMaXN0LnJlbW92ZShcImVycm9yXCIpO1xyXG4gIH0sIDMwMDApO1xyXG5cclxuICAvLyBmb290ZXJcclxuICBjb25zdCBjdXJyZW50RGF0ZSA9IG5ldyBEYXRlKCk7XHJcbiAgY29uc3QgY3VycmVudFllYXIgPSBjdXJyZW50RGF0ZS5nZXRGdWxsWWVhcigpO1xyXG5cclxuICBjb25zdCBoYW5kbGVGb290ZXJZZWFyID0gKCkgPT4ge1xyXG4gICAgZm9vdGVyRGF0ZS50ZXh0Q29udGVudCA9IGN1cnJlbnRZZWFyLnRvU3RyaW5nKCk7XHJcbiAgfTtcclxuXHJcbiAgaGFuZGxlRm9vdGVyWWVhcigpO1xyXG4gIC8vIE5BVlxyXG5cclxuICBjb25zdCBoYW5kbGVOYXYgPSAoKSA9PiB7XHJcbiAgICBuYXZNb2JpbGUuY2xhc3NMaXN0LnRvZ2dsZShcImFjdGl2ZVwiKTtcclxuICAgIGJ1cmdlci5jbGFzc0xpc3QudG9nZ2xlKFwiYWN0aXZlXCIpO1xyXG4gICAgYm9keS5jbGFzc0xpc3QudG9nZ2xlKFwiZGlzYWJsZS1zY3JvbGxcIik7XHJcblxyXG4gICAgYWxsTmF2TGlua3MuZm9yRWFjaCgobGluaykgPT4ge1xyXG4gICAgICBsaW5rLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgICAgbmF2TW9iaWxlLmNsYXNzTGlzdC5yZW1vdmUoXCJhY3RpdmVcIik7XHJcbiAgICAgICAgYnVyZ2VyLmNsYXNzTGlzdC5yZW1vdmUoXCJhY3RpdmVcIik7XHJcbiAgICAgICAgYm9keS5jbGFzc0xpc3QucmVtb3ZlKFwiZGlzYWJsZS1zY3JvbGxcIik7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfTtcclxuICBjb25zdCBoYW5kbGVBcnJvd1VwID0gKCkgPT4ge1xyXG4gICAgY29uc3QgY3VycmVudFNlY3Rpb24gPSB3aW5kb3cuc2Nyb2xsWTtcclxuICAgIGlmIChjdXJyZW50U2VjdGlvbiA+IDQ4MCkge1xyXG4gICAgICBhcnJvd1VwLmNsYXNzTGlzdC5hZGQoXCJhY3RpdmVcIik7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBhcnJvd1VwLmNsYXNzTGlzdC5yZW1vdmUoXCJhY3RpdmVcIik7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgY29uc3QgaGFuZGxlT2JzZXJ2ZXIgPSAoKSA9PiB7XHJcbiAgICBjb25zdCBjdXJyZW50U2VjdGlvbiA9IHdpbmRvdy5zY3JvbGxZO1xyXG5cclxuICAgIGFsbFNlY3Rpb25zLmZvckVhY2goKHNlY3Rpb24pID0+IHtcclxuICAgICAgaWYgKFxyXG4gICAgICAgICFzZWN0aW9uLmNsYXNzTGlzdC5jb250YWlucyhcIndoaXRlLXNlY3Rpb25cIikgJiZcclxuICAgICAgICBzZWN0aW9uLm9mZnNldFRvcCA8PSBjdXJyZW50U2VjdGlvbiArIDMwXHJcbiAgICAgICkge1xyXG4gICAgICAgIGFsbEJ1cmdlckJhcnMuZm9yRWFjaCgoYmFyKSA9PiBiYXIuY2xhc3NMaXN0LmFkZChcIndoaXRlLWJ1cmdlclwiKSk7XHJcbiAgICAgIH0gZWxzZSBpZiAoXHJcbiAgICAgICAgc2VjdGlvbi5jbGFzc0xpc3QuY29udGFpbnMoXCJ3aGl0ZS1zZWN0aW9uXCIpICYmXHJcbiAgICAgICAgc2VjdGlvbi5vZmZzZXRUb3AgPD0gY3VycmVudFNlY3Rpb24gKyAxMDBcclxuICAgICAgKSB7XHJcbiAgICAgICAgYWxsQnVyZ2VyQmFycy5mb3JFYWNoKChiYXIpID0+IGJhci5jbGFzc0xpc3QucmVtb3ZlKFwid2hpdGUtYnVyZ2VyXCIpKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICBoYW5kbGVBcnJvd1VwKCk7XHJcbiAgfTtcclxuXHJcbiAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJzY3JvbGxcIiwgaGFuZGxlT2JzZXJ2ZXIpO1xyXG4gIGJ1cmdlci5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgaGFuZGxlTmF2KTtcclxuXHJcbiAgLy8gZm9ybSB2YWxpZGF0b3JcclxuXHJcbiAgY29uc3QgY2hlY2tUZWxOdW0gPSAodGVsTnVtKSA9PiB7XHJcbiAgICBjb25zdCB2YWxpZE51bSA9IC9eWzAtOVxcK117OCwxM30kLztcclxuXHJcbiAgICBpZiAodmFsaWROdW0udGVzdCh0ZWxOdW0udmFsdWUpKSB7XHJcbiAgICAgIGNsZWFyRXJyb3IoZXJyb3JNc2dUZWwpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgc2hvd0Vycm9yKGVycm9yTXNnVGVsLCBcIndwaXN6IHBvcHJhd255IG5yIHRlbC5cIik7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgY29uc3QgY2hlY2tNYWlsID0gKGVtYWlsKSA9PiB7XHJcbiAgICBjb25zdCB2YWxpZE1haWwgPSAvXltcXHctXFwuXStAKFtcXHctXStcXC4pK1tcXHctXXsyLDR9JC87XHJcblxyXG4gICAgaWYgKHZhbGlkTWFpbC50ZXN0KGVtYWlsLnZhbHVlKSkge1xyXG4gICAgICBjbGVhckVycm9yKGVycm9yTXNnKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHNob3dFcnJvcihlcnJvck1zZywgXCJ3cGlzeiBwb3ByYXdueSBhZHJlcyBlbWFpbC5cIik7XHJcbiAgICB9XHJcbiAgfTtcclxuICBjb25zdCBjbGVhckVycm9yID0gKGVsKSA9PiB7XHJcbiAgICBjb25zdCBmb3JtQm94ID0gZWw7XHJcbiAgICBmb3JtQm94LmNsYXNzTGlzdC5yZW1vdmUoXCJlcnJvci1kaXNwbGF5XCIpO1xyXG4gICAgZm9ybUJveC50ZXh0Q29udGVudCA9IFwiXCI7XHJcbiAgfTtcclxuXHJcbiAgY29uc3Qgc2hvd0Vycm9yID0gKGlucHV0LCBtc2cpID0+IHtcclxuICAgIGNvbnN0IGZvcm1Cb3ggPSBpbnB1dDtcclxuICAgIGZvcm1Cb3guY2xhc3NMaXN0LmFkZChcImVycm9yLWRpc3BsYXlcIik7XHJcbiAgICBmb3JtQm94LnRleHRDb250ZW50ID0gbXNnO1xyXG4gIH07XHJcblxyXG4gIC8vIGV2ZW50IGxpc3RlbmVyc1xyXG4gIHN1Ym1pdEJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpID0+IHtcclxuICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgIGNoZWNrTWFpbChlbWFpbCk7XHJcbiAgICBjaGVja1RlbE51bSh0ZWxOdW0pO1xyXG4gIH0pO1xyXG5cclxuICAvLyAtLS0tLS0tLS0tLS0tIEdBTExFUlkgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbiAgY29uc3QgY2Fyb3VzZWxzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5jYXJvdXNlbFwiKTtcclxuICBjb25zdCB0aHVtYm5haWxzQ2Fyb3VzZWxzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5jYXJvdXNlbC10aHVtYm5haWxzXCIpO1xyXG4gIGNvbnN0IHdvcmtCdG5zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi53b3JrLWJ0blwiKTtcclxuXHJcbiAgY29uc3QgYXJyb3dJY29ucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuYXJyb3dcIik7XHJcbiAgY29uc3QgZ2FsbGVyaWVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5nYWxsZXJ5XCIpO1xyXG4gIGNvbnN0IGhhaXJjdXRHYWxsZXJ5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJoYWlyY3V0XCIpO1xyXG4gIGNvbnN0IGNvbG9yR2FsbGVyeSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY29sb3JcIik7XHJcbiAgY29uc3QgYmFyYmVyR2FsbGVyeSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYmFyYmVyXCIpO1xyXG4gIGNvbnN0IHN0eWxlR2FsbGVyeSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic3R5bGVcIik7XHJcblxyXG4gIGNvbnN0IGltYWdlcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuaW1nXCIpO1xyXG4gIGNvbnN0IHRodW1ibmFpbEltYWdlcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIudGh1bWJuYWlsLWltZ1wiKTtcclxuXHJcbiAgZnVuY3Rpb24gaGFuZGxlV29ya0J0bihidG4pIHtcclxuICAgIGlmIChidG4uaWQgPT09IFwiYnRuLW9uZVwiKSB7XHJcbiAgICAgIGxldCBzdGFydEluZGV4ID0gMDtcclxuICAgICAgbGV0IGVuZEluZGV4ID0gMztcclxuXHJcbiAgICAgIGhhbmRsZURpc3BsYXlHYWxsZXJ5KGhhaXJjdXRHYWxsZXJ5KSwgaGFuZGxlQXJyb3dBY3Rpb24oc3RhcnRJbmRleCwgZW5kSW5kZXgpO1xyXG4gICAgfSBlbHNlIGlmIChidG4uaWQgPT09IFwiYnRuLXR3b1wiKSB7XHJcbiAgICAgIGxldCBzdGFydEluZGV4ID0gNDtcclxuICAgICAgbGV0IGVuZEluZGV4ID0gNztcclxuICAgICAgaGFuZGxlRGlzcGxheUdhbGxlcnkoY29sb3JHYWxsZXJ5KTtcclxuICAgICAgaGFuZGxlQXJyb3dBY3Rpb24oc3RhcnRJbmRleCwgZW5kSW5kZXgpO1xyXG4gICAgfSBlbHNlIGlmIChidG4uaWQgPT09IFwiYnRuLXRocmVlXCIpIHtcclxuICAgICAgbGV0IHN0YXJ0SW5kZXggPSA4O1xyXG4gICAgICBsZXQgZW5kSW5kZXggPSAxMTtcclxuICAgICAgaGFuZGxlRGlzcGxheUdhbGxlcnkoYmFyYmVyR2FsbGVyeSk7XHJcbiAgICAgIGhhbmRsZUFycm93QWN0aW9uKHN0YXJ0SW5kZXgsIGVuZEluZGV4KTtcclxuICAgIH0gZWxzZSBpZiAoYnRuLmlkID09PSBcImJ0bi1mb3VyXCIpIHtcclxuICAgICAgbGV0IHN0YXJ0SW5kZXggPSAxMjtcclxuICAgICAgbGV0IGVuZEluZGV4ID0gMTU7XHJcbiAgICAgIGhhbmRsZURpc3BsYXlHYWxsZXJ5KHN0eWxlR2FsbGVyeSk7XHJcbiAgICAgIGhhbmRsZUFycm93QWN0aW9uKHN0YXJ0SW5kZXgsIGVuZEluZGV4KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGhhbmRsZUFycm93QWN0aW9uKHN0YXJ0SW5kZXgsIGVuZEluZGV4KSB7XHJcbiAgICBsZXQgaW5kZXggPSBzdGFydEluZGV4O1xyXG4gICAgYXJyb3dJY29ucy5mb3JFYWNoKChpY29uKSA9PlxyXG4gICAgICBpY29uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgICAgaWYgKGljb24uaWQgPT09IFwibGVmdFwiICYmIGluZGV4ID09PSBzdGFydEluZGV4KSB7XHJcbiAgICAgICAgICBpbmRleCA9IGVuZEluZGV4ICsgMTtcclxuICAgICAgICAgIGluZGV4LS07XHJcbiAgICAgICAgfSBlbHNlIGlmIChpY29uLmlkID09PSBcImxlZnRcIiAmJiBpbmRleCA+IHN0YXJ0SW5kZXgpIHtcclxuICAgICAgICAgIGluZGV4LS07XHJcbiAgICAgICAgfSBlbHNlIGlmIChpY29uLmlkID09PSBcInJpZ2h0XCIgJiYgaW5kZXggPCBlbmRJbmRleCkge1xyXG4gICAgICAgICAgaW5kZXgrKztcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgaW5kZXggPSBzdGFydEluZGV4O1xyXG4gICAgICAgIH1cclxuICAgICAgICBoYW5kbGVEaXNwbGF5SW1hZ2UoaW5kZXgpO1xyXG4gICAgICAgIGhhbmRsZUFjdGl2YXRlVGh1bWJuYWlsKGluZGV4KTtcclxuICAgICAgfSlcclxuICAgICk7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBoYW5kbGVEaXNwbGF5R2FsbGVyeShnYWxsZXJ5VHlwZSkge1xyXG4gICAgY2Fyb3VzZWxzLmZvckVhY2goKGNhcm91c2VsKSA9PiBjYXJvdXNlbC5maXJzdEVsZW1lbnRDaGlsZC5jbGFzc0xpc3QuYWRkKFwic2hvdy1pbWFnZVwiKSk7XHJcbiAgICB0aHVtYm5haWxzQ2Fyb3VzZWxzLmZvckVhY2goKGNhcm91c2VsKSA9PlxyXG4gICAgICBjYXJvdXNlbC5maXJzdEVsZW1lbnRDaGlsZC5jbGFzc0xpc3QucmVtb3ZlKFwidGh1bWJuYWlsLWRpc2FibGVkXCIpXHJcbiAgICApO1xyXG4gICAgYm9keS5jbGFzc0xpc3QuYWRkKFwiZGlzYWJsZS1zY3JvbGxcIik7XHJcbiAgICBnYWxsZXJ5VHlwZS5jbGFzc0xpc3QuYWRkKFwiZGlzcGxheS1nYWxsZXJ5XCIpO1xyXG4gICAgbmF2RGVza3RvcC5jbGFzc0xpc3QuYWRkKFwibmF2LXRyYW5zaXRpb25cIik7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBoYW5kbGVEaXNwbGF5SW1hZ2UoY3VycmVudEluZGV4KSB7XHJcbiAgICBpbWFnZXMuZm9yRWFjaCgoaW1hZ2UsIGluZGV4KSA9PiB7XHJcbiAgICAgIGlmIChjdXJyZW50SW5kZXggPT09IGluZGV4KSB7XHJcbiAgICAgICAgaW1hZ2UuY2xhc3NMaXN0LmFkZChcInNob3ctaW1hZ2VcIiksIGhhbmRsZUFjdGl2YXRlVGh1bWJuYWlsKGluZGV4KTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBpbWFnZS5jbGFzc0xpc3QucmVtb3ZlKFwic2hvdy1pbWFnZVwiKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBoYW5kbGVBY3RpdmF0ZVRodW1ibmFpbChjdXJyZW50SW5kZXgpIHtcclxuICAgIHRodW1ibmFpbEltYWdlcy5mb3JFYWNoKCh0aHVtYm5haWwsIGluZGV4KSA9PlxyXG4gICAgICBjdXJyZW50SW5kZXggPT09IGluZGV4XHJcbiAgICAgICAgPyB0aHVtYm5haWwuY2xhc3NMaXN0LnJlbW92ZShcInRodW1ibmFpbC1kaXNhYmxlZFwiKVxyXG4gICAgICAgIDogdGh1bWJuYWlsLmNsYXNzTGlzdC5hZGQoXCJ0aHVtYm5haWwtZGlzYWJsZWRcIilcclxuICAgICk7XHJcbiAgfVxyXG5cclxuICAvLyBldmVudCBsaXN0ZW5lcnMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gIHdvcmtCdG5zLmZvckVhY2goKGJ0bikgPT4gYnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiBoYW5kbGVXb3JrQnRuKGJ0bikpKTtcclxuXHJcbiAgdGh1bWJuYWlsSW1hZ2VzLmZvckVhY2goKHRodW1ibmFpbCwgdGh1bWJuYWlsSW5kZXgpID0+XHJcbiAgICB0aHVtYm5haWwuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgKGluZGV4ID0gdGh1bWJuYWlsSW5kZXgpLCBoYW5kbGVEaXNwbGF5SW1hZ2UoaW5kZXgpO1xyXG4gICAgfSlcclxuICApO1xyXG5cclxuICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpID0+IHtcclxuICAgIGlmIChcclxuICAgICAgKGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcImdhbGxlcnlcIikgJiYgYm9keS5jbGFzc0xpc3QuY29udGFpbnMoXCJkaXNhYmxlLXNjcm9sbFwiKSkgfHxcclxuICAgICAgYm9keS5jbGFzc0xpc3QuY29udGFpbnMoXCJjYXJvdXNlbFwiKVxyXG4gICAgKSB7XHJcbiAgICAgIGdhbGxlcmllcy5mb3JFYWNoKChnYWxsZXJ5KSA9PiBnYWxsZXJ5LmNsYXNzTGlzdC5yZW1vdmUoXCJkaXNwbGF5LWdhbGxlcnlcIikpO1xyXG4gICAgICBib2R5LmNsYXNzTGlzdC5yZW1vdmUoXCJkaXNhYmxlLXNjcm9sbFwiKTtcclxuICAgICAgbmF2RGVza3RvcC5jbGFzc0xpc3QucmVtb3ZlKFwibmF2LXRyYW5zaXRpb25cIik7XHJcbiAgICAgIGluZGV4ID0gMDtcclxuXHJcbiAgICAgIGNhcm91c2Vscy5mb3JFYWNoKChjYXJvdXNlbCkgPT4gY2Fyb3VzZWwuZmlyc3RFbGVtZW50Q2hpbGQuY2xhc3NMaXN0LmFkZChcInNob3ctaW1hZ2VcIikpO1xyXG4gICAgfVxyXG4gIH0pO1xyXG5cclxuICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLWZhZGVJTiBhbmltIC0tLS0tLS0tLS0tLS0tLVxyXG5cclxuICBjb25zdCBvYnNlcnZlciA9IG5ldyBJbnRlcnNlY3Rpb25PYnNlcnZlcigoZW50cmllcykgPT4ge1xyXG4gICAgZW50cmllcy5mb3JFYWNoKChlbnRyeSkgPT4ge1xyXG4gICAgICBpZiAoZW50cnkuaXNJbnRlcnNlY3RpbmcpIHtcclxuICAgICAgICBlbnRyeS50YXJnZXQuY2xhc3NMaXN0LmFkZChcInNob3dcIik7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICBjb25zdCBoaWRkZW5FbGVtZW50c0xlZnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmhpZGRlblwiKTtcclxuICBjb25zdCBoaWRkZW5FbGVtZW50c1JpZ2h0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5oaWRkZW4tcmlnaHRcIik7XHJcbiAgY29uc3QgaGlkZGVuVmFuaXNoZWRFbGVtZW50cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuaGlkZGVuLXZhbmlzaGVkXCIpO1xyXG4gIGhpZGRlbkVsZW1lbnRzTGVmdC5mb3JFYWNoKChlbCkgPT4gb2JzZXJ2ZXIub2JzZXJ2ZShlbCkpO1xyXG4gIGhpZGRlbkVsZW1lbnRzUmlnaHQuZm9yRWFjaCgoZWwpID0+IG9ic2VydmVyLm9ic2VydmUoZWwpKTtcclxuICBoaWRkZW5WYW5pc2hlZEVsZW1lbnRzLmZvckVhY2goKGVsKSA9PiBvYnNlcnZlci5vYnNlcnZlKGVsKSk7XHJcbn07XHJcbiJdfQ==
