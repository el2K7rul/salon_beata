window.onload=function(){var t=document.querySelector(".body"),o=document.querySelector(".burger"),n=document.querySelectorAll(".burger__bars"),c=document.querySelector(".nav"),r=document.querySelector(".nav-desktop"),e=document.querySelectorAll(".nav-mobile__link"),s=document.querySelector(".arrowup"),i=document.querySelector(".footer__bottom--date"),l=document.querySelectorAll(".section"),a=document.querySelector(".error-msg"),u=document.querySelector(".error-msg-tel"),d=document.querySelector(".email"),m=document.querySelector(".telNum"),f=document.querySelector(".submit"),h=document.querySelector(".msg-status"),y=document.querySelector(".cookie-box"),v=document.querySelector(".cookie-box__buttons--accept"),L=document.querySelector(".cookie-box__buttons--reject");v.onclick=function(){document.cookie="CookieBy=salonbeata.eu; max-age=86400",document.cookie?y.classList.add("hide"):alert("Cookie can't be set! Please unblock this site from the cookie setting of your browser.")},L.onclick=function(){alert("Pliki Cookies odrzucone. Funkcjonalność strony może zostać ograniczona."),y.classList.add("hide")};function b(e){e.classList.remove("error-display"),e.textContent=""}function g(e,t){e.classList.add("error-display"),e.textContent=t}-1!==document.cookie.indexOf("CookieBy=salonbeata.eu")?y.classList.add("hide"):y.classList.remove("hide"),"?mail_status=sent"===document.location.search&&(h.classList.add("succes"),h.textContent="Wiadomość wysłana!"),setTimeout(function(){h.classList.remove("succes")},3e3),"?mail_status=error"===document.location.search&&(h.classList.add("error"),h.textContent="błąd, spróbuj ponownie"),setTimeout(function(){h.classList.remove("error")},3e3);f.addEventListener("click",function(e){/^[\w-\.]+@([\w-]+\.)+[\w-]{2,4}$/.test(d.value)?b(a):g(a,"wpisz poprawny adres email."),/^[0-9\+]{8,13}$/.test(m.value)?b(u):g(u,"wpisz poprawny nr tel.")});var v=(new Date).getFullYear(),w=(i.textContent=v.toString(),window.addEventListener("scroll",function(){var t=window.scrollY;l.forEach(function(e){!e.classList.contains("white-section")&&e.offsetTop<=t+30?n.forEach(function(e){return e.classList.add("white-burger")}):e.classList.contains("white-section")&&e.offsetTop<=t+100&&n.forEach(function(e){return e.classList.remove("white-burger")})}),480<window.scrollY?s.classList.add("active"):s.classList.remove("active")}),o.addEventListener("click",function(){c.classList.toggle("active"),o.classList.toggle("active"),t.classList.toggle("disable-scroll"),e.forEach(function(e){e.addEventListener("click",function(){c.classList.remove("active"),o.classList.remove("active"),t.classList.remove("disable-scroll")})})}),document.querySelectorAll(".carousel")),E=document.querySelectorAll(".carousel-thumbnails"),L=document.querySelectorAll(".work-btn"),S=document.querySelectorAll(".arrow"),q=document.querySelectorAll(".gallery"),k=document.getElementById("haircut"),p=document.getElementById("color"),A=document.getElementById("barber"),x=document.getElementById("style"),C=document.querySelectorAll(".img"),_=document.querySelectorAll(".thumbnail-img");function B(t,o){var n=t;S.forEach(function(e){return e.addEventListener("click",function(){"left"===e.id&&n===t?(n=o+1,n--):"left"===e.id&&t<n?n--:"right"===e.id&&n<o?n++:n=t,z(n),T(n)})})}function I(e){w.forEach(function(e){return e.firstElementChild.classList.add("show-image")}),E.forEach(function(e){return e.firstElementChild.classList.remove("thumbnail-disabled")}),t.classList.add("disable-scroll"),e.classList.add("display-gallery"),r.classList.add("nav-transition")}function z(o){C.forEach(function(e,t){o===t?(e.classList.add("show-image"),T(t)):e.classList.remove("show-image")})}function T(o){_.forEach(function(e,t){return o===t?e.classList.remove("thumbnail-disabled"):e.classList.add("thumbnail-disabled")})}L.forEach(function(t){return t.addEventListener("click",function(){var e;"btn-one"===(e=t).id?(I(k),B(0,3)):"btn-two"===e.id?(I(p),B(4,7)):"btn-three"===e.id?(I(A),B(8,11)):"btn-four"===e.id&&(I(x),B(12,15))})}),_.forEach(function(e,t){return e.addEventListener("click",function(){z(index=t)})}),document.addEventListener("click",function(e){(e.target.classList.contains("gallery")&&t.classList.contains("disable-scroll")||t.classList.contains("carousel"))&&(q.forEach(function(e){return e.classList.remove("display-gallery")}),t.classList.remove("disable-scroll"),r.classList.remove("nav-transition"),index=0,w.forEach(function(e){return e.firstElementChild.classList.add("show-image")}))});var j=new IntersectionObserver(function(e){e.forEach(function(e){e.isIntersecting&&e.target.classList.add("show")})}),f=document.querySelectorAll(".hidden"),i=document.querySelectorAll(".hidden-right"),v=document.querySelectorAll(".hidden-vanished");f.forEach(function(e){return j.observe(e)}),i.forEach(function(e){return j.observe(e)}),v.forEach(function(e){return j.observe(e)})};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsid2luZG93Iiwib25sb2FkIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiYnVyZ2VyIiwiYm9keSIsImFsbEJ1cmdlckJhcnMiLCJxdWVyeVNlbGVjdG9yQWxsIiwibmF2TW9iaWxlIiwibmF2RGVza3RvcCIsImFycm93VXAiLCJmb290ZXJEYXRlIiwiYWxsU2VjdGlvbnMiLCJlcnJvck1zZyIsImVycm9yTXNnVGVsIiwiZW1haWwiLCJwaG9uZSIsIm1zZ1N0YXR1cyIsImNvbnNlbnRCb3giLCJhY2NlcHRCdG4iLCJyZWplY3RCdG4iLCJvbmNsaWNrIiwiY29va2llIiwiY2xhc3NMaXN0IiwiYWRkIiwiYWxlcnQiLCJjbGVhckVycm9yIiwiZWwiLCJjaGVja01haWwiLCJyZW1vdmUiLCJjaGVja1Bob25lIiwic2hvd0Vycm9yIiwiaW5wdXQiLCJtc2ciLCJmb3JtQm94IiwiY3VycmVudFllYXIiLCJjdXJyZW50RGF0ZSIsImdldEZ1bGxZZWFyIiwiaGFuZGxlRm9vdGVyWWVhciIsInRleHRDb250ZW50IiwiaW5kZXhPZiIsImxvY2F0aW9uIiwic2VhcmNoIiwic2V0VGltZW91dCIsInZhbGlkTnVtIiwic3VibWl0QnRuIiwiYWRkRXZlbnRMaXN0ZW5lciIsImUiLCJ0ZXN0IiwidmFsdWUiLCJsaW5rIiwiZm9yRWFjaCIsIkRhdGUiLCJoYW5kbGVBcnJvd0FjdGlvbiIsInRvU3RyaW5nIiwiaGFuZGxlRGlzcGxheUdhbGxlcnkiLCJjdXJyZW50U2VjdGlvbiIsInNjcm9sbFkiLCJzZWN0aW9uIiwidGh1bWJuYWlsc0Nhcm91c2VscyIsImNvbnRhaW5zIiwid29ya0J0bnMiLCJvZmZzZXRUb3AiLCJnYWxsZXJpZXMiLCJjb2xvckdhbGxlcnkiLCJnZXRFbGVtZW50QnlJZCIsImJhcmJlckdhbGxlcnkiLCJpbWFnZXMiLCJ0b2dnbGUiLCJhbGxOYXZMaW5rcyIsImhhbmRsZU9ic2VydmVyIiwic3RhcnRJbmRleCIsImVuZEluZGV4IiwiaGFpcmN1dEdhbGxlcnkiLCJzdHlsZUdhbGxlcnkiLCJ0aHVtYm5haWxJbWFnZXMiLCJpbmRleCIsImdhbGxlcnlUeXBlIiwiaWNvbiIsImlkIiwiaGFuZGxlRGlzcGxheUltYWdlIiwiY3VycmVudEluZGV4IiwiaW1hZ2UiLCJoYW5kbGVBY3RpdmF0ZVRodW1ibmFpbCIsImNhcm91c2VsIiwiYnRuIiwiZmlyc3RFbGVtZW50Q2hpbGQiLCJoYW5kbGVXb3JrQnRuIiwidGh1bWJuYWlsSW5kZXgiLCJ0aHVtYm5haWwiLCJ0YXJnZXQiLCJnYWxsZXJ5IiwiZW50cnkiLCJpc0ludGVyc2VjdGluZyIsImFycm93SWNvbnMiLCJjYXJvdXNlbHMiLCJoaWRkZW5FbGVtZW50c0xlZnQiLCJoaWRkZW5FbGVtZW50c1JpZ2h0IiwiaGlkZGVuVmFuaXNoZWRFbGVtZW50cyIsIm9ic2VydmVyIiwiSW50ZXJzZWN0aW9uT2JzZXJ2ZXIiLCJlbnRyaWVzIiwib2JzZXJ2ZSJdLCJtYXBwaW5ncyI6IkFBQUFBLE9BQU9DLE9BQVMsV0FBaEJELElBQU9DLEVBQU1DLFNBQUdDLGNBQVksT0FBQSxFQUMxQkMsRUFBQUYsU0FBQUMsY0FBQSxTQUFBLEVBQ01FLEVBQWdCRixTQUFBQSxpQkFBc0IsZUFBQSxFQUN0Q0MsRUFBU0YsU0FBU0MsY0FBYyxNQUFVLEVBQzFDRyxFQUFhSixTQUFXQyxjQUFDSSxjQUFpQixFQUMxQ0MsRUFBWU4sU0FBU0MsaUJBQXFCLG1CQUFBLEVBQzFDTSxFQUFVUCxTQUFXQyxjQUFjLFVBQUMsRUFFcENPLEVBQVVSLFNBQVNDLGNBQWMsdUJBQVcsRUFFNUNRLEVBQWFULFNBQVNDLGlCQUFjLFVBQUEsRUFDcENTLEVBQVdWLFNBQVdDLGNBQUNJLFlBQWlCLEVBQ3hDTSxFQUFXWCxTQUFTQyxjQUFjLGdCQUFhLEVBQy9DVyxFQUFBQSxTQUFjWixjQUFTQyxRQUFjLEVBQ3JDWSxFQUFRYixTQUFTQyxjQUFjLFNBQVMsRUFDeENhLEVBQVFkLFNBQVNDLGNBQWMsU0FBVSxFQUd6Q2MsRUFB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biAoKSB7XHJcbiAgLy9zZWxlY3RvcnNcclxuICBjb25zdCBib2R5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5ib2R5XCIpO1xyXG4gIGNvbnN0IGJ1cmdlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuYnVyZ2VyXCIpO1xyXG4gIGNvbnN0IGFsbEJ1cmdlckJhcnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmJ1cmdlcl9fYmFyc1wiKTtcclxuICBjb25zdCBuYXZNb2JpbGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm5hdlwiKTtcclxuICBjb25zdCBuYXZEZXNrdG9wID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5uYXYtZGVza3RvcFwiKTtcclxuICBjb25zdCBhbGxOYXZMaW5rcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIubmF2LW1vYmlsZV9fbGlua1wiKTtcclxuICBjb25zdCBhcnJvd1VwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5hcnJvd3VwXCIpO1xyXG5cclxuICBjb25zdCBmb290ZXJEYXRlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5mb290ZXJfX2JvdHRvbS0tZGF0ZVwiKTtcclxuICBjb25zdCBhbGxTZWN0aW9ucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuc2VjdGlvblwiKTtcclxuICBjb25zdCBlcnJvck1zZyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZXJyb3ItbXNnXCIpO1xyXG4gIGNvbnN0IGVycm9yTXNnVGVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5lcnJvci1tc2ctdGVsXCIpO1xyXG4gIGNvbnN0IGVtYWlsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5lbWFpbFwiKTtcclxuICBjb25zdCBwaG9uZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudGVsTnVtXCIpO1xyXG4gIGNvbnN0IHN1Ym1pdEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuc3VibWl0XCIpO1xyXG5cclxuICBjb25zdCBtc2dTdGF0dXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1zZy1zdGF0dXNcIik7XHJcblxyXG4gIC8vY29va2llQWxlcnRcclxuXHJcbiAgY29uc3QgY29uc2VudEJveCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY29va2llLWJveFwiKTtcclxuICBjb25zdCBhY2NlcHRCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNvb2tpZS1ib3hfX2J1dHRvbnMtLWFjY2VwdFwiKTtcclxuICBjb25zdCByZWplY3RCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNvb2tpZS1ib3hfX2J1dHRvbnMtLXJlamVjdFwiKTtcclxuXHJcbiAgYWNjZXB0QnRuLm9uY2xpY2sgPSAoKSA9PiB7XHJcbiAgICBkb2N1bWVudC5jb29raWUgPSBcIkNvb2tpZUJ5PXNhbG9uYmVhdGEuZXU7IG1heC1hZ2U9XCIgKyA2MCAqIDYwICogMjQ7XHJcbiAgICBpZiAoZG9jdW1lbnQuY29va2llKSB7XHJcbiAgICAgIGNvbnNlbnRCb3guY2xhc3NMaXN0LmFkZChcImhpZGVcIik7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBhbGVydChcclxuICAgICAgICBcIkNvb2tpZSBjYW4ndCBiZSBzZXQhIFBsZWFzZVwiICtcclxuICAgICAgICAgIFwiIHVuYmxvY2sgdGhpcyBzaXRlIGZyb20gdGhlIGNvb2tpZVwiICtcclxuICAgICAgICAgIFwiIHNldHRpbmcgb2YgeW91ciBicm93c2VyLlwiXHJcbiAgICAgICk7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgcmVqZWN0QnRuLm9uY2xpY2sgPSAoKSA9PiB7XHJcbiAgICBhbGVydChcIlBsaWtpIENvb2tpZXMgb2RyenVjb25lLiBGdW5rY2pvbmFsbm/Fm8SHIHN0cm9ueSBtb8W8ZSB6b3N0YcSHIG9ncmFuaWN6b25hLlwiKTtcclxuICAgIGNvbnNlbnRCb3guY2xhc3NMaXN0LmFkZChcImhpZGVcIik7XHJcbiAgfTtcclxuXHJcbiAgbGV0IGNoZWNrQ29va2llID0gZG9jdW1lbnQuY29va2llLmluZGV4T2YoXCJDb29raWVCeT1zYWxvbmJlYXRhLmV1XCIpO1xyXG4gIGNoZWNrQ29va2llICE9PSAtMSA/IGNvbnNlbnRCb3guY2xhc3NMaXN0LmFkZChcImhpZGVcIikgOiBjb25zZW50Qm94LmNsYXNzTGlzdC5yZW1vdmUoXCJoaWRlXCIpO1xyXG5cclxuICAvL3NlbmQgbWFpbFxyXG5cclxuICBpZiAoZG9jdW1lbnQubG9jYXRpb24uc2VhcmNoID09PSBcIj9tYWlsX3N0YXR1cz1zZW50XCIpIHtcclxuICAgIG1zZ1N0YXR1cy5jbGFzc0xpc3QuYWRkKFwic3VjY2VzXCIpO1xyXG4gICAgbXNnU3RhdHVzLnRleHRDb250ZW50ID0gXCJXaWFkb21vxZvEhyB3eXPFgmFuYSFcIjtcclxuICB9XHJcbiAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICBtc2dTdGF0dXMuY2xhc3NMaXN0LnJlbW92ZShcInN1Y2Nlc1wiKTtcclxuICB9LCAzMDAwKTtcclxuXHJcbiAgaWYgKGRvY3VtZW50LmxvY2F0aW9uLnNlYXJjaCA9PT0gXCI/bWFpbF9zdGF0dXM9ZXJyb3JcIikge1xyXG4gICAgbXNnU3RhdHVzLmNsYXNzTGlzdC5hZGQoXCJlcnJvclwiKTtcclxuICAgIG1zZ1N0YXR1cy50ZXh0Q29udGVudCA9IFwiYsWCxIVkLCBzcHLDs2J1aiBwb25vd25pZVwiO1xyXG4gIH1cclxuICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgIG1zZ1N0YXR1cy5jbGFzc0xpc3QucmVtb3ZlKFwiZXJyb3JcIik7XHJcbiAgfSwgMzAwMCk7XHJcblxyXG4gIC8vIGZvcm0gdmFsaWRhdG9yXHJcblxyXG4gIGNvbnN0IGNoZWNrUGhvbmUgPSAocGhvbmUpID0+IHtcclxuICAgIGNvbnN0IHZhbGlkTnVtID0gL15bMC05XFwrXXs4LDEzfSQvO1xyXG5cclxuICAgIGlmICh2YWxpZE51bS50ZXN0KHBob25lLnZhbHVlKSkge1xyXG4gICAgICBjbGVhckVycm9yKGVycm9yTXNnVGVsKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHNob3dFcnJvcihlcnJvck1zZ1RlbCwgXCJ3cGlzeiBwb3ByYXdueSBuciB0ZWwuXCIpO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIGNvbnN0IGNoZWNrTWFpbCA9IChlbWFpbCkgPT4ge1xyXG4gICAgY29uc3QgdmFsaWRNYWlsID0gL15bXFx3LVxcLl0rQChbXFx3LV0rXFwuKStbXFx3LV17Miw0fSQvO1xyXG5cclxuICAgIGlmICh2YWxpZE1haWwudGVzdChlbWFpbC52YWx1ZSkpIHtcclxuICAgICAgY2xlYXJFcnJvcihlcnJvck1zZyk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBzaG93RXJyb3IoZXJyb3JNc2csIFwid3Bpc3ogcG9wcmF3bnkgYWRyZXMgZW1haWwuXCIpO1xyXG4gICAgfVxyXG4gIH07XHJcbiAgY29uc3QgY2xlYXJFcnJvciA9IChlbCkgPT4ge1xyXG4gICAgY29uc3QgZm9ybUJveCA9IGVsO1xyXG4gICAgZm9ybUJveC5jbGFzc0xpc3QucmVtb3ZlKFwiZXJyb3ItZGlzcGxheVwiKTtcclxuICAgIGZvcm1Cb3gudGV4dENvbnRlbnQgPSBcIlwiO1xyXG4gIH07XHJcblxyXG4gIGNvbnN0IHNob3dFcnJvciA9IChpbnB1dCwgbXNnKSA9PiB7XHJcbiAgICBjb25zdCBmb3JtQm94ID0gaW5wdXQ7XHJcbiAgICBmb3JtQm94LmNsYXNzTGlzdC5hZGQoXCJlcnJvci1kaXNwbGF5XCIpO1xyXG4gICAgZm9ybUJveC50ZXh0Q29udGVudCA9IG1zZztcclxuICB9O1xyXG5cclxuICAvLyBldmVudCBsaXN0ZW5lcnNcclxuICBzdWJtaXRCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChlKSA9PiB7XHJcbiAgICBjaGVja01haWwoZW1haWwpO1xyXG4gICAgY2hlY2tQaG9uZShwaG9uZSk7XHJcbiAgfSk7XHJcblxyXG4gIC8vIGZvb3RlclxyXG4gIGNvbnN0IGN1cnJlbnREYXRlID0gbmV3IERhdGUoKTtcclxuICBjb25zdCBjdXJyZW50WWVhciA9IGN1cnJlbnREYXRlLmdldEZ1bGxZZWFyKCk7XHJcblxyXG4gIGNvbnN0IGhhbmRsZUZvb3RlclllYXIgPSAoKSA9PiB7XHJcbiAgICBmb290ZXJEYXRlLnRleHRDb250ZW50ID0gY3VycmVudFllYXIudG9TdHJpbmcoKTtcclxuICB9O1xyXG5cclxuICBoYW5kbGVGb290ZXJZZWFyKCk7XHJcbiAgLy8gTkFWXHJcblxyXG4gIGNvbnN0IGhhbmRsZU5hdiA9ICgpID0+IHtcclxuICAgIG5hdk1vYmlsZS5jbGFzc0xpc3QudG9nZ2xlKFwiYWN0aXZlXCIpO1xyXG4gICAgYnVyZ2VyLmNsYXNzTGlzdC50b2dnbGUoXCJhY3RpdmVcIik7XHJcbiAgICBib2R5LmNsYXNzTGlzdC50b2dnbGUoXCJkaXNhYmxlLXNjcm9sbFwiKTtcclxuXHJcbiAgICBhbGxOYXZMaW5rcy5mb3JFYWNoKChsaW5rKSA9PiB7XHJcbiAgICAgIGxpbmsuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgICBuYXZNb2JpbGUuY2xhc3NMaXN0LnJlbW92ZShcImFjdGl2ZVwiKTtcclxuICAgICAgICBidXJnZXIuY2xhc3NMaXN0LnJlbW92ZShcImFjdGl2ZVwiKTtcclxuICAgICAgICBib2R5LmNsYXNzTGlzdC5yZW1vdmUoXCJkaXNhYmxlLXNjcm9sbFwiKTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICB9O1xyXG4gIGNvbnN0IGhhbmRsZUFycm93VXAgPSAoKSA9PiB7XHJcbiAgICBjb25zdCBjdXJyZW50U2VjdGlvbiA9IHdpbmRvdy5zY3JvbGxZO1xyXG4gICAgaWYgKGN1cnJlbnRTZWN0aW9uID4gNDgwKSB7XHJcbiAgICAgIGFycm93VXAuY2xhc3NMaXN0LmFkZChcImFjdGl2ZVwiKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGFycm93VXAuY2xhc3NMaXN0LnJlbW92ZShcImFjdGl2ZVwiKTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICBjb25zdCBoYW5kbGVPYnNlcnZlciA9ICgpID0+IHtcclxuICAgIGNvbnN0IGN1cnJlbnRTZWN0aW9uID0gd2luZG93LnNjcm9sbFk7XHJcblxyXG4gICAgYWxsU2VjdGlvbnMuZm9yRWFjaCgoc2VjdGlvbikgPT4ge1xyXG4gICAgICBpZiAoXHJcbiAgICAgICAgIXNlY3Rpb24uY2xhc3NMaXN0LmNvbnRhaW5zKFwid2hpdGUtc2VjdGlvblwiKSAmJlxyXG4gICAgICAgIHNlY3Rpb24ub2Zmc2V0VG9wIDw9IGN1cnJlbnRTZWN0aW9uICsgMzBcclxuICAgICAgKSB7XHJcbiAgICAgICAgYWxsQnVyZ2VyQmFycy5mb3JFYWNoKChiYXIpID0+IGJhci5jbGFzc0xpc3QuYWRkKFwid2hpdGUtYnVyZ2VyXCIpKTtcclxuICAgICAgfSBlbHNlIGlmIChcclxuICAgICAgICBzZWN0aW9uLmNsYXNzTGlzdC5jb250YWlucyhcIndoaXRlLXNlY3Rpb25cIikgJiZcclxuICAgICAgICBzZWN0aW9uLm9mZnNldFRvcCA8PSBjdXJyZW50U2VjdGlvbiArIDEwMFxyXG4gICAgICApIHtcclxuICAgICAgICBhbGxCdXJnZXJCYXJzLmZvckVhY2goKGJhcikgPT4gYmFyLmNsYXNzTGlzdC5yZW1vdmUoXCJ3aGl0ZS1idXJnZXJcIikpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICAgIGhhbmRsZUFycm93VXAoKTtcclxuICB9O1xyXG5cclxuICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInNjcm9sbFwiLCBoYW5kbGVPYnNlcnZlcik7XHJcbiAgYnVyZ2VyLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBoYW5kbGVOYXYpO1xyXG5cclxuICAvLyAtLS0tLS0tLS0tLS0tIEdBTExFUlkgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbiAgY29uc3QgY2Fyb3VzZWxzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5jYXJvdXNlbFwiKTtcclxuICBjb25zdCB0aHVtYm5haWxzQ2Fyb3VzZWxzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5jYXJvdXNlbC10aHVtYm5haWxzXCIpO1xyXG4gIGNvbnN0IHdvcmtCdG5zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi53b3JrLWJ0blwiKTtcclxuXHJcbiAgY29uc3QgYXJyb3dJY29ucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuYXJyb3dcIik7XHJcbiAgY29uc3QgZ2FsbGVyaWVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5nYWxsZXJ5XCIpO1xyXG4gIGNvbnN0IGhhaXJjdXRHYWxsZXJ5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJoYWlyY3V0XCIpO1xyXG4gIGNvbnN0IGNvbG9yR2FsbGVyeSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY29sb3JcIik7XHJcbiAgY29uc3QgYmFyYmVyR2FsbGVyeSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYmFyYmVyXCIpO1xyXG4gIGNvbnN0IHN0eWxlR2FsbGVyeSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic3R5bGVcIik7XHJcblxyXG4gIGNvbnN0IGltYWdlcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuaW1nXCIpO1xyXG4gIGNvbnN0IHRodW1ibmFpbEltYWdlcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIudGh1bWJuYWlsLWltZ1wiKTtcclxuXHJcbiAgZnVuY3Rpb24gaGFuZGxlV29ya0J0bihidG4pIHtcclxuICAgIGlmIChidG4uaWQgPT09IFwiYnRuLW9uZVwiKSB7XHJcbiAgICAgIGxldCBzdGFydEluZGV4ID0gMDtcclxuICAgICAgbGV0IGVuZEluZGV4ID0gMztcclxuXHJcbiAgICAgIGhhbmRsZURpc3BsYXlHYWxsZXJ5KGhhaXJjdXRHYWxsZXJ5KSwgaGFuZGxlQXJyb3dBY3Rpb24oc3RhcnRJbmRleCwgZW5kSW5kZXgpO1xyXG4gICAgfSBlbHNlIGlmIChidG4uaWQgPT09IFwiYnRuLXR3b1wiKSB7XHJcbiAgICAgIGxldCBzdGFydEluZGV4ID0gNDtcclxuICAgICAgbGV0IGVuZEluZGV4ID0gNztcclxuICAgICAgaGFuZGxlRGlzcGxheUdhbGxlcnkoY29sb3JHYWxsZXJ5KTtcclxuICAgICAgaGFuZGxlQXJyb3dBY3Rpb24oc3RhcnRJbmRleCwgZW5kSW5kZXgpO1xyXG4gICAgfSBlbHNlIGlmIChidG4uaWQgPT09IFwiYnRuLXRocmVlXCIpIHtcclxuICAgICAgbGV0IHN0YXJ0SW5kZXggPSA4O1xyXG4gICAgICBsZXQgZW5kSW5kZXggPSAxMTtcclxuICAgICAgaGFuZGxlRGlzcGxheUdhbGxlcnkoYmFyYmVyR2FsbGVyeSk7XHJcbiAgICAgIGhhbmRsZUFycm93QWN0aW9uKHN0YXJ0SW5kZXgsIGVuZEluZGV4KTtcclxuICAgIH0gZWxzZSBpZiAoYnRuLmlkID09PSBcImJ0bi1mb3VyXCIpIHtcclxuICAgICAgbGV0IHN0YXJ0SW5kZXggPSAxMjtcclxuICAgICAgbGV0IGVuZEluZGV4ID0gMTU7XHJcbiAgICAgIGhhbmRsZURpc3BsYXlHYWxsZXJ5KHN0eWxlR2FsbGVyeSk7XHJcbiAgICAgIGhhbmRsZUFycm93QWN0aW9uKHN0YXJ0SW5kZXgsIGVuZEluZGV4KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGhhbmRsZUFycm93QWN0aW9uKHN0YXJ0SW5kZXgsIGVuZEluZGV4KSB7XHJcbiAgICBsZXQgaW5kZXggPSBzdGFydEluZGV4O1xyXG4gICAgYXJyb3dJY29ucy5mb3JFYWNoKChpY29uKSA9PlxyXG4gICAgICBpY29uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgICAgaWYgKGljb24uaWQgPT09IFwibGVmdFwiICYmIGluZGV4ID09PSBzdGFydEluZGV4KSB7XHJcbiAgICAgICAgICBpbmRleCA9IGVuZEluZGV4ICsgMTtcclxuICAgICAgICAgIGluZGV4LS07XHJcbiAgICAgICAgfSBlbHNlIGlmIChpY29uLmlkID09PSBcImxlZnRcIiAmJiBpbmRleCA+IHN0YXJ0SW5kZXgpIHtcclxuICAgICAgICAgIGluZGV4LS07XHJcbiAgICAgICAgfSBlbHNlIGlmIChpY29uLmlkID09PSBcInJpZ2h0XCIgJiYgaW5kZXggPCBlbmRJbmRleCkge1xyXG4gICAgICAgICAgaW5kZXgrKztcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgaW5kZXggPSBzdGFydEluZGV4O1xyXG4gICAgICAgIH1cclxuICAgICAgICBoYW5kbGVEaXNwbGF5SW1hZ2UoaW5kZXgpO1xyXG4gICAgICAgIGhhbmRsZUFjdGl2YXRlVGh1bWJuYWlsKGluZGV4KTtcclxuICAgICAgfSlcclxuICAgICk7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBoYW5kbGVEaXNwbGF5R2FsbGVyeShnYWxsZXJ5VHlwZSkge1xyXG4gICAgY2Fyb3VzZWxzLmZvckVhY2goKGNhcm91c2VsKSA9PiBjYXJvdXNlbC5maXJzdEVsZW1lbnRDaGlsZC5jbGFzc0xpc3QuYWRkKFwic2hvdy1pbWFnZVwiKSk7XHJcbiAgICB0aHVtYm5haWxzQ2Fyb3VzZWxzLmZvckVhY2goKGNhcm91c2VsKSA9PlxyXG4gICAgICBjYXJvdXNlbC5maXJzdEVsZW1lbnRDaGlsZC5jbGFzc0xpc3QucmVtb3ZlKFwidGh1bWJuYWlsLWRpc2FibGVkXCIpXHJcbiAgICApO1xyXG4gICAgYm9keS5jbGFzc0xpc3QuYWRkKFwiZGlzYWJsZS1zY3JvbGxcIik7XHJcbiAgICBnYWxsZXJ5VHlwZS5jbGFzc0xpc3QuYWRkKFwiZGlzcGxheS1nYWxsZXJ5XCIpO1xyXG4gICAgbmF2RGVza3RvcC5jbGFzc0xpc3QuYWRkKFwibmF2LXRyYW5zaXRpb25cIik7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBoYW5kbGVEaXNwbGF5SW1hZ2UoY3VycmVudEluZGV4KSB7XHJcbiAgICBpbWFnZXMuZm9yRWFjaCgoaW1hZ2UsIGluZGV4KSA9PiB7XHJcbiAgICAgIGlmIChjdXJyZW50SW5kZXggPT09IGluZGV4KSB7XHJcbiAgICAgICAgaW1hZ2UuY2xhc3NMaXN0LmFkZChcInNob3ctaW1hZ2VcIiksIGhhbmRsZUFjdGl2YXRlVGh1bWJuYWlsKGluZGV4KTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBpbWFnZS5jbGFzc0xpc3QucmVtb3ZlKFwic2hvdy1pbWFnZVwiKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBoYW5kbGVBY3RpdmF0ZVRodW1ibmFpbChjdXJyZW50SW5kZXgpIHtcclxuICAgIHRodW1ibmFpbEltYWdlcy5mb3JFYWNoKCh0aHVtYm5haWwsIGluZGV4KSA9PlxyXG4gICAgICBjdXJyZW50SW5kZXggPT09IGluZGV4XHJcbiAgICAgICAgPyB0aHVtYm5haWwuY2xhc3NMaXN0LnJlbW92ZShcInRodW1ibmFpbC1kaXNhYmxlZFwiKVxyXG4gICAgICAgIDogdGh1bWJuYWlsLmNsYXNzTGlzdC5hZGQoXCJ0aHVtYm5haWwtZGlzYWJsZWRcIilcclxuICAgICk7XHJcbiAgfVxyXG5cclxuICAvLyBldmVudCBsaXN0ZW5lcnMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gIHdvcmtCdG5zLmZvckVhY2goKGJ0bikgPT4gYnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiBoYW5kbGVXb3JrQnRuKGJ0bikpKTtcclxuXHJcbiAgdGh1bWJuYWlsSW1hZ2VzLmZvckVhY2goKHRodW1ibmFpbCwgdGh1bWJuYWlsSW5kZXgpID0+XHJcbiAgICB0aHVtYm5haWwuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgKGluZGV4ID0gdGh1bWJuYWlsSW5kZXgpLCBoYW5kbGVEaXNwbGF5SW1hZ2UoaW5kZXgpO1xyXG4gICAgfSlcclxuICApO1xyXG5cclxuICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpID0+IHtcclxuICAgIGlmIChcclxuICAgICAgKGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcImdhbGxlcnlcIikgJiYgYm9keS5jbGFzc0xpc3QuY29udGFpbnMoXCJkaXNhYmxlLXNjcm9sbFwiKSkgfHxcclxuICAgICAgYm9keS5jbGFzc0xpc3QuY29udGFpbnMoXCJjYXJvdXNlbFwiKVxyXG4gICAgKSB7XHJcbiAgICAgIGdhbGxlcmllcy5mb3JFYWNoKChnYWxsZXJ5KSA9PiBnYWxsZXJ5LmNsYXNzTGlzdC5yZW1vdmUoXCJkaXNwbGF5LWdhbGxlcnlcIikpO1xyXG4gICAgICBib2R5LmNsYXNzTGlzdC5yZW1vdmUoXCJkaXNhYmxlLXNjcm9sbFwiKTtcclxuICAgICAgbmF2RGVza3RvcC5jbGFzc0xpc3QucmVtb3ZlKFwibmF2LXRyYW5zaXRpb25cIik7XHJcbiAgICAgIGluZGV4ID0gMDtcclxuXHJcbiAgICAgIGNhcm91c2Vscy5mb3JFYWNoKChjYXJvdXNlbCkgPT4gY2Fyb3VzZWwuZmlyc3RFbGVtZW50Q2hpbGQuY2xhc3NMaXN0LmFkZChcInNob3ctaW1hZ2VcIikpO1xyXG4gICAgfVxyXG4gIH0pO1xyXG5cclxuICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLWZhZGVJTiBhbmltIC0tLS0tLS0tLS0tLS0tLVxyXG5cclxuICBjb25zdCBvYnNlcnZlciA9IG5ldyBJbnRlcnNlY3Rpb25PYnNlcnZlcigoZW50cmllcykgPT4ge1xyXG4gICAgZW50cmllcy5mb3JFYWNoKChlbnRyeSkgPT4ge1xyXG4gICAgICBpZiAoZW50cnkuaXNJbnRlcnNlY3RpbmcpIHtcclxuICAgICAgICBlbnRyeS50YXJnZXQuY2xhc3NMaXN0LmFkZChcInNob3dcIik7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICBjb25zdCBoaWRkZW5FbGVtZW50c0xlZnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmhpZGRlblwiKTtcclxuICBjb25zdCBoaWRkZW5FbGVtZW50c1JpZ2h0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5oaWRkZW4tcmlnaHRcIik7XHJcbiAgY29uc3QgaGlkZGVuVmFuaXNoZWRFbGVtZW50cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuaGlkZGVuLXZhbmlzaGVkXCIpO1xyXG4gIGhpZGRlbkVsZW1lbnRzTGVmdC5mb3JFYWNoKChlbCkgPT4gb2JzZXJ2ZXIub2JzZXJ2ZShlbCkpO1xyXG4gIGhpZGRlbkVsZW1lbnRzUmlnaHQuZm9yRWFjaCgoZWwpID0+IG9ic2VydmVyLm9ic2VydmUoZWwpKTtcclxuICBoaWRkZW5WYW5pc2hlZEVsZW1lbnRzLmZvckVhY2goKGVsKSA9PiBvYnNlcnZlci5vYnNlcnZlKGVsKSk7XHJcbn07XHJcbiJdfQ==
