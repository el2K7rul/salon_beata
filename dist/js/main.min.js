window.onload=function(){function t(e){e.classList.remove("error-display"),e.textContent=""}function n(e,t){e.classList.add("error-display"),e.textContent=t}var o=document.querySelector(".body"),r=document.querySelector(".burger"),c=document.querySelectorAll(".burger__bars"),s=document.querySelector(".nav"),l=document.querySelector(".nav-desktop"),e=document.querySelectorAll(".nav-mobile__link"),i=document.querySelector(".arrowup"),a=document.querySelector(".footer__bottom--date"),u=document.querySelectorAll(".section"),d=document.querySelector(".error-msg"),m=document.querySelector(".error-msg-tel"),f=document.querySelector(".email"),v=document.querySelector(".telNum"),y=document.querySelector(".submit"),L=(new Date).getFullYear(),a=(a.textContent=L.toString(),window.addEventListener("scroll",function(){var t=window.scrollY;u.forEach(function(e){!e.classList.contains("white-section")&&e.offsetTop<=t+30?c.forEach(function(e){return e.classList.add("white-burger")}):e.classList.contains("white-section")&&e.offsetTop<=t+100&&c.forEach(function(e){return e.classList.remove("white-burger")})}),480<window.scrollY?i.classList.add("active"):i.classList.remove("active")}),r.addEventListener("click",function(){s.classList.toggle("active"),r.classList.toggle("active"),o.classList.toggle("disable-scroll"),e.forEach(function(e){e.addEventListener("click",function(){s.classList.remove("active"),r.classList.remove("active"),o.classList.remove("disable-scroll")})})}),y.addEventListener("click",function(e){e.preventDefault(),/^[\w-\.]+@([\w-]+\.)+[\w-]{2,4}$/.test(f.value)?t(d):n(d,"wpisz poprawny adres email."),/^[0-9\+]{8,13}$/.test(v.value)?t(m):n(m,"wpisz poprawny nr tel.")}),document.querySelector(".carousel"),document.querySelectorAll(".work-btn")),g=document.querySelectorAll(".arrow"),h=document.querySelectorAll(".gallery"),b=document.getElementById("haircut"),w=document.getElementById("color"),E=document.getElementById("barber"),S=document.getElementById("style"),q=document.querySelectorAll(".img"),p=document.querySelectorAll(".thumbnail-img");function A(t,n){var o=t;g.forEach(function(e){return e.addEventListener("click",function(){"left"===e.id&&o===t?(o=n+1,o--):"left"===e.id&&t<o?o--:"right"===e.id&&o<n?o++:o=t,I(o),x(o)})})}function k(e){o.classList.add("disable-scroll"),e.classList.add("display-gallery"),l.classList.add("nav-transition")}function I(n){q.forEach(function(e,t){n===t?(e.classList.add("show-image"),x(t)):e.classList.remove("show-image")})}function x(n){p.forEach(function(e,t){return n===t?e.classList.remove("thumbnail-disabled"):e.classList.add("thumbnail-disabled")})}console.log(q),a.forEach(function(t){return t.addEventListener("click",function(){var e;"btn-one"===(e=t).id?(k(b),A(0,3)):"btn-two"===e.id?(k(w),A(4,7)):"btn-three"===e.id?(k(E),A(8,10)):"btn-four"===e.id&&(k(S),A(startIndex,endIndex))})}),p.forEach(function(e,t){return e.addEventListener("click",function(){I(index=t)})}),document.addEventListener("click",function(e){(e.target.classList.contains("gallery")&&o.classList.contains("disable-scroll")||o.classList.contains("carousel"))&&(h.forEach(function(e){return e.classList.remove("display-gallery")}),o.classList.remove("disable-scroll"),l.classList.remove("nav-transition"),index=0)});var _=new IntersectionObserver(function(e){e.forEach(function(e){e.isIntersecting&&e.target.classList.add("show")})}),L=document.querySelectorAll(".hidden"),y=document.querySelectorAll(".hidden-right"),a=document.querySelectorAll(".hidden-vanished");L.forEach(function(e){return _.observe(e)}),y.forEach(function(e){return _.observe(e)}),a.forEach(function(e){return _.observe(e)})};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsid2luZG93Iiwib25sb2FkIiwiY2xlYXJFcnJvciIsImVsIiwic3VibWl0QnRuIiwiYWRkRXZlbnRMaXN0ZW5lciIsImUiLCJwcmV2ZW50RGVmYXVsdCIsInNob3dFcnJvciIsImlucHV0IiwibXNnIiwiZm9ybUJveCIsImNsYXNzTGlzdCIsImFkZCIsInRleHRDb250ZW50IiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiYnVyZ2VyIiwiYm9keSIsImFsbEJ1cmdlckJhcnMiLCJxdWVyeVNlbGVjdG9yQWxsIiwibmF2TW9iaWxlIiwibmF2RGVza3RvcCIsImFycm93VXAiLCJmb290ZXJEYXRlIiwiYWxsU2VjdGlvbnMiLCJlcnJvck1zZyIsImVycm9yTXNnVGVsIiwiZW1haWwiLCJ0ZWxOdW0iLCJjdXJyZW50RGF0ZSIsIkRhdGUiLCJnZXRGdWxsWWVhciIsImJ0biIsImN1cnJlbnRZZWFyIiwidG9TdHJpbmciLCJ2YWxpZE51bSIsImZvckVhY2giLCJzY3JvbGxZIiwic2VjdGlvbiIsIm9mZnNldFRvcCIsImJhciIsImhhbmRsZUFycm93VXAiLCJjb250YWlucyIsImN1cnJlbnRTZWN0aW9uIiwiaGFuZGxlTmF2IiwicmVtb3ZlIiwidG9nZ2xlIiwiYWxsTmF2TGlua3MiLCJsaW5rIiwiZ2FsbGVyaWVzIiwiaGFpcmN1dEdhbGxlcnkiLCJ0ZXN0IiwiY29sb3JHYWxsZXJ5IiwidmFsdWUiLCJiYXJiZXJHYWxsZXJ5IiwiaGFuZGxlV29ya0J0biIsImFycm93SWNvbnMiLCJoYW5kbGVEaXNwbGF5R2FsbGVyeSIsImhhbmRsZUFycm93QWN0aW9uIiwiZ2V0RWxlbWVudEJ5SWQiLCJpbWFnZXMiLCJ0aHVtYm5haWxJbWFnZXMiLCJzdGFydEluZGV4IiwiZW5kSW5kZXgiLCJpbmRleCIsImhhbmRsZURpc3BsYXlJbWFnZSIsImljb24iLCJpbWFnZSIsImhhbmRsZUFjdGl2YXRlVGh1bWJuYWlsIiwiaWQiLCJjdXJyZW50SW5kZXgiLCJ3b3JrQnRucyIsInRodW1ibmFpbCIsImdhbGxlcnlUeXBlIiwiZW50cnkiLCJjb25zb2xlIiwib2JzZXJ2ZXIiLCJvYnNlcnZlIiwic3R5bGVHYWxsZXJ5IiwiaGlkZGVuRWxlbWVudHNSaWdodCIsInRodW1ibmFpbEluZGV4IiwiaGlkZGVuVmFuaXNoZWRFbGVtZW50cyIsInRhcmdldCIsImdhbGxlcnkiLCJJbnRlcnNlY3Rpb25PYnNlcnZlciIsImVudHJpZXMiLCJpc0ludGVyc2VjdGluZyIsImhpZGRlbkVsZW1lbnRzTGVmdCJdLCJtYXBwaW5ncyI6IkFBQUFBLE9BQU9DLE9BQVMsV0E4RkssU0FBYkMsRUFBY0MsR0FhcEJDLEVBQVVDLFVBQUFBLE9BQWlCLGVBQVMsRUFDbENDLEVBQUVDLFlBQWdCLEVBVnBCLENBYUUsU0FBQUMsRUFBQUMsRUFBQUMsR0FFRkMsRUFBQUMsVUFBQUMsSUFBQSxlQUFBLEVBVkVGLEVBQVFHLFlBQWNKLENBWXhCLENBbkhGVixJQUFPQyxFQUFNYyxTQUFHQyxjQUFZLE9BQUEsRUFDMUJDLEVBQUFGLFNBQUFDLGNBQUEsU0FBQSxFQUNNRSxFQUFnQkYsU0FBQUEsaUJBQXNCLGVBQUEsRUFDdENDLEVBQVNGLFNBQVNDLGNBQWMsTUFBVSxFQUMxQ0csRUFBYUosU0FBV0MsY0FBQ0ksY0FBaUIsRUFDMUNDLEVBQVlOLFNBQVNDLGlCQUFxQixtQkFBQSxFQUMxQ00sRUFBVVAsU0FBV0MsY0FBYyxVQUFDLEVBRXBDTyxFQUFVUixTQUFTQyxjQUFjLHVCQUFXLEVBRTVDUSxFQUFhVCxTQUFTQyxpQkFBYyxVQUFBLEVBQ3BDUyxFQUFXVixTQUFXQyxjQUFDSSxZQUFpQixFQUN4Q00sRUFBV1gsU0FBU0MsY0FBYyxnQkFBYSxFQUMvQ1csRUFBQUEsU0FBY1osY0FBU0MsUUFBYyxFQUNyQ1ksRUFBUWIsU0FBU0MsY0FBYyxTQUFTLEVBQ3hDYSxFQUFTZCxTQUFTQyxjQUFjLFNBQVUsRUFJMUNjLEdBRE4sSUFBQUMsTUFDOEJDLFlBQUEsRUFpSHhCQyxHQTdHSlQs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QStDLEdBQUEsT0FBQUEsRUFBQXhFLFVBQUFrQyxPQUFBLGlCQUFBLENBQUEsQ0FBQSxFQUNBNUIsRUFBQU4sVUFBQWtDLE9BQUEsZ0JBQUEsRUFDQXhCLEVBQUFWLFVBQUFrQyxPQUFBLGdCQUFBLEVBQ0FtQixNQUFBLEVBRUEsQ0FBQSxFQUlBLElBQUFZLEVBQUEsSUFBQVEscUJBQUEsU0FBQUMsR0FDQUEsRUFBQWpELFFBQUEsU0FBQXNDLEdBQ0FBLEVBQUFZLGdCQUNBWixFQUFBUSxPQUFBdkUsVUFBQUMsSUFBQSxNQUFBLENBaENFLENBQUMsQ0FDSCxDQUFDLEVBRUsyRSxFQUFxQnpFLFNBQVNLLGlCQUFpQixTQUFTLEVBQ3hENEQsRUFBc0JqRSxTQUFTSyxpQkFBaUIsZUFBZSxFQUMvRDhELEVBQXlCbkUsU0FBU0ssaUJBQWlCLGtCQUFrQixFQUMzRW9FLEVBQW1CbkQsUUFBUSxTQUFDbEMsR0FBRSxPQUFLMEUsRUFBU0MsUUFBUTNFLENBQUUsQ0FBQyxDQUFBLEVBQ3ZENkUsRUFBb0IzQyxRQUFRLFNBQUNsQyxHQUFFLE9BQUswRSxFQUFTQyxRQUFRM0UsQ0FBRSxDQUFDLENBQUEsRUFDeEQrRSxFQUF1QjdDLFFBQVEsU0FBQ2xDLEdBQUUsT0FBSzBFLEVBQVNDLFFBQVEzRSxDQUFFLENBQUMsQ0FBQSxDQUM3RCIsImZpbGUiOiJtYWluLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIndpbmRvdy5vbmxvYWQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgLy9zZWxlY3RvcnNcclxuICBjb25zdCBib2R5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5ib2R5XCIpO1xyXG4gIGNvbnN0IGJ1cmdlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuYnVyZ2VyXCIpO1xyXG4gIGNvbnN0IGFsbEJ1cmdlckJhcnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmJ1cmdlcl9fYmFyc1wiKTtcclxuICBjb25zdCBuYXZNb2JpbGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm5hdlwiKTtcclxuICBjb25zdCBuYXZEZXNrdG9wID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5uYXYtZGVza3RvcFwiKTtcclxuICBjb25zdCBhbGxOYXZMaW5rcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIubmF2LW1vYmlsZV9fbGlua1wiKTtcclxuICBjb25zdCBhcnJvd1VwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5hcnJvd3VwXCIpO1xyXG5cclxuICBjb25zdCBmb290ZXJEYXRlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5mb290ZXJfX2JvdHRvbS0tZGF0ZVwiKTtcclxuICBjb25zdCBhbGxTZWN0aW9ucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuc2VjdGlvblwiKTtcclxuICBjb25zdCBlcnJvck1zZyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZXJyb3ItbXNnXCIpO1xyXG4gIGNvbnN0IGVycm9yTXNnVGVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5lcnJvci1tc2ctdGVsXCIpO1xyXG4gIGNvbnN0IGVtYWlsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5lbWFpbFwiKTtcclxuICBjb25zdCB0ZWxOdW0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnRlbE51bVwiKTtcclxuICBjb25zdCBzdWJtaXRCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnN1Ym1pdFwiKTtcclxuXHJcbiAgLy8gZm9vdGVyXHJcbiAgY29uc3QgY3VycmVudERhdGUgPSBuZXcgRGF0ZSgpO1xyXG4gIGNvbnN0IGN1cnJlbnRZZWFyID0gY3VycmVudERhdGUuZ2V0RnVsbFllYXIoKTtcclxuXHJcbiAgY29uc3QgaGFuZGxlRm9vdGVyWWVhciA9ICgpID0+IHtcclxuICAgIGZvb3RlckRhdGUudGV4dENvbnRlbnQgPSBjdXJyZW50WWVhci50b1N0cmluZygpO1xyXG4gIH07XHJcblxyXG4gIGhhbmRsZUZvb3RlclllYXIoKTtcclxuICAvLyBOQVZcclxuXHJcbiAgY29uc3QgaGFuZGxlTmF2ID0gKCkgPT4ge1xyXG4gICAgbmF2TW9iaWxlLmNsYXNzTGlzdC50b2dnbGUoXCJhY3RpdmVcIik7XHJcbiAgICBidXJnZXIuY2xhc3NMaXN0LnRvZ2dsZShcImFjdGl2ZVwiKTtcclxuICAgIGJvZHkuY2xhc3NMaXN0LnRvZ2dsZShcImRpc2FibGUtc2Nyb2xsXCIpO1xyXG5cclxuICAgIGFsbE5hdkxpbmtzLmZvckVhY2goKGxpbmspID0+IHtcclxuICAgICAgbGluay5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICAgIG5hdk1vYmlsZS5jbGFzc0xpc3QucmVtb3ZlKFwiYWN0aXZlXCIpO1xyXG4gICAgICAgIGJ1cmdlci5jbGFzc0xpc3QucmVtb3ZlKFwiYWN0aXZlXCIpO1xyXG4gICAgICAgIGJvZHkuY2xhc3NMaXN0LnJlbW92ZShcImRpc2FibGUtc2Nyb2xsXCIpO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH07XHJcbiAgY29uc3QgaGFuZGxlQXJyb3dVcCA9ICgpID0+IHtcclxuICAgIGNvbnN0IGN1cnJlbnRTZWN0aW9uID0gd2luZG93LnNjcm9sbFk7XHJcbiAgICBpZiAoY3VycmVudFNlY3Rpb24gPiA0ODApIHtcclxuICAgICAgYXJyb3dVcC5jbGFzc0xpc3QuYWRkKFwiYWN0aXZlXCIpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgYXJyb3dVcC5jbGFzc0xpc3QucmVtb3ZlKFwiYWN0aXZlXCIpO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIGNvbnN0IGhhbmRsZU9ic2VydmVyID0gKCkgPT4ge1xyXG4gICAgY29uc3QgY3VycmVudFNlY3Rpb24gPSB3aW5kb3cuc2Nyb2xsWTtcclxuXHJcbiAgICBhbGxTZWN0aW9ucy5mb3JFYWNoKChzZWN0aW9uKSA9PiB7XHJcbiAgICAgIGlmIChcclxuICAgICAgICAhc2VjdGlvbi5jbGFzc0xpc3QuY29udGFpbnMoXCJ3aGl0ZS1zZWN0aW9uXCIpICYmXHJcbiAgICAgICAgc2VjdGlvbi5vZmZzZXRUb3AgPD0gY3VycmVudFNlY3Rpb24gKyAzMFxyXG4gICAgICApIHtcclxuICAgICAgICBhbGxCdXJnZXJCYXJzLmZvckVhY2goKGJhcikgPT4gYmFyLmNsYXNzTGlzdC5hZGQoXCJ3aGl0ZS1idXJnZXJcIikpO1xyXG4gICAgICB9IGVsc2UgaWYgKFxyXG4gICAgICAgIHNlY3Rpb24uY2xhc3NMaXN0LmNvbnRhaW5zKFwid2hpdGUtc2VjdGlvblwiKSAmJlxyXG4gICAgICAgIHNlY3Rpb24ub2Zmc2V0VG9wIDw9IGN1cnJlbnRTZWN0aW9uICsgMTAwXHJcbiAgICAgICkge1xyXG4gICAgICAgIGFsbEJ1cmdlckJhcnMuZm9yRWFjaCgoYmFyKSA9PiBiYXIuY2xhc3NMaXN0LnJlbW92ZShcIndoaXRlLWJ1cmdlclwiKSk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgaGFuZGxlQXJyb3dVcCgpO1xyXG4gIH07XHJcblxyXG4gIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwic2Nyb2xsXCIsIGhhbmRsZU9ic2VydmVyKTtcclxuICBidXJnZXIuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGhhbmRsZU5hdik7XHJcblxyXG4gIC8vIGZvcm0gdmFsaWRhdG9yXHJcblxyXG4gIGNvbnN0IGNoZWNrVGVsTnVtID0gKHRlbE51bSkgPT4ge1xyXG4gICAgY29uc3QgdmFsaWROdW0gPSAvXlswLTlcXCtdezgsMTN9JC87XHJcblxyXG4gICAgaWYgKHZhbGlkTnVtLnRlc3QodGVsTnVtLnZhbHVlKSkge1xyXG4gICAgICBjbGVhckVycm9yKGVycm9yTXNnVGVsKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHNob3dFcnJvcihlcnJvck1zZ1RlbCwgXCJ3cGlzeiBwb3ByYXdueSBuciB0ZWwuXCIpO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIGNvbnN0IGNoZWNrTWFpbCA9IChlbWFpbCkgPT4ge1xyXG4gICAgY29uc3QgdmFsaWRNYWlsID0gL15bXFx3LVxcLl0rQChbXFx3LV0rXFwuKStbXFx3LV17Miw0fSQvO1xyXG5cclxuICAgIGlmICh2YWxpZE1haWwudGVzdChlbWFpbC52YWx1ZSkpIHtcclxuICAgICAgY2xlYXJFcnJvcihlcnJvck1zZyk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBzaG93RXJyb3IoZXJyb3JNc2csIFwid3Bpc3ogcG9wcmF3bnkgYWRyZXMgZW1haWwuXCIpO1xyXG4gICAgfVxyXG4gIH07XHJcbiAgY29uc3QgY2xlYXJFcnJvciA9IChlbCkgPT4ge1xyXG4gICAgY29uc3QgZm9ybUJveCA9IGVsO1xyXG4gICAgZm9ybUJveC5jbGFzc0xpc3QucmVtb3ZlKFwiZXJyb3ItZGlzcGxheVwiKTtcclxuICAgIGZvcm1Cb3gudGV4dENvbnRlbnQgPSBcIlwiO1xyXG4gIH07XHJcblxyXG4gIGNvbnN0IHNob3dFcnJvciA9IChpbnB1dCwgbXNnKSA9PiB7XHJcbiAgICBjb25zdCBmb3JtQm94ID0gaW5wdXQ7XHJcbiAgICBmb3JtQm94LmNsYXNzTGlzdC5hZGQoXCJlcnJvci1kaXNwbGF5XCIpO1xyXG4gICAgZm9ybUJveC50ZXh0Q29udGVudCA9IG1zZztcclxuICB9O1xyXG5cclxuICAvLyBldmVudCBsaXN0ZW5lcnNcclxuICBzdWJtaXRCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChlKSA9PiB7XHJcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICBjaGVja01haWwoZW1haWwpO1xyXG4gICAgY2hlY2tUZWxOdW0odGVsTnVtKTtcclxuICB9KTtcclxuXHJcbiAgLy8gLS0tLS0tLS0tLS0tLSBHQUxMRVJZIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4gIGNvbnN0IGNhcm91c2VsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJvdXNlbFwiKTtcclxuICBjb25zdCB3b3JrQnRucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIud29yay1idG5cIik7XHJcblxyXG4gIGNvbnN0IGFycm93SWNvbnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmFycm93XCIpO1xyXG4gIGNvbnN0IGdhbGxlcmllcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuZ2FsbGVyeVwiKTtcclxuICBjb25zdCBoYWlyY3V0R2FsbGVyeSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiaGFpcmN1dFwiKTtcclxuICBjb25zdCBjb2xvckdhbGxlcnkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNvbG9yXCIpO1xyXG4gIGNvbnN0IGJhcmJlckdhbGxlcnkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImJhcmJlclwiKTtcclxuICBjb25zdCBzdHlsZUdhbGxlcnkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInN0eWxlXCIpO1xyXG5cclxuICBjb25zdCBpbWFnZXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmltZ1wiKTtcclxuICBjb25zdCB0aHVtYm5haWxJbWFnZXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnRodW1ibmFpbC1pbWdcIik7XHJcblxyXG4gIFxyXG5jb25zb2xlLmxvZyhpbWFnZXMpO1xyXG4gIGZ1bmN0aW9uIGhhbmRsZVdvcmtCdG4oYnRuKSB7XHJcbiAgICBcclxuICAgIGlmIChidG4uaWQgPT09IFwiYnRuLW9uZVwiKSB7XHJcbiAgICAgIGxldCBzdGFydEluZGV4PTA7XHJcbiAgICAgIGxldCBlbmRJbmRleD0zO1xyXG4gICAgICBcclxuICAgICAgaGFuZGxlRGlzcGxheUdhbGxlcnkoaGFpcmN1dEdhbGxlcnkpLFxyXG4gICAgICBoYW5kbGVBcnJvd0FjdGlvbihzdGFydEluZGV4LCBlbmRJbmRleCk7XHJcbiAgICAgIFxyXG4gICAgfSBlbHNlIGlmIChidG4uaWQgPT09IFwiYnRuLXR3b1wiKSB7XHJcbiAgICAgIGxldCBzdGFydEluZGV4PTQ7XHJcbiAgICAgIGxldCBlbmRJbmRleD03O1xyXG4gICAgICBoYW5kbGVEaXNwbGF5R2FsbGVyeShjb2xvckdhbGxlcnkpXHJcbiAgICAgIGhhbmRsZUFycm93QWN0aW9uKHN0YXJ0SW5kZXgsIGVuZEluZGV4KTtcclxuICAgICAgXHJcbiAgICB9IGVsc2UgaWYgKGJ0bi5pZCA9PT0gXCJidG4tdGhyZWVcIikge1xyXG4gICAgICBsZXQgc3RhcnRJbmRleD04O1xyXG4gICAgICBsZXQgZW5kSW5kZXg9MTA7XHJcbiAgICAgIGhhbmRsZURpc3BsYXlHYWxsZXJ5KGJhcmJlckdhbGxlcnkpXHJcbiAgICAgIGhhbmRsZUFycm93QWN0aW9uKHN0YXJ0SW5kZXgsIGVuZEluZGV4KTtcclxuICAgICAgXHJcbiAgICB9IGVsc2UgaWYoYnRuLmlkID09PSAnYnRuLWZvdXInKSB7XHJcbiAgICAgIFxyXG4gICAgICBoYW5kbGVEaXNwbGF5R2FsbGVyeShzdHlsZUdhbGxlcnkpXHJcbiAgICAgIGhhbmRsZUFycm93QWN0aW9uKHN0YXJ0SW5kZXgsIGVuZEluZGV4KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGhhbmRsZUFycm93QWN0aW9uKHN0YXJ0SW5kZXgsIGVuZEluZGV4KSB7XHJcbiAgICBsZXQgaW5kZXggPSBzdGFydEluZGV4O1xyXG4gICAgYXJyb3dJY29ucy5mb3JFYWNoKChpY29uKSA9PiBpY29uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgXHJcbiAgICAgICgpPT4ge1xyXG4gICAgICAgIGlmIChpY29uLmlkID09PSBcImxlZnRcIiAmJiBpbmRleCA9PT0gc3RhcnRJbmRleCkge1xyXG4gICAgICAgICAgaW5kZXggPSBlbmRJbmRleCArIDE7XHJcbiAgICAgICAgICBpbmRleC0tO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoaWNvbi5pZCA9PT0gXCJsZWZ0XCIgJiYgaW5kZXggPiBzdGFydEluZGV4KSB7XHJcbiAgICAgICAgICBpbmRleC0tO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoaWNvbi5pZCA9PT0gXCJyaWdodFwiICYmIGluZGV4IDwgZW5kSW5kZXgpIHtcclxuICAgICAgICAgIGluZGV4Kys7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIGluZGV4ID0gc3RhcnRJbmRleDtcclxuICAgICAgICB9XHJcbiAgICAgICAgaGFuZGxlRGlzcGxheUltYWdlKGluZGV4KTtcclxuICAgICAgICBoYW5kbGVBY3RpdmF0ZVRodW1ibmFpbChpbmRleClcclxuICAgICAgICBcclxuICAgICAgfVxyXG5cclxuICAgICkpXHJcbiAgICBcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGhhbmRsZURpc3BsYXlHYWxsZXJ5KGdhbGxlcnlUeXBlKXtcclxuICAgIFxyXG4gICAgICBib2R5LmNsYXNzTGlzdC5hZGQoXCJkaXNhYmxlLXNjcm9sbFwiKTtcclxuICAgICAgZ2FsbGVyeVR5cGUuY2xhc3NMaXN0LmFkZChcImRpc3BsYXktZ2FsbGVyeVwiKTtcclxuICAgICAgbmF2RGVza3RvcC5jbGFzc0xpc3QuYWRkKFwibmF2LXRyYW5zaXRpb25cIik7XHJcbiAgICAgIFxyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gaGFuZGxlRGlzcGxheUltYWdlKGN1cnJlbnRJbmRleCkge1xyXG4gICAgaW1hZ2VzLmZvckVhY2goKGltYWdlLCBpbmRleCkgPT4ge1xyXG4gICAgICBpZiAoY3VycmVudEluZGV4ID09PSBpbmRleCkge1xyXG4gICAgICAgIGltYWdlLmNsYXNzTGlzdC5hZGQoXCJzaG93LWltYWdlXCIpLCBoYW5kbGVBY3RpdmF0ZVRodW1ibmFpbChpbmRleCk7XHJcbiAgICAgICBcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBpbWFnZS5jbGFzc0xpc3QucmVtb3ZlKFwic2hvdy1pbWFnZVwiKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBoYW5kbGVBY3RpdmF0ZVRodW1ibmFpbChjdXJyZW50SW5kZXgpIHtcclxuICAgIHRodW1ibmFpbEltYWdlcy5mb3JFYWNoKCh0aHVtYm5haWwsIGluZGV4KSA9PlxyXG4gICAgICBjdXJyZW50SW5kZXggPT09IGluZGV4XHJcbiAgICAgICAgPyB0aHVtYm5haWwuY2xhc3NMaXN0LnJlbW92ZShcInRodW1ibmFpbC1kaXNhYmxlZFwiKVxyXG4gICAgICAgIDogdGh1bWJuYWlsLmNsYXNzTGlzdC5hZGQoXCJ0aHVtYm5haWwtZGlzYWJsZWRcIilcclxuICAgICk7XHJcbiAgfVxyXG5cclxuICAvLyBldmVudCBsaXN0ZW5lcnMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gIHdvcmtCdG5zLmZvckVhY2goKGJ0bikgPT4gYnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiBoYW5kbGVXb3JrQnRuKGJ0bikpKTtcclxuXHJcbiAgdGh1bWJuYWlsSW1hZ2VzLmZvckVhY2goKHRodW1ibmFpbCwgdGh1bWJuYWlsSW5kZXgpID0+XHJcbiAgICB0aHVtYm5haWwuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgKGluZGV4ID0gdGh1bWJuYWlsSW5kZXgpLCBoYW5kbGVEaXNwbGF5SW1hZ2UoaW5kZXgpO1xyXG4gICAgfSlcclxuICApO1xyXG5cclxuICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpID0+IHtcclxuICAgIGlmIChcclxuICAgICAgKGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcImdhbGxlcnlcIikgJiYgYm9keS5jbGFzc0xpc3QuY29udGFpbnMoXCJkaXNhYmxlLXNjcm9sbFwiKSkgfHxcclxuICAgICAgYm9keS5jbGFzc0xpc3QuY29udGFpbnMoXCJjYXJvdXNlbFwiKVxyXG4gICAgKSB7XHJcbiAgICAgIGdhbGxlcmllcy5mb3JFYWNoKChnYWxsZXJ5KSA9PiBnYWxsZXJ5LmNsYXNzTGlzdC5yZW1vdmUoXCJkaXNwbGF5LWdhbGxlcnlcIikpO1xyXG4gICAgICBib2R5LmNsYXNzTGlzdC5yZW1vdmUoXCJkaXNhYmxlLXNjcm9sbFwiKTtcclxuICAgICAgbmF2RGVza3RvcC5jbGFzc0xpc3QucmVtb3ZlKFwibmF2LXRyYW5zaXRpb25cIik7XHJcbiAgICAgIGluZGV4PTA7XHJcbiAgICB9XHJcbiAgfSk7XHJcblxyXG4gIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tZmFkZUlOIGFuaW0gLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4gIGNvbnN0IG9ic2VydmVyID0gbmV3IEludGVyc2VjdGlvbk9ic2VydmVyKChlbnRyaWVzKSA9PiB7XHJcbiAgICBlbnRyaWVzLmZvckVhY2goKGVudHJ5KSA9PiB7XHJcbiAgICAgIGlmIChlbnRyeS5pc0ludGVyc2VjdGluZykge1xyXG4gICAgICAgIGVudHJ5LnRhcmdldC5jbGFzc0xpc3QuYWRkKFwic2hvd1wiKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gIGNvbnN0IGhpZGRlbkVsZW1lbnRzTGVmdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuaGlkZGVuXCIpO1xyXG4gIGNvbnN0IGhpZGRlbkVsZW1lbnRzUmlnaHQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmhpZGRlbi1yaWdodFwiKTtcclxuICBjb25zdCBoaWRkZW5WYW5pc2hlZEVsZW1lbnRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5oaWRkZW4tdmFuaXNoZWRcIik7XHJcbiAgaGlkZGVuRWxlbWVudHNMZWZ0LmZvckVhY2goKGVsKSA9PiBvYnNlcnZlci5vYnNlcnZlKGVsKSk7XHJcbiAgaGlkZGVuRWxlbWVudHNSaWdodC5mb3JFYWNoKChlbCkgPT4gb2JzZXJ2ZXIub2JzZXJ2ZShlbCkpO1xyXG4gIGhpZGRlblZhbmlzaGVkRWxlbWVudHMuZm9yRWFjaCgoZWwpID0+IG9ic2VydmVyLm9ic2VydmUoZWwpKTtcclxufTtcclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcbiAgLy8gZnVuY3Rpb24gaGFuZGxlU3dpcGVUaHVtYm5haWxzKGljb24sIGluZGV4KSB7XHJcbiAgLy8gICBsID0gMjtcclxuXHJcbiAgLy8gICBpZiAoKGljb24uaWQgPT09IFwibGVmdFwiKSA9PT0gbCkge1xyXG4gIC8vICAgICB0aHVtYm5haWxzQ2Fyb3VzZWwuc2Nyb2xsKHtcclxuICAvLyAgICAgICB0b3A6IDAsXHJcbiAgLy8gICAgICAgbGVmdDogLTc4Ljc1LFxyXG4gIC8vICAgICAgIGJlaGF2aW9yOiBcInNtb290aFwiLFxyXG4gIC8vICAgICB9KTtcclxuICAvLyAgIH0gZWxzZSBpZiAoKGljb24uaWQgPT09IFwicmlnaHRcIiwgaW5kZXggPT09IGwpKSB7XHJcbiAgLy8gICAgIHRodW1ibmFpbHNDYXJvdXNlbC5zY3JvbGwoe1xyXG4gIC8vICAgICAgIHRvcDogMCxcclxuICAvLyAgICAgICBsZWZ0OiA3OC43NSxcclxuICAvLyAgICAgICBiZWhhdmlvcjogXCJzbW9vdGhcIixcclxuICAvLyAgICAgfSk7XHJcbiAgLy8gICB9XHJcbiAgLy8gfSJdfQ==
